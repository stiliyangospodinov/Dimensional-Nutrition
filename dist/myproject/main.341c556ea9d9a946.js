"use strict";(self.webpackChunkmyproject=self.webpackChunkmyproject||[]).push([[179],{206:(Yi,Vn,Le)=>{Le.d(Vn,{$:()=>Ag,A:()=>le,G:()=>Ct,K:()=>_g,L:()=>Lo,N:()=>oo,P:()=>F0,R:()=>N0,U:()=>Te,V:()=>Ni,W:()=>bt,X:()=>Dc,Y:()=>th,Z:()=>Or,_:()=>Bo,a:()=>$n,a0:()=>uu,a1:()=>Pc,a2:()=>Mg,a3:()=>Rg,a4:()=>y0,a5:()=>ri,a6:()=>Og,a7:()=>v0,a8:()=>an,a9:()=>Qe,aA:()=>rt,aB:()=>Pt,aC:()=>ae,aD:()=>Ts,aE:()=>K,aF:()=>je,aG:()=>sm,aH:()=>rm,aI:()=>H0,aJ:()=>sn,aN:()=>sa,aQ:()=>ys,aa:()=>ki,ab:()=>fr,ac:()=>Xs,ad:()=>$o,ae:()=>ea,af:()=>ta,ag:()=>hu,ah:()=>ao,ak:()=>To,al:()=>fu,am:()=>lt,ap:()=>m0,aq:()=>Nr,as:()=>vA,at:()=>jg,au:()=>qt,av:()=>Ee,aw:()=>F,ax:()=>at,ay:()=>xu,az:()=>lm,b:()=>w0,c:()=>B0,d:()=>j0,e:()=>nm,f:()=>ne,g:()=>bu,h:()=>si,i:()=>D0,j:()=>wh,k:()=>ca,l:()=>V0,m:()=>Ph,o:()=>Cm,p:()=>jt,r:()=>em,s:()=>k0,u:()=>Lc});var C=Le(861),Z=Le(58),N=Le(534),Re=Le(879),wt=Le(582),en=Le(537);const jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},le={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ct=function Me(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Fn=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},dt=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new Re.Yd("@firebase/auth");function tn(f,...c){Ge.logLevel<=Re.in.ERROR&&Ge.error(`Auth (${N.SDK_VERSION}): ${f}`,...c)}function at(f,...c){throw Xe(f,...c)}function Pt(f,...c){return Xe(f,...c)}function Gr(f,c,d){const p=Object.assign(Object.assign({},Fn()),{[c]:d});return new Z.LL("auth","Firebase",p).create(c,{appName:f.name})}function Sn(f,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&at(f,"argument-error"),Gr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(f,...c){if("string"!=typeof f){const d=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(d,...p)}return dt.create(f,...c)}function ae(f,c,...d){if(!f)throw Xe(c,...d)}function ft(f){const c="INTERNAL ASSERTION FAILED: "+f;throw tn(c),new Error(c)}function qt(f,c){f||ft(c)}function gn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Cn(){return"http:"===Ai()||"https:"===Ai()}function Ai(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Wr{constructor(c,d){this.shortDelay=c,this.longDelay=d,qt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function Si(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Cn()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ji(f,c){qt(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ${static initialize(c,d,p){this.fetchImpl=c,d&&(this.headersImpl=d),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},W=new Wr(3e4,6e4);function j(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function te(f,c,d,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,C.Z)(function*(f,c,d,p,_={}){return ge(f,_,(0,C.Z)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const z=(0,Z.xO)(Object.assign({key:f.config.apiKey},R)).slice(1),se=yield f._getAdditionalHeaders();return se["Content-Type"]="application/json",f.languageCode&&(se["X-Firebase-Locale"]=f.languageCode),$.fetch()(mt(f,f.config.apiHost,d,z),Object.assign({method:c,headers:se,referrerPolicy:"no-referrer"},E))}))})).apply(this,arguments)}function ge(f,c,d){return ot.apply(this,arguments)}function ot(){return(ot=(0,C.Z)(function*(f,c,d){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},q),c);try{const _=new kt(f),E=yield Promise.race([d(),_.promise]);_.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw nn(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const z=E.ok?R.errorMessage:R.error.message,[se,De]=z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw nn(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===se)throw nn(f,"email-already-in-use",R);if("USER_DISABLED"===se)throw nn(f,"user-disabled",R);const ke=p[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(De)throw Gr(f,ke,De);at(f,ke)}}catch(_){if(_ instanceof Z.ZR)throw _;at(f,"network-request-failed",{message:String(_)})}})).apply(this,arguments)}function he(f,c,d,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,C.Z)(function*(f,c,d,p,_={}){const E=yield te(f,c,d,p,_);return"mfaPendingCredential"in E&&at(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function mt(f,c,d,p){const _=`${c}${d}?${p}`;return f.config.emulator?Ji(f.config,_):`${f.config.apiScheme}://${_}`}function Zt(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,p)=>{this.timer=setTimeout(()=>p(Pt(this.auth,"network-request-failed")),W.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nn(f,c,d){const p={appName:f.name};d.email&&(p.email=d.email),d.phoneNumber&&(p.phoneNumber=d.phoneNumber);const _=Pt(f,c,p);return _.customData._tokenResponse=d,_}function Un(f){return void 0!==f&&void 0!==f.getResponse}function Bn(f){return void 0!==f&&void 0!==f.enterprise}class Yn{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Zt(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Pi(){return(Pi=(0,C.Z)(function*(f){return(yield te(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xi(f,c){return _t.apply(this,arguments)}function _t(){return(_t=(0,C.Z)(function*(f,c){return te(f,"GET","/v2/recaptchaConfig",j(f,c))})).apply(this,arguments)}function to(){return(to=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Mi(){return(Mi=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Zr(){return(Zr=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Kr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function xt(){return(xt=(0,C.Z)(function*(f,c=!1){const d=(0,Z.m9)(f),p=yield d.getIdToken(c),_=bn(p);ae(_&&_.exp&&_.auth_time&&_.iat,d.auth,"internal-error");const E="object"==typeof _.firebase?_.firebase:void 0,R=E?.sign_in_provider;return{claims:_,token:p,authTime:Kr(Yr(_.auth_time)),issuedAtTime:Kr(Yr(_.iat)),expirationTime:Kr(Yr(_.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Yr(f){return 1e3*Number(f)}function bn(f){const[c,d,p]=f.split(".");if(void 0===c||void 0===d||void 0===p)return tn("JWT malformed, contained fewer than 3 sections"),null;try{const _=(0,Z.tV)(d);return _?JSON.parse(_):(tn("Failed to decode base64 JWT payload"),null)}catch(_){return tn("Caught error parsing JWT payload as JSON",_?.toString()),null}}function rn(f,c){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,C.Z)(function*(f,c,d=!1){if(d)return c;try{return yield c}catch(p){throw p instanceof Z.ZR&&function no({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class ro{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const _=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,_)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.Z)(function*(){yield d.iteration()}),p)}iteration(){var c=this;return(0,C.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class Ri{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kr(this.lastLoginAt),this.creationTime=Kr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jn(f){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,C.Z)(function*(f){var c;const d=f.auth,p=yield f.getIdToken(),_=yield rn(f,function cr(f,c){return Zr.apply(this,arguments)}(d,{idToken:p}));ae(_?.users.length,d,"internal-error");const E=_.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?function Fo(f){return f.map(c=>{var{providerId:d}=c,p=(0,wt._T)(c,["providerId"]);return{providerId:d,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}(E.providerUserInfo):[],z=function Qs(f,c){return[...f.filter(p=>!c.some(_=>_.providerId===p.providerId)),...c]}(f.providerData,R),ke=!!f.isAnonymous&&!(f.email&&E.passwordHash||z?.length),st={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:z,metadata:new Ri(E.createdAt,E.lastLoginAt),isAnonymous:ke};Object.assign(f,st)}),Pn.apply(this,arguments)}function Jr(){return(Jr=(0,C.Z)(function*(f){const c=(0,Z.m9)(f);yield jn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function io(){return(io=(0,C.Z)(function*(f,c){const d=yield ge(f,{},(0,C.Z)(function*(){const p=(0,Z.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:_,apiKey:E}=f.config,R=mt(f,_,"/v1/token",`key=${E}`),z=yield f._getAdditionalHeaders();return z["Content-Type"]="application/x-www-form-urlencoded",$.fetch()(R,{method:"POST",headers:z,body:p})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,C.Z)(function*(f,c){return te(f,"POST","/v2/accounts:revokeToken",j(f,c))})).apply(this,arguments)}class I{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){ae(c.idToken,"internal-error"),ae(typeof c.idToken<"u","internal-error"),ae(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):function Ja(f){const c=bn(f);return ae(c,"internal-error"),ae(typeof c.exp<"u","internal-error"),ae(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}getToken(c,d=!1){var p=this;return(0,C.Z)(function*(){return ae(!p.accessToken||p.refreshToken,c,"user-token-expired"),d||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null:p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var p=this;return(0,C.Z)(function*(){const{accessToken:_,refreshToken:E,expiresIn:R}=yield function ps(f,c){return io.apply(this,arguments)}(c,d);p.updateTokensAndExpiration(_,E,Number(R))})()}updateTokensAndExpiration(c,d,p){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,d){const{refreshToken:p,accessToken:_,expirationTime:E}=d,R=new I;return p&&(ae("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),_&&(ae("string"==typeof _,"internal-error",{appName:c}),R.accessToken=_),E&&(ae("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new I,this.toJSON())}_performRefresh(){return ft("not implemented")}}function w(f,c){ae("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class v{constructor(c){var{uid:d,auth:p,stsTokenManager:_}=c,E=(0,wt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ro(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=p,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new Ri(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,C.Z)(function*(){const p=yield rn(d,d.stsTokenManager.getToken(d.auth,c));return ae(p,d.auth,"internal-error"),d.accessToken!==p&&(d.accessToken=p,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),p})()}getIdTokenResult(c){return function Jn(f){return xt.apply(this,arguments)}(this,c)}reload(){return function lr(f){return Jr.apply(this,arguments)}(this)}_assign(c){this!==c&&(ae(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new v(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var p=this;return(0,C.Z)(function*(){let _=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),_=!0),d&&(yield jn(p)),yield p.auth._persistUserIfCurrent(p),_&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.Z)(function*(){const d=yield c.getIdToken();return yield rn(c,function eo(f,c){return to.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var p,_,E,R,z,se,De,ke;const st=null!==(p=d.displayName)&&void 0!==p?p:void 0,Vr=null!==(_=d.email)&&void 0!==_?_:void 0,Li=null!==(E=d.phoneNumber)&&void 0!==E?E:void 0,fo=null!==(R=d.photoURL)&&void 0!==R?R:void 0,bm=null!==(z=d.tenantId)&&void 0!==z?z:void 0,Jc=null!==(se=d._redirectEventId)&&void 0!==se?se:void 0,Oh=null!==(De=d.createdAt)&&void 0!==De?De:void 0,la=null!==(ke=d.lastLoginAt)&&void 0!==ke?ke:void 0,{uid:Nh,emailVerified:mr,isAnonymous:Tm,providerData:zn,stsTokenManager:Xc}=d;ae(Nh&&Xc,c,"internal-error");const nI=I.fromJSON(this.name,Xc);ae("string"==typeof Nh,c,"internal-error"),w(st,c.name),w(Vr,c.name),ae("boolean"==typeof mr,c,"internal-error"),ae("boolean"==typeof Tm,c,"internal-error"),w(Li,c.name),w(fo,c.name),w(bm,c.name),w(Jc,c.name),w(Oh,c.name),w(la,c.name);const el=new v({uid:Nh,auth:c,email:Vr,emailVerified:mr,displayName:st,isAnonymous:Tm,photoURL:fo,phoneNumber:Li,tenantId:bm,stsTokenManager:nI,createdAt:Oh,lastLoginAt:la});return zn&&Array.isArray(zn)&&(el.providerData=zn.map(tl=>Object.assign({},tl))),Jc&&(el._redirectEventId=Jc),el}static _fromIdTokenResponse(c,d,p=!1){return(0,C.Z)(function*(){const _=new I;_.updateFromServerResponse(d);const E=new v({uid:d.localId,auth:c,stsTokenManager:_,isAnonymous:p});return yield jn(E),E})()}}const A=new Map;function K(f){qt(f instanceof Function,"Expected a class definition");let c=A.get(f);return c?(qt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,A.set(f,c),c)}const Te=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.Z)(function*(){return!0})()}_set(d,p){var _=this;return(0,C.Z)(function*(){_.storage[d]=p})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=p.storage[d];return void 0===_?null:_})()}_remove(d){var p=this;return(0,C.Z)(function*(){delete p.storage[d]})()}_addListener(d,p){}_removeListener(d,p){}}return f.type="NONE",f})();function je(f,c,d){return`firebase:${f}:${c}:${d}`}class yt{constructor(c,d,p){this.persistence=c,this.auth=d,this.userKey=p;const{config:_,name:E}=this.auth;this.fullUserKey=je(this.userKey,_.apiKey,E),this.fullPersistenceKey=je("persistence",_.apiKey,E),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?v._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,C.Z)(function*(){if(d.persistence===c)return;const p=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,p?d.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,p="authUser"){return(0,C.Z)(function*(){if(!d.length)return new yt(K(Te),c,p);const _=(yield Promise.all(d.map(function(){var De=(0,C.Z)(function*(ke){if(yield ke._isAvailable())return ke});return function(ke){return De.apply(this,arguments)}}()))).filter(De=>De);let E=_[0]||K(Te);const R=je(p,c.config.apiKey,c.name);let z=null;for(const De of d)try{const ke=yield De._get(R);if(ke){const st=v._fromJSON(c,ke);De!==E&&(z=st),E=De;break}}catch{}const se=_.filter(De=>De._shouldAllowMigration);return E._shouldAllowMigration&&se.length?(E=se[0],z&&(yield E._set(R,z.toJSON())),yield Promise.all(d.map(function(){var De=(0,C.Z)(function*(ke){if(ke!==E)try{yield ke._remove(R)}catch{}});return function(ke){return De.apply(this,arguments)}}())),new yt(E,c,p)):new yt(E,c,p)})()}}function ve(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(gs(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Nt(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(M(c))return"Blackberry";if(re(c))return"Webos";if(Oe(c))return"Safari";if((c.includes("chrome/")||Wn(c))&&!c.includes("edge/"))return"Chrome";if(F(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Nt(f=(0,Z.z$)()){return/firefox\//i.test(f)}function Oe(f=(0,Z.z$)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Wn(f=(0,Z.z$)()){return/crios\//i.test(f)}function gs(f=(0,Z.z$)()){return/iemobile/i.test(f)}function F(f=(0,Z.z$)()){return/android/i.test(f)}function M(f=(0,Z.z$)()){return/blackberry/i.test(f)}function re(f=(0,Z.z$)()){return/webos/i.test(f)}function Ee(f=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function rt(f=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}function on(f=(0,Z.z$)()){return Ee(f)||F(f)||re(f)||M(f)||/windows phone/i.test(f)||gs(f)}function it(f,c=[]){let d;switch(f){case"Browser":d=ve((0,Z.z$)());break;case"Worker":d=`${ve((0,Z.z$)())}-${f}`;break;default:d=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${N.SDK_VERSION}/${p}`}class Xa{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const p=E=>new Promise((R,z)=>{try{R(c(E))}catch(se){z(se)}});p.onAbort=d,this.queue.push(p);const _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,C.Z)(function*(){if(d.auth.currentUser===c)return;const p=[];try{for(const _ of d.queue)yield _(c),_.onAbort&&p.push(_.onAbort)}catch(_){p.reverse();for(const E of p)try{E()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:_?.message})}})()}}function Wd(){return(Wd=(0,C.Z)(function*(f,c={}){return te(f,"GET","/v2/passwordPolicy",j(f,c))})).apply(this,arguments)}class Xr{constructor(c){var d,p,_,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=R.minPasswordLength)&&void 0!==d?d:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(_=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==_?_:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,p,_,E,R,z;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,se),this.validatePasswordCharacterOptions(c,se),se.isValid&&(se.isValid=null===(d=se.meetsMinPasswordLength)||void 0===d||d),se.isValid&&(se.isValid=null===(p=se.meetsMaxPasswordLength)||void 0===p||p),se.isValid&&(se.isValid=null===(_=se.containsLowercaseLetter)||void 0===_||_),se.isValid&&(se.isValid=null===(E=se.containsUppercaseLetter)||void 0===E||E),se.isValid&&(se.isValid=null===(R=se.containsNumericCharacter)||void 0===R||R),se.isValid&&(se.isValid=null===(z=se.containsNonAlphanumericCharacter)||void 0===z||z),se}validatePasswordLengthOptions(c,d){const p=this.customStrengthOptions.minPasswordLength,_=this.customStrengthOptions.maxPasswordLength;p&&(d.meetsMinPasswordLength=c.length>=p),_&&(d.meetsMaxPasswordLength=c.length<=_)}validatePasswordCharacterOptions(c,d){let p;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let _=0;_<c.length;_++)p=c.charAt(_),this.updatePasswordCharacterOptionsStatuses(d,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,d,p,_,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=_)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class oA{constructor(c,d,p,_){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s0(this),this.idTokenSubscription=new s0(this),this.beforeStateQueue=new Xa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(c,d){var p=this;return d&&(this._popupRedirectResolver=K(d)),this._initializationPromise=this.queue((0,C.Z)(function*(){var _,E;if(!p._deleted&&(p.persistenceManager=yield yt.create(p,c),!p._deleted)){if(null!==(_=p._popupRedirectResolver)&&void 0!==_&&_._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(d),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUser(c){var d=this;return(0,C.Z)(function*(){var p;const _=yield d.assertedPersistence.getCurrentUser();let E=_,R=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const z=null===(p=d.redirectUser)||void 0===p?void 0:p._redirectEventId,se=E?._redirectEventId,De=yield d.tryRedirectSignIn(c);(!z||z===se)&&De?.user&&(E=De.user,R=!0)}if(!E)return d.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield d.beforeStateQueue.runMiddleware(E)}catch(z){E=_,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(z))}return E?d.reloadAndSetCurrentUserOrClear(E):d.directlySetCurrentUser(null)}return ae(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===E._redirectEventId?d.directlySetCurrentUser(E):d.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var d=this;return(0,C.Z)(function*(){let p=null;try{p=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,C.Z)(function*(){try{yield jn(c)}catch(p){if("auth/network-request-failed"!==p?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function We(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,C.Z)(function*(){const p=c?(0,Z.m9)(c):null;return p&&ae(p.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(p&&p._clone(d))})()}_updateCurrentUser(c,d=!1){var p=this;return(0,C.Z)(function*(){if(!p._deleted)return c&&ae(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),d||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.Z)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.Z)(function*(){return yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0)})()}setPersistence(c){var d=this;return this.queue((0,C.Z)(function*(){yield d.assertedPersistence.setPersistence(K(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,C.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const p=d._getPasswordPolicyInternal();return p.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.Z)(function*(){const d=yield function iA(f){return Wd.apply(this,arguments)}(c),p=new Xr(d);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Z.LL("auth","Firebase",c())}onAuthStateChanged(c,d,p){return this.registerStateListener(this.authStateSubscription,c,d,p)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,p){return this.registerStateListener(this.idTokenSubscription,c,d,p)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,C.Z)(function*(){if(d.currentUser){const p=yield d.currentUser.getIdToken(),_={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=d.tenantId&&(_.tenantId=d.tenantId),yield function P(f,c){return T.apply(this,arguments)}(d,_)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var p=this;return(0,C.Z)(function*(){const _=yield p.getOrInitRedirectPersistenceManager(d);return null===c?_.removeCurrentUser():_.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,C.Z)(function*(){if(!d.redirectPersistenceManager){const p=c&&K(c)||d._popupRedirectResolver;ae(p,d,"argument-error"),d.redirectPersistenceManager=yield yt.create(d,[K(p._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,C.Z)(function*(){var p,_;return d._isInitialized&&(yield d.queue((0,C.Z)(function*(){}))),(null===(p=d._currentUser)||void 0===p?void 0:p._redirectEventId)===c?d._currentUser:(null===(_=d.redirectUser)||void 0===_?void 0:_._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,C.Z)(function*(){if(c===d.currentUser)return d.queue((0,C.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,p,_){if(this._deleted)return()=>{};const E="function"==typeof d?d:d.next.bind(d);let R=!1;const z=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(z,this,"internal-error"),z.then(()=>{R||E(this.currentUser)}),"function"==typeof d){const se=c.addObserver(d,p,_);return()=>{R=!0,se()}}{const se=c.addObserver(d);return()=>{R=!0,se()}}}directlySetCurrentUser(c){var d=this;return(0,C.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=it(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.Z)(function*(){var d;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const _=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();_&&(p["X-Firebase-Client"]=_);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,C.Z)(function*(){var d;const p=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return p?.error&&function Ln(f,...c){Ge.logLevel<=Re.in.WARN&&Ge.warn(`Auth (${N.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function sn(f){return(0,Z.m9)(f)}class s0{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Z.ne)(d=>this.observer=d)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Oi={loadJS:()=>(0,C.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fg(f){return Oi.loadJS(f)}function u0(f){return`__${f}${Math.floor(1e6*Math.random())}`}class ei{constructor(c){this.type="recaptcha-enterprise",this.auth=sn(c)}verify(c="verify",d=!1){var p=this;return(0,C.Z)(function*(){function E(){return E=(0,C.Z)(function*(z){if(!d){if(null==z.tenantId&&null!=z._agentRecaptchaConfig)return z._agentRecaptchaConfig.siteKey;if(null!=z.tenantId&&void 0!==z._tenantRecaptchaConfigs[z.tenantId])return z._tenantRecaptchaConfigs[z.tenantId].siteKey}return new Promise(function(){var se=(0,C.Z)(function*(De,ke){Xi(z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(st=>{if(void 0!==st.recaptchaKey){const Vr=new Yn(st);return null==z.tenantId?z._agentRecaptchaConfig=Vr:z._tenantRecaptchaConfigs[z.tenantId]=Vr,De(Vr.siteKey)}ke(new Error("recaptcha Enterprise site key undefined"))}).catch(st=>{ke(st)})});return function(De,ke){return se.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(z,se,De){const ke=window.grecaptcha;Bn(ke)?ke.enterprise.ready(()=>{ke.enterprise.execute(z,{action:c}).then(st=>{se(st)}).catch(()=>{se("NO_RECAPTCHA")})}):De(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((z,se)=>{(function _(z){return E.apply(this,arguments)})(p.auth).then(De=>{if(!d&&Bn(window.grecaptcha))R(De,z,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));let ke=function uA(){return Oi.recaptchaEnterpriseScript}();0!==ke.length&&(ke+=De),fg(ke).then(()=>{R(De,z,se)}).catch(st=>{se(st)})}}).catch(De=>{se(De)})})})()}}function $e(f,c,d){return pg.apply(this,arguments)}function pg(){return(pg=(0,C.Z)(function*(f,c,d,p=!1){const _=new ei(f);let E;try{E=yield _.verify(d)}catch{E=yield _.verify(d,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Cc(f,c,d,p){return gg.apply(this,arguments)}function gg(){return gg=(0,C.Z)(function*(f,c,d,p){var _;if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield $e(f,c,d,"getOobCode"===d);return p(f,E)}return p(f,c).catch(function(){var E=(0,C.Z)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const z=yield $e(f,c,d,"getOobCode"===d);return p(f,z)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),gg.apply(this,arguments)}function _g(f,c,d){const p=sn(f);ae(p._canInitEmulator,p,"emulator-config-failed"),ae(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const _=!!d?.disableWarnings,E=Kd(c),{host:R,port:z}=function l0(f){const c=Kd(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!d)return{host:"",port:null};const p=d[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(p);if(_){const E=_[1];return{host:E,port:eu(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:eu(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===z?"":`:${z}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:z,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Tc(){function f(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}function Kd(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function eu(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class Lo{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ft("not implemented")}_getIdTokenResponse(c){return ft("not implemented")}_linkToIdToken(c,d){return ft("not implemented")}_getReauthenticationResolver(c){return ft("not implemented")}}function Qd(f,c){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:resetPassword",j(f,c))})).apply(this,arguments)}function tu(){return(tu=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function yg(f,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ig(){return(Ig=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:update",j(f,c))})).apply(this,arguments)}function $t(f,c){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithPassword",j(f,c))})).apply(this,arguments)}function Jd(f,c){return de.apply(this,arguments)}function de(){return(de=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:sendOobCode",j(f,c))})).apply(this,arguments)}function nu(){return(nu=(0,C.Z)(function*(f,c){return Jd(f,c)})).apply(this,arguments)}function wg(f,c){return ru.apply(this,arguments)}function ru(){return(ru=(0,C.Z)(function*(f,c){return Jd(f,c)})).apply(this,arguments)}function d0(f,c){return iu.apply(this,arguments)}function iu(){return(iu=(0,C.Z)(function*(f,c){return Jd(f,c)})).apply(this,arguments)}function Cg(){return(Cg=(0,C.Z)(function*(f,c){return Jd(f,c)})).apply(this,arguments)}function bg(){return(bg=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}function ms(){return(ms=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}class _s extends Lo{constructor(c,d,p,_=null){super("password",p),this._email=c,this._password=d,this._tenantId=_}static _fromEmailAndPassword(c,d){return new _s(c,d,"password")}static _fromEmailAndCode(c,d,p=null){return new _s(c,d,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,C.Z)(function*(){switch(d.signInMethod){case"password":return Cc(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$t);case"emailLink":return function dA(f,c){return bg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:at(c,"internal-error")}})()}_linkToIdToken(c,d){var p=this;return(0,C.Z)(function*(){switch(p.signInMethod){case"password":return Cc(c,{idToken:d,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yg);case"emailLink":return function hA(f,c){return ms.apply(this,arguments)}(c,{idToken:d,email:p._email,oobCode:p._password});default:at(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function mi(f,c){return eh.apply(this,arguments)}function eh(){return(eh=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithIdp",j(f,c))})).apply(this,arguments)}class oo extends Lo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new oo(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):at("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_}=d,E=(0,wt._T)(d,["providerId","signInMethod"]);if(!p||!_)return null;const R=new oo(p,_);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return mi(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,mi(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,mi(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,Z.xO)(d)}return c}}function Uo(){return(Uo=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:sendVerificationCode",j(f,c))})).apply(this,arguments)}function so(){return(so=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c))})).apply(this,arguments)}function ce(){return(ce=(0,C.Z)(function*(f,c){const d=yield he(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c));if(d.temporaryProof)throw nn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Dg={USER_NOT_FOUND:"user-not-found"};function Ys(){return(Ys=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Dg)})).apply(this,arguments)}class Co extends Lo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Co({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Co({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function f0(f,c){return so.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function p0(f,c){return ce.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function we(f,c){return Ys.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:p,verificationCode:_}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:p,code:_}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}=c;return p||d||_||E?new Co({verificationId:d,verificationCode:p,phoneNumber:_,temporaryProof:E}):null}}class su{constructor(c){var d,p,_,E,R,z;const se=(0,Z.zd)((0,Z.pd)(c)),De=null!==(d=se.apiKey)&&void 0!==d?d:null,ke=null!==(p=se.oobCode)&&void 0!==p?p:null,st=function ou(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=se.mode)&&void 0!==_?_:null);ae(De&&ke&&st,"argument-error"),this.apiKey=De,this.operation=st,this.code=ke,this.continueUrl=null!==(E=se.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=se.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(z=se.tenantId)&&void 0!==z?z:null}static parseLink(c){const d=function g0(f){const c=(0,Z.zd)((0,Z.pd)(f)).link,d=c?(0,Z.zd)((0,Z.pd)(c)).deep_link_id:null,p=(0,Z.zd)((0,Z.pd)(f)).deep_link_id;return(p?(0,Z.zd)((0,Z.pd)(p)).link:null)||p||d||c||f}(c);try{return new su(d)}catch{return null}}}let Ni=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,p){return _s._fromEmailAndPassword(d,p)}static credentialWithLink(d,p){const _=su.parseLink(p);return ae(_,"argument-error"),_s._fromEmailAndCode(d,_.code,_.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class _i{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class hr extends _i{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Or extends hr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return ae("providerId"in d&&"signInMethod"in d,"argument-error"),oo._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return ae(c.idToken||c.accessToken,"argument-error"),oo._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Or.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Or.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:p,oauthTokenSecret:_,pendingToken:E,nonce:R,providerId:z}=c;if(!p&&!_&&!d&&!E||!z)return null;try{return new Or(z)._credential({idToken:d,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let bt=(()=>{class f extends hr{constructor(){super("facebook.com")}static credential(d){return oo._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Dc=(()=>{class f extends hr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,p){return oo._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:_}=d;if(!p&&!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),th=(()=>{class f extends hr{constructor(){super("github.com")}static credential(d){return oo._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class ys extends Lo{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return mi(c,this.buildRequest())}_linkToIdToken(c,d){const p=this.buildRequest();return p.idToken=d,mi(c,p)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,mi(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:_,pendingToken:E}=d;return p&&_&&E&&p===_?new ys(p,E):null}static _create(c,d){return new ys(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bo extends _i{constructor(c){ae(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Bo.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Bo.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=ys.fromJSON(c);return ae(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:p}=c;if(!d||!p)return null;try{return ys._create(p,d)}catch{return null}}}let Ag=(()=>{class f extends hr{constructor(){super("twitter.com")}static credential(d,p){return oo._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:p})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:p,oauthTokenSecret:_}=d;if(!p||!_)return null;try{return f.credential(p,_)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function rh(f,c){return au.apply(this,arguments)}function au(){return(au=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signUp",j(f,c))})).apply(this,arguments)}class ti{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,p,_=!1){return(0,C.Z)(function*(){const E=yield v._fromIdTokenResponse(c,p,_),R=ih(p);return new ti({user:E,providerId:R,_tokenResponse:p,operationType:d})})()}static _forOperation(c,d,p){return(0,C.Z)(function*(){yield c._updateTokensIfNecessary(p,!0);const _=ih(p);return new ti({user:c,providerId:_,_tokenResponse:p,operationType:d})})()}}function ih(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function uu(f){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,C.Z)(function*(f){var c;const d=sn(f);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ti({user:d.currentUser,providerId:null,operationType:"signIn"});const p=yield rh(d,{returnSecureToken:!0}),_=yield ti._fromIdTokenResponse(d,"signIn",p,!0);return yield d._updateCurrentUser(_.user),_})).apply(this,arguments)}class cu extends Z.ZR{constructor(c,d,p,_){var E;super(d.code,d.message),this.operationType=p,this.user=_,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:d.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,d,p,_){return new cu(c,d,p,_)}}function Sg(f,c,d,p){return("reauthenticate"===c?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?cu._fromErrorAndOperation(f,E,c,p):E})}function oh(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function m0(f,c){return sh.apply(this,arguments)}function sh(){return sh=(0,C.Z)(function*(f,c){const d=(0,Z.m9)(f);yield lu(!0,d,c);const{providerUserInfo:p}=yield function xi(f,c){return Mi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),_=oh(p||[]);return d.providerData=d.providerData.filter(E=>_.has(E.providerId)),_.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),sh.apply(this,arguments)}function ni(f,c){return ah.apply(this,arguments)}function ah(){return(ah=(0,C.Z)(function*(f,c,d=!1){const p=yield rn(f,c._linkToIdToken(f.auth,yield f.getIdToken()),d);return ti._forOperation(f,"link",p)})).apply(this,arguments)}function lu(f,c,d){return uh.apply(this,arguments)}function uh(){return(uh=(0,C.Z)(function*(f,c,d){yield jn(c);const _=!1===f?"provider-already-linked":"no-such-provider";ae(oh(c.providerData).has(d)===f,c.auth,_)})).apply(this,arguments)}function Pg(f,c){return ch.apply(this,arguments)}function ch(){return(ch=(0,C.Z)(function*(f,c,d=!1){const{auth:p}=f,_="reauthenticate";try{const E=yield rn(f,Sg(p,_,c,f),d);ae(E.idToken,p,"internal-error");const R=bn(E.idToken);ae(R,p,"internal-error");const{sub:z}=R;return ae(f.uid===z,p,"user-mismatch"),ti._forOperation(f,_,E)}catch(E){throw"auth/user-not-found"===E?.code&&at(p,"user-mismatch"),E}})).apply(this,arguments)}function xg(f,c){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,C.Z)(function*(f,c,d=!1){const p="signIn",_=yield Sg(f,p,c),E=yield ti._fromIdTokenResponse(f,p,_);return d||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function Pc(f,c){return lh.apply(this,arguments)}function lh(){return(lh=(0,C.Z)(function*(f,c){return xg(sn(f),c)})).apply(this,arguments)}function Mg(f,c){return mn.apply(this,arguments)}function mn(){return(mn=(0,C.Z)(function*(f,c){const d=(0,Z.m9)(f);return yield lu(!1,d,c.providerId),ni(d,c)})).apply(this,arguments)}function Rg(f,c){return dh.apply(this,arguments)}function dh(){return(dh=(0,C.Z)(function*(f,c){return Pg((0,Z.m9)(f),c)})).apply(this,arguments)}function _n(){return(_n=(0,C.Z)(function*(f,c){return he(f,"POST","/v1/accounts:signInWithCustomToken",j(f,c))})).apply(this,arguments)}function y0(f,c){return xc.apply(this,arguments)}function xc(){return xc=(0,C.Z)(function*(f,c){const d=sn(f),p=yield function _0(f,c){return _n.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),_=yield ti._fromIdTokenResponse(d,"signIn",p);return yield d._updateCurrentUser(_.user),_}),xc.apply(this,arguments)}class Ue{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Xn._fromServerResponse(c,d):"totpInfo"in d?ht._fromServerResponse(c,d):at(c,"internal-error")}}class Xn extends Ue{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Xn(d)}}class ht extends Ue{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new ht(d)}}function xn(f,c,d){var p;ae((null===(p=d.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),ae(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ae(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(ae(d.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function er(f){return jo.apply(this,arguments)}function jo(){return(jo=(0,C.Z)(function*(f){const c=sn(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function ri(f,c,d){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,C.Z)(function*(f,c,d){const p=sn(f),_={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&xn(p,_,d),yield Cc(p,_,"getOobCode",wg)})).apply(this,arguments)}function Og(f,c,d){return Js.apply(this,arguments)}function Js(){return Js=(0,C.Z)(function*(f,c,d){yield Qd((0,Z.m9)(f),{oobCode:c,newPassword:d}).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&er(f),_});return function(_){return p.apply(this,arguments)}}())}),Js.apply(this,arguments)}function v0(f,c){return hh.apply(this,arguments)}function hh(){return hh=(0,C.Z)(function*(f,c){yield function vg(f,c){return Ig.apply(this,arguments)}((0,Z.m9)(f),{oobCode:c})}),hh.apply(this,arguments)}function an(f,c){return ye.apply(this,arguments)}function ye(){return(ye=(0,C.Z)(function*(f,c){const d=(0,Z.m9)(f),p=yield Qd(d,{oobCode:c}),_=p.requestType;switch(ae(_,d,"internal-error"),_){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(p.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(p.mfaInfo,d,"internal-error");default:ae(p.email,d,"internal-error")}let E=null;return p.mfaInfo&&(E=Ue._fromServerResponse(sn(d),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:_}})).apply(this,arguments)}function Qe(f,c){return zt.apply(this,arguments)}function zt(){return(zt=(0,C.Z)(function*(f,c){const{data:d}=yield an((0,Z.m9)(f),c);return d.email})).apply(this,arguments)}function ki(f,c,d){return vs.apply(this,arguments)}function vs(){return(vs=(0,C.Z)(function*(f,c,d){const p=sn(f),R=yield Cc(p,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rh).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&er(f),se}),z=yield ti._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(z.user),z})).apply(this,arguments)}function fr(f,c,d){return Pc((0,Z.m9)(f),Ni.credential(c,d)).catch(function(){var p=(0,C.Z)(function*(_){throw"auth/password-does-not-meet-requirements"===_.code&&er(f),_});return function(_){return p.apply(this,arguments)}}())}function Xs(f,c,d){return un.apply(this,arguments)}function un(){return(un=(0,C.Z)(function*(f,c,d){const p=sn(f),_={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,z){ae(z.handleCodeInApp,p,"argument-error"),z&&xn(p,R,z)})(_,d),yield Cc(p,_,"getOobCode",d0)})).apply(this,arguments)}function $o(f,c){const d=su.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function ea(f,c,d){return He.apply(this,arguments)}function He(){return(He=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f),_=Ni.credentialWithLink(c,d||gn());return ae(_._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Pc(p,_)})).apply(this,arguments)}function Rc(){return(Rc=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:createAuthUri",j(f,c))})).apply(this,arguments)}function ta(f,c){return cn.apply(this,arguments)}function cn(){return cn=(0,C.Z)(function*(f,c){const p={identifier:c,continueUri:Cn()?gn():"http://localhost"},{signinMethods:_}=yield function du(f,c){return Rc.apply(this,arguments)}((0,Z.m9)(f),p);return _||[]}),cn.apply(this,arguments)}function hu(f,c){return zo.apply(this,arguments)}function zo(){return zo=(0,C.Z)(function*(f,c){const d=(0,Z.m9)(f),_={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&xn(d.auth,_,c);const{email:E}=yield function Xd(f,c){return nu.apply(this,arguments)}(d.auth,_);E!==f.email&&(yield f.reload())}),zo.apply(this,arguments)}function ao(f,c,d){return Is.apply(this,arguments)}function Is(){return Is=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};d&&xn(p.auth,E,d);const{email:R}=yield function lA(f,c){return Cg.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),Is.apply(this,arguments)}function uo(){return(uo=(0,C.Z)(function*(f,c){return te(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function To(f,c){return Es.apply(this,arguments)}function Es(){return Es=(0,C.Z)(function*(f,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const p=(0,Z.m9)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},R=yield rn(p,function Ng(f,c){return uo.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const z=p.providerData.find(({providerId:se})=>"password"===se);z&&(z.displayName=p.displayName,z.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),Es.apply(this,arguments)}function fu(f,c){return I0((0,Z.m9)(f),c,null)}function lt(f,c){return I0((0,Z.m9)(f),null,c)}function I0(f,c,d){return pu.apply(this,arguments)}function pu(){return pu=(0,C.Z)(function*(f,c,d){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),d&&(E.password=d);const R=yield rn(f,function ct(f,c){return tu.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),pu.apply(this,arguments)}class Cr{constructor(c,d,p={}){this.isNewUser=c,this.providerId=d,this.profile=p}}class gu extends Cr{constructor(c,d,p,_){super(c,d,p),this.username=_}}class na extends Cr{constructor(c,d){super(c,"facebook.com",d)}}class mu extends gu{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class tr extends Cr{constructor(c,d){super(c,"google.com",d)}}class pA extends gu{constructor(c,d,p){super(c,"twitter.com",d,p)}}function Nr(f){const{user:c,_tokenResponse:d}=f;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function kg(f){var c,d;if(!f)return null;const{providerId:p}=f,_=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(d=null===(c=bn(f.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(R)return new Cr(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new na(E,_);case"github.com":return new mu(E,_);case"google.com":return new tr(E,_);case"twitter.com":return new pA(E,_,f.screenName||null);case"custom":case"anonymous":return new Cr(E,null);default:return new Cr(E,p,_)}}(d)}class oa{constructor(c,d,p){this.type=c,this.credential=d,this.user=p}static _fromIdtoken(c,d){return new oa("enroll",c,d)}static _fromMfaPendingCredential(c){return new oa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,p;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return oa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return oa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Lg{constructor(c,d,p){this.session=c,this.hints=d,this.signInResolver=p}static _fromError(c,d){const p=sn(c),_=d.customData._serverResponse,E=(_.mfaInfo||[]).map(z=>Ue._fromServerResponse(p,z));ae(_.mfaPendingCredential,p,"internal-error");const R=oa._fromMfaPendingCredential(_.mfaPendingCredential);return new Lg(R,E,function(){var z=(0,C.Z)(function*(se){const De=yield se._process(p,R);delete _.mfaInfo,delete _.mfaPendingCredential;const ke=Object.assign(Object.assign({},_),{idToken:De.idToken,refreshToken:De.refreshToken});switch(d.operationType){case"signIn":const st=yield ti._fromIdTokenResponse(p,d.operationType,ke);return yield p._updateCurrentUser(st.user),st;case"reauthenticate":return ae(d.user,p,"internal-error"),ti._forOperation(d.user,d.operationType,ke);default:at(p,"internal-error")}});return function(se){return z.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,C.Z)(function*(){return d.signInResolver(c)})()}}function vA(f,c){var d;const p=(0,Z.m9)(f),_=c;return ae(c.customData.operationType,p,"argument-error"),ae(null===(d=_.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,p,"argument-error"),Lg._fromError(p,_)}class Ug{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(p=>Ue._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Ug(c)}getSession(){var c=this;return(0,C.Z)(function*(){return oa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var p=this;return(0,C.Z)(function*(){const _=c,E=yield p.getSession(),R=yield rn(p.user,_._process(p.user.auth,E,d));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var d=this;return(0,C.Z)(function*(){const p="string"==typeof c?c:c.uid,_=yield d.user.getIdToken();try{const E=yield rn(d.user,function CA(f,c){return te(f,"POST","/v2/accounts/mfaEnrollment:withdraw",j(f,c))}(d.user.auth,{idToken:_,mfaEnrollmentId:p}));d.enrolledFactors=d.enrolledFactors.filter(({uid:R})=>R!==p),yield d.user._updateTokensIfNecessary(E),yield d.user.reload()}catch(E){throw E}})()}}const Bg=new WeakMap;function jg(f){const c=(0,Z.m9)(f);return Bg.has(c)||Bg.set(c,Ug._fromUser(c)),Bg.get(c)}const _u="__sak";class E0{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(_u,"1"),this.storage.removeItem(_u),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const w0=(()=>{class f extends E0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,p)=>this.onStorageEvent(d,p),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bA(){const f=(0,Z.z$)();return Oe(f)||Ee(f)}()&&function Se(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=on(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const p of Object.keys(this.listeners)){const _=this.storage.getItem(p),E=this.localCache[p];_!==E&&d(p,E,_)}}onStorageEvent(d,p=!1){if(!d.key)return void this.forAllChangedKeys((z,se,De)=>{this.notifyListeners(z,De)});const _=d.key;if(p?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const z=this.storage.getItem(_);if(d.newValue!==z)null!==d.newValue?this.storage.setItem(_,d.newValue):this.storage.removeItem(_);else if(this.localCache[_]===d.newValue&&!p)return}const E=()=>{const z=this.storage.getItem(_);!p&&this.localCache[_]===z||this.notifyListeners(_,z)},R=this.storage.getItem(_);!function G(){return(0,Z.w1)()&&10===document.documentMode}()||R===d.newValue||d.newValue===d.oldValue?E():setTimeout(E,10)}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,p,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:p,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,p){var _=()=>super._set,E=this;return(0,C.Z)(function*(){yield _().call(E,d,p),E.localCache[d]=JSON.stringify(p)})()}_get(d){var p=()=>super._get,_=this;return(0,C.Z)(function*(){const E=yield p().call(_,d);return _.localCache[d]=JSON.stringify(E),E})()}_remove(d){var p=()=>super._remove,_=this;return(0,C.Z)(function*(){yield p().call(_,d),delete _.localCache[d]})()}}return f.type="LOCAL",f})(),$n=(()=>{class f extends E0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,p){}_removeListener(d,p){}}return f.type="SESSION",f})();let yi=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const p=this.receivers.find(E=>E.isListeningto(d));if(p)return p;const _=new f(d);return this.receivers.push(_),_}isListeningto(d){return this.eventTarget===d}handleEvent(d){var p=this;return(0,C.Z)(function*(){const _=d,{eventId:E,eventType:R,data:z}=_.data,se=p.handlersMap[R];if(!se?.size)return;_.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const De=Array.from(se).map(function(){var st=(0,C.Z)(function*(Vr){return Vr(_.origin,z)});return function(Vr){return st.apply(this,arguments)}}()),ke=yield function Oc(f){return Promise.all(f.map(function(){var c=(0,C.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(p){return{fulfilled:!1,reason:p}}});return function(d){return c.apply(this,arguments)}}()))}(De);_.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:ke})})()}_subscribe(d,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(p)}_unsubscribe(d,p){this.handlersMap[d]&&p&&this.handlersMap[d].delete(p),(!p||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function sa(f="",c=10){let d="";for(let p=0;p<c;p++)d+=Math.floor(10*Math.random());return f+d}class $g{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,p=50){var _=this;return(0,C.Z)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,z;return new Promise((se,De)=>{const ke=sa("",20);E.port1.start();const st=setTimeout(()=>{De(new Error("unsupported_event"))},p);z={messageChannel:E,onMessage(Vr){const Li=Vr;if(Li.data.eventId===ke)switch(Li.data.status){case"ack":clearTimeout(st),R=setTimeout(()=>{De(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),se(Li.data.response);break;default:clearTimeout(st),clearTimeout(R),De(new Error("invalid_response"))}}},_.handlers.add(z),E.port1.addEventListener("message",z.onMessage),_.target.postMessage({eventType:c,eventId:ke,data:d},[E.port2])}).finally(()=>{z&&_.removeMessageHandler(z)})})()}}function An(){return window}function yu(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function vu(){return(vu=(0,C.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gh="firebaseLocalStorageDb",bs="firebaseLocalStorage",aa="fbase_key";class co{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Iu(f,c){return f.transaction([bs],c?"readwrite":"readonly").objectStore(bs)}function Wg(){const f=indexedDB.open(gh,1);return new Promise((c,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(bs,{keyPath:aa})}catch(_){d(_)}}),f.addEventListener("success",(0,C.Z)(function*(){const p=f.result;p.objectStoreNames.contains(bs)?c(p):(p.close(),yield function DA(){const f=indexedDB.deleteDatabase(gh);return new co(f).toPromise()}(),c(yield Wg()))}))})}function C0(f,c,d){return mh.apply(this,arguments)}function mh(){return(mh=(0,C.Z)(function*(f,c,d){const p=Iu(f,!0).put({[aa]:c,value:d});return new co(p).toPromise()})).apply(this,arguments)}function Zg(){return(Zg=(0,C.Z)(function*(f,c){const d=Iu(f,!1).get(c),p=yield new co(d).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function _h(f,c){const d=Iu(f,!0).delete(c);return new co(d).toPromise()}const D0=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,C.Z)(function*(){return d.db||(d.db=yield Wg()),d.db})()}_withRetries(d){var p=this;return(0,C.Z)(function*(){let _=0;for(;;)try{const E=yield p._openDb();return yield d(E)}catch(E){if(_++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,C.Z)(function*(){return yu()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,C.Z)(function*(){d.receiver=yi._getInstance(function qg(){return yu()?self:null}()),d.receiver._subscribe("keyChanged",function(){var p=(0,C.Z)(function*(_,E){return{keyProcessed:(yield d._poll()).includes(E.key)}});return function(_,E){return p.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var p=(0,C.Z)(function*(_,E){return["keyChanged"]});return function(_,E){return p.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,C.Z)(function*(){var p,_;if(d.activeServiceWorker=yield function Hg(){return vu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new $g(d.activeServiceWorker);const E=yield d.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(_=E[0])&&void 0!==_&&_.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var p=this;return(0,C.Z)(function*(){if(p.sender&&p.activeServiceWorker&&function ph(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:d},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Wg();return yield C0(d,_u,"1"),yield _h(d,_u),!0}catch{}return!1})()}_withPendingWrite(d){var p=this;return(0,C.Z)(function*(){p.pendingWrites++;try{yield d()}finally{p.pendingWrites--}})()}_set(d,p){var _=this;return(0,C.Z)(function*(){return _._withPendingWrite((0,C.Z)(function*(){return yield _._withRetries(E=>C0(E,d,p)),_.localCache[d]=p,_.notifyServiceWorker(d)}))})()}_get(d){var p=this;return(0,C.Z)(function*(){const _=yield p._withRetries(E=>function b0(f,c){return Zg.apply(this,arguments)}(E,d));return p.localCache[d]=_,_})()}_remove(d){var p=this;return(0,C.Z)(function*(){return p._withPendingWrite((0,C.Z)(function*(){return yield p._withRetries(_=>_h(_,d)),delete p.localCache[d],p.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,C.Z)(function*(){const p=yield d._withRetries(R=>{const z=Iu(R,!1).getAll();return new co(z).toPromise()});if(!p)return[];if(0!==d.pendingWrites)return[];const _=[],E=new Set;if(0!==p.length)for(const{fbase_key:R,value:z}of p)E.add(R),JSON.stringify(d.localCache[R])!==JSON.stringify(z)&&(d.notifyListeners(R,z),_.push(R));for(const R of Object.keys(d.localCache))d.localCache[R]&&!E.has(R)&&(d.notifyListeners(R,null),_.push(R));return _})()}notifyListeners(d,p){this.localCache[d]=p;const _=this.listeners[d];if(_)for(const E of Array.from(_))E(p)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,C.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(p)}_removeListener(d,p){this.listeners[d]&&(this.listeners[d].delete(p),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Nc=1e12;class P0{constructor(c){this.auth=c,this.counter=Nc,this._widgets=new Map}render(c,d){const p=this.counter;return this._widgets.set(p,new Jg(c,this.auth.name,d||{})),this.counter++,p}reset(c){var d;const p=c||Nc;null===(d=this._widgets.get(p))||void 0===d||d.delete(),this._widgets.delete(p)}getResponse(c){var d;return(null===(d=this._widgets.get(c||Nc))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,C.Z)(function*(){var p;return null===(p=d._widgets.get(c||Nc))||void 0===p||p.execute(),""})()}}class Jg{constructor(c,d,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const _="string"==typeof c?document.getElementById(c):c;ae(_,"argument-error",{appName:d}),this.container=_,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function x0(f){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kc=u0("rcb"),M0=new Wr(3e4,6e4);class SA{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=An().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return ae(function R0(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Un(An().grecaptcha)?Promise.resolve(An().grecaptcha):new Promise((p,_)=>{const E=An().setTimeout(()=>{_(Pt(c,"network-request-failed"))},M0.get());An()[kc]=()=>{An().clearTimeout(E),delete An()[kc];const z=An().grecaptcha;if(!z||!Un(z))return void _(Pt(c,"internal-error"));const se=z.render;z.render=(De,ke)=>{const st=se(De,ke);return this.counter++,st},this.hostLanguage=d,p(z)},fg(`${function aA(){return Oi.recaptchaV2Script}()}?${(0,Z.xO)({onload:kc,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(E),_(Pt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=An().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ii{load(c){return(0,C.Z)(function*(){return new P0(c)})()}clearedOneInstance(){}}const vh="recaptcha",O0={theme:"light",type:"image"};class N0{constructor(c,d,p=Object.assign({},O0)){this.parameters=p,this.type=vh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sn(c),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const _="string"==typeof d?document.getElementById(d):d;ae(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ii:new SA,this.validateStartingState()}verify(){var c=this;return(0,C.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(d)||new Promise(E=>{const R=z=>{z&&(c.tokenChangeListeners.delete(R),E(z))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(p=>p(d)),"function"==typeof c)c(d);else if("string"==typeof c){const p=An()[c];"function"==typeof p&&p(d)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const p=document.createElement("div");d.appendChild(p),d=p}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.Z)(function*(){ae(Cn()&&!yu(),c.auth,"internal-error"),yield function Xg(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Rr(f){return Pi.apply(this,arguments)}(c.auth);ae(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vc{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Co._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function k0(f,c,d){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,C.Z)(function*(f,c,d){const p=sn(f),_=yield Mt(p,c,(0,Z.m9)(d));return new Vc(_,E=>Pc(p,E))})).apply(this,arguments)}function V0(f,c,d){return vi.apply(this,arguments)}function vi(){return(vi=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f);yield lu(!1,p,"phone");const _=yield Mt(p.auth,c,(0,Z.m9)(d));return new Vc(_,E=>Mg(p,E))})).apply(this,arguments)}function em(f,c,d){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f),_=yield Mt(p.auth,c,(0,Z.m9)(d));return new Vc(_,E=>Rg(p,E))})).apply(this,arguments)}function Mt(f,c,d){return wu.apply(this,arguments)}function wu(){return wu=(0,C.Z)(function*(f,c,d){var p;const _=yield d.verify();try{let E;if(ae("string"==typeof _,f,"argument-error"),ae(d.type===vh,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return ae("enroll"===R.type,f,"internal-error"),(yield function IA(f,c){return te(f,"POST","/v2/accounts/mfaEnrollment:start",j(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:_}})).phoneSessionInfo.sessionInfo;{ae("signin"===R.type,f,"internal-error");const z=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return ae(z,f,"missing-multi-factor-info"),(yield function AA(f,c){return te(f,"POST","/v2/accounts/mfaSignIn:start",j(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:z,phoneSignInInfo:{recaptchaToken:_}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Tg(f,c){return Uo.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:_});return R}}finally{d._reset()}}),wu.apply(this,arguments)}function Lc(f,c){return pr.apply(this,arguments)}function pr(){return(pr=(0,C.Z)(function*(f,c){yield ni((0,Z.m9)(f),c)})).apply(this,arguments)}let F0=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=sn(d)}verifyPhoneNumber(d,p){return Mt(this.auth,d,(0,Z.m9)(p))}static credential(d,p){return Co._fromVerification(d,p)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:p,temporaryProof:_}=d;return p&&_?Co._fromTokenResponse(p,_):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Ho(f,c){return c?K(c):(ae(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class qo extends Lo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return mi(c,this._buildIdpRequest())}_linkToIdToken(c,d){return mi(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return mi(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function oi(f){return xg(f.auth,new qo(f),f.bypassAuthState)}function L0(f){const{auth:c,user:d}=f;return ae(d,c,"internal-error"),Pg(d,new qo(f),f.bypassAuthState)}function U0(f){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,C.Z)(function*(f){const{auth:c,user:d}=f;return ae(d,c,"internal-error"),ni(d,new qo(f),f.bypassAuthState)})).apply(this,arguments)}class Do{constructor(c,d,p,_,E=!1){this.auth=c,this.resolver=p,this.user=_,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,C.Z)(function*(p,_){c.pendingPromise={resolve:p,reject:_};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,_){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,C.Z)(function*(){const{urlResponse:p,sessionId:_,postBody:E,tenantId:R,error:z,type:se}=c;if(z)return void d.reject(z);const De={auth:d.auth,requestUri:p,sessionId:_,tenantId:R||void 0,postBody:E||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(se)(De))}catch(ke){d.reject(ke)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return oi;case"linkViaPopup":case"linkViaRedirect":return U0;case"reauthViaPopup":case"reauthViaRedirect":return L0;default:at(this.auth,"internal-error")}}resolve(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tm=new Wr(2e3,1e4);function B0(f,c,d){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,C.Z)(function*(f,c,d){const p=sn(f);Sn(f,c,_i);const _=Ho(p,d);return new jc(p,"signInViaPopup",c,_).executeNotNull()})).apply(this,arguments)}function nm(f,c,d){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f);Sn(p.auth,c,_i);const _=Ho(p.auth,d);return new jc(p.auth,"reauthViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}function j0(f,c,d){return Be.apply(this,arguments)}function Be(){return(Be=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f);Sn(p.auth,c,_i);const _=Ho(p.auth,d);return new jc(p.auth,"linkViaPopup",c,_,p).executeNotNull()})).apply(this,arguments)}let jc=(()=>{class f extends Do{constructor(d,p,_,E,R){super(d,p,E,R),this.provider=_,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,C.Z)(function*(){const p=yield d.execute();return ae(p,d.auth,"internal-error"),p})()}onExecution(){var d=this;return(0,C.Z)(function*(){qt(1===d.filter.length,"Popup operations only handle one event");const p=sa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],p),d.authWindow.associatedEvent=p,d.resolver._originValidation(d.auth).catch(_=>{d.reject(_)}),d.resolver._isIframeWebStorageSupported(d.auth,_=>{_||d.reject(Pt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var p,_;this.pollId=null!==(_=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==_&&_.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,tm.get())};d()}}return f.currentPopupAction=null,f})();const PA="pendingRedirect",Cu=new Map;class $0 extends Do{constructor(c,d,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,C.Z)(function*(){let p=Cu.get(d.auth._key());if(!p){try{const E=(yield function z0(f,c){return $c.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;p=()=>Promise.resolve(E)}catch(_){p=()=>Promise.reject(_)}Cu.set(d.auth._key(),p)}return d.bypassAuthState||Cu.set(d.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,p=this;return(0,C.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(p,c);if("unknown"!==c.type){if(c.eventId){const _=yield p.auth._redirectUserForId(c.eventId);if(_)return p.user=_,d().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.Z)(function*(){})()}cleanUp(){}}function $c(){return($c=(0,C.Z)(function*(f,c){const d=om(c),p=im(f);if(!(yield p._isAvailable()))return!1;const _="true"===(yield p._get(d));return yield p._remove(d),_})).apply(this,arguments)}function Go(f,c){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,C.Z)(function*(f,c){return im(f)._set(om(c),"true")})).apply(this,arguments)}function H0(){Cu.clear()}function rm(f,c){Cu.set(f._key(),c)}function im(f){return K(f._redirectPersistence)}function om(f){return je(PA,f.config.apiKey,f.name)}function ne(f,c,d){return function vt(f,c,d){return br.apply(this,arguments)}(f,c,d)}function br(){return(br=(0,C.Z)(function*(f,c,d){const p=sn(f);Sn(f,c,_i),yield p._initializationPromise;const _=Ho(p,d);return yield Go(_,p),_._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function si(f,c,d){return function nr(f,c,d){return zc.apply(this,arguments)}(f,c,d)}function zc(){return(zc=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f);Sn(p.auth,c,_i),yield p.auth._initializationPromise;const _=Ho(p.auth,d);yield Go(_,p.auth);const E=yield gr(p);return _._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function bu(f,c,d){return function lo(f,c,d){return Tu.apply(this,arguments)}(f,c,d)}function Tu(){return(Tu=(0,C.Z)(function*(f,c,d){const p=(0,Z.m9)(f);Sn(p.auth,c,_i),yield p.auth._initializationPromise;const _=Ho(p.auth,d);yield lu(!1,p,c.providerId),yield Go(_,p.auth);const E=yield gr(p);return _._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function wh(f,c){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,C.Z)(function*(f,c){return yield sn(f)._initializationPromise,sm(f,c,!1)})).apply(this,arguments)}function sm(f,c){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,C.Z)(function*(f,c,d=!1){const p=sn(f),_=Ho(p,c),R=yield new $0(p,_,d).execute();return R&&!d&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function gr(f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,C.Z)(function*(f){const c=sa(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class Ts{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(d=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function cm(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return um(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var p;if(c.error&&!um(c)){const _=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";d.onError(Pt(this.auth,_))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const p=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ho(c))}saveEventToCache(c){this.cachedEventUids.add(ho(c)),this.lastProcessedEventTime=Date.now()}}function ho(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function um({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function lm(f){return bh.apply(this,arguments)}function bh(){return(bh=(0,C.Z)(function*(f,c={}){return te(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Th=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dh=/^https?/;function Du(){return(Du=(0,C.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield lm(f);for(const d of c)try{if(q0(d))return}catch{}at(f,"unauthorized-domain")})).apply(this,arguments)}function q0(f){const c=gn(),{protocol:d,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===d&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&R.hostname===p}if(!Dh.test(d))return!1;if(Th.test(f))return p===f;const _=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+_+"|"+_+")$","i").test(p)}const hm=new Wr(3e4,6e4);function qc(){const f=An().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Au=null;const gm=new Wr(5e3,15e3),Ah="__/auth/iframe",G0="emulator/auth/iframe",W0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ds(f){const c=f.config;ae(c.authDomain,f,"auth-domain-config-required");const d=c.emulator?Ji(c,G0):`https://${f.config.authDomain}/${Ah}`,p={apiKey:c.apiKey,appName:f.name,v:N.SDK_VERSION},_=Tr.get(f.config.apiHost);_&&(p.eid=_);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${d}?${(0,Z.xO)(p).slice(1)}`}function Su(){return Su=(0,C.Z)(function*(f){const c=yield function pm(f){return Au=Au||function fm(f){return new Promise((c,d)=>{var p,_,E;function R(){qc(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{qc(),d(Pt(f,"network-request-failed"))},timeout:hm.get()})}if(null!==(_=null===(p=An().gapi)||void 0===p?void 0:p.iframes)&&void 0!==_&&_.Iframe)c(gapi.iframes.getContext());else{if(null===(E=An().gapi)||void 0===E||!E.load){const z=u0("iframefcb");return An()[z]=()=>{gapi.load?R():d(Pt(f,"network-request-failed"))},fg(`${function a0(){return Oi.gapiScript}()}?onload=${z}`).catch(se=>d(se))}R()}}).catch(c=>{throw Au=null,c})}(f),Au}(f),d=An().gapi;return ae(d,f,"internal-error"),c.open({where:document.body,url:Ds(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W0,dontclear:!0},p=>new Promise(function(){var _=(0,C.Z)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const z=Pt(f,"network-request-failed"),se=An().setTimeout(()=>{R(z)},gm.get());function De(){An().clearTimeout(se),E(p)}p.ping(De).then(De,()=>{R(z)})});return function(E,R){return _.apply(this,arguments)}}()))}),Su.apply(this,arguments)}const Z0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Gc="__/auth/handler",Wc="emulator/auth/handler",Zc=encodeURIComponent("fac");function xu(f,c,d,p,_,E){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,C.Z)(function*(f,c,d,p,_,E){ae(f.config.authDomain,f,"auth-domain-config-required"),ae(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:p,v:N.SDK_VERSION,eventId:_};if(c instanceof _i){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,Z.xb)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ke,st]of Object.entries(E||{}))R[ke]=st}if(c instanceof hr){const ke=c.getScopes().filter(st=>""!==st);ke.length>0&&(R.scopes=ke.join(","))}f.tenantId&&(R.tid=f.tenantId);const z=R;for(const ke of Object.keys(z))void 0===z[ke]&&delete z[ke];const se=yield f._getAppCheckToken(),De=se?`#${Zc}=${encodeURIComponent(se)}`:"";return`${function vm({config:f}){return f.emulator?Ji(f,Wc):`https://${f.authDomain}/${Gc}`}(f)}?${(0,Z.xO)(z).slice(1)}${De}`})).apply(this,arguments)}const Sh="webStorageSupport",ca=class ua{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$n,this._completeRedirectFn=sm,this._overrideRedirectResult=rm}_openPopup(c,d,p,_){var E=this;return(0,C.Z)(function*(){var R;qt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const z=yield xu(c,d,p,gn(),_);return function Wo(f,c,d,p=500,_=600){const E=Math.max((window.screen.availHeight-_)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let z="";const se=Object.assign(Object.assign({},Z0),{width:p.toString(),height:_.toString(),top:E,left:R}),De=(0,Z.z$)().toLowerCase();d&&(z=Wn(De)?"_blank":d),Nt(De)&&(c=c||"http://localhost",se.scrollbars="yes");const ke=Object.entries(se).reduce((Vr,[Li,fo])=>`${Vr}${Li}=${fo},`,"");if(function ut(f=(0,Z.z$)()){var c;return Ee(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(De)&&"_self"!==z)return function Q0(f,c){const d=document.createElement("a");d.href=f,d.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(p)}(c||"",z),new Pu(null);const st=window.open(c||"",z,ke);ae(st,f,"popup-blocked");try{st.focus()}catch{}return new Pu(st)}(c,z,sa())})()}_openRedirect(c,d,p,_){var E=this;return(0,C.Z)(function*(){return yield E._originValidation(c),function zg(f){An().location.href=f}(yield xu(c,d,p,gn(),_)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:_,promise:E}=this.eventManagers[d];return _?Promise.resolve(_):(qt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[d]={promise:p},p.catch(()=>{delete this.eventManagers[d]}),p}initAndGetManager(c){var d=this;return(0,C.Z)(function*(){const p=yield function ln(f){return Su.apply(this,arguments)}(c),_=new Ts(c);return p.register("authEvent",E=>(ae(E?.authEvent,c,"invalid-auth-event"),{status:_.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:_},d.iframes[c._key()]=p,_})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Sh,{type:Sh},_=>{var E;const R=null===(E=_?.[0])||void 0===E?void 0:E[Sh];void 0!==R&&d(!!R),at(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function dm(f){return Du.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return on()||Oe()||Ee()}};class Y0{constructor(c){this.factorId=c}_process(c,d,p){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,p);case"signin":return this._finalizeSignIn(c,d.credential);default:return ft("unexpected MultiFactorSessionType")}}}class Im extends Y0{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Im(c)}_finalizeEnroll(c,d,p){return function EA(f,c){return te(f,"POST","/v2/accounts/mfaEnrollment:finalize",j(f,c))}(c,{idToken:d,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function A0(f,c){return te(f,"POST","/v2/accounts/mfaSignIn:finalize",j(f,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ph=(()=>{class f{constructor(){}static assertion(d){return Im._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var J0="@firebase/auth";class Mu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,C.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Yc=(0,Z.Pz)("authIdTokenMaxAge")||300;let eI=null;const wm=f=>function(){var c=(0,C.Z)(function*(d){const p=d&&(yield d.getIdTokenResult()),_=p&&((new Date).getTime()-Date.parse(p.issuedAtTime))/1e3;if(_&&_>Yc)return;const E=p?.token;eI!==E&&(eI=E,yield fetch(f,{method:E?"POST":"DELETE",headers:E?{Authorization:`Bearer ${E}`}:{}}))});return function(d){return c.apply(this,arguments)}}();function Cm(f=(0,N.getApp)()){const c=(0,N._getProvider)(f,"auth");if(c.isInitialized())return c.getImmediate();const d=function Dn(f,c){const d=(0,N._getProvider)(f,"auth");if(d.isInitialized()){const _=d.getImmediate(),E=d.getOptions();if((0,Z.vZ)(E,c??{}))return _;at(_,"already-initialized")}return d.initialize({options:c})}(f,{popupRedirectResolver:ca,persistence:[D0,w0,$n]}),p=(0,Z.Pz)("authTokenSyncURL");if(p&&p.match(/^\/[^\/].*/)){const E=wm(p);(function fh(f,c,d){(0,Z.m9)(f).beforeAuthStateChanged(c,d)})(d,E,()=>E(d.currentUser)),function Vi(f,c,d,p){(0,Z.m9)(f).onIdTokenChanged(c,d,p)}(d,R=>E(R))}const _=(0,Z.q4)("auth");return _&&_g(d,`http://${_}`),d}(function sA(f){Oi=f})({loadJS:f=>new Promise((c,d)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=_=>{const E=Pt("internal-error");E.customData=_,d(E)},p.type="text/javascript",p.charset="UTF-8",function tI(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ru(f){(0,N._registerComponent)(new en.wA("auth",(c,{options:d})=>{const p=c.getProvider("app").getImmediate(),_=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:z}=p.options;ae(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const se={apiKey:R,authDomain:z,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:it(f)},De=new oA(p,_,E,se);return function bc(f,c){const d=c?.persistence||[],p=(Array.isArray(d)?d:[d]).map(K);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(De,d),De},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,p)=>{c.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new en.wA("auth-internal",c=>{const d=sn(c.getProvider("auth").getImmediate());return new Mu(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(J0,"1.6.2",function X0(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,N.registerVersion)(J0,"1.6.2","esm2017")}("Browser")},58:(Yi,Vn,Le)=>{Le.d(Vn,{BH:()=>Gr,G6:()=>Ji,L:()=>gt,LL:()=>ee,P0:()=>tn,Pz:()=>Pt,Sg:()=>Sn,UG:()=>ft,ZB:()=>Me,ZR:()=>te,aH:()=>at,b$:()=>Cn,eu:()=>q,hl:()=>$,jU:()=>qt,m9:()=>io,ne:()=>Zr,pd:()=>Mi,q4:()=>Ln,r3:()=>Bn,ru:()=>gn,tV:()=>J,uI:()=>ae,vZ:()=>Xi,w1:()=>Si,xO:()=>to,xb:()=>Rr,z$:()=>Xe,zd:()=>xi});const Re=function(P){const T=[];let I=0;for(let w=0;w<P.length;w++){let v=P.charCodeAt(w);v<128?T[I++]=v:v<2048?(T[I++]=v>>6|192,T[I++]=63&v|128):55296==(64512&v)&&w+1<P.length&&56320==(64512&P.charCodeAt(w+1))?(v=65536+((1023&v)<<10)+(1023&P.charCodeAt(++w)),T[I++]=v>>18|240,T[I++]=v>>12&63|128,T[I++]=v>>6&63|128,T[I++]=63&v|128):(T[I++]=v>>12|224,T[I++]=v>>6&63|128,T[I++]=63&v|128)}return T},en={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,T){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let v=0;v<P.length;v+=3){const A=P[v],K=v+1<P.length,be=K?P[v+1]:0,Te=v+2<P.length,je=Te?P[v+2]:0;let Nt=(15&be)<<2|je>>6,Oe=63&je;Te||(Oe=64,K||(Nt=64)),w.push(I[A>>2],I[(3&A)<<4|be>>4],I[Nt],I[Oe])}return w.join("")},encodeString(P,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(P):this.encodeByteArray(Re(P),T)},decodeString(P,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(P):function(P){const T=[];let I=0,w=0;for(;I<P.length;){const v=P[I++];if(v<128)T[w++]=String.fromCharCode(v);else if(v>191&&v<224){const A=P[I++];T[w++]=String.fromCharCode((31&v)<<6|63&A)}else if(v>239&&v<365){const Te=((7&v)<<18|(63&P[I++])<<12|(63&P[I++])<<6|63&P[I++])-65536;T[w++]=String.fromCharCode(55296+(Te>>10)),T[w++]=String.fromCharCode(56320+(1023&Te))}else{const A=P[I++],K=P[I++];T[w++]=String.fromCharCode((15&v)<<12|(63&A)<<6|63&K)}}return T.join("")}(this.decodeStringToByteArray(P,T))},decodeStringToByteArray(P,T){this.init_();const I=T?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let v=0;v<P.length;){const A=I[P.charAt(v++)],be=v<P.length?I[P.charAt(v)]:0;++v;const je=v<P.length?I[P.charAt(v)]:64;++v;const ve=v<P.length?I[P.charAt(v)]:64;if(++v,null==A||null==be||null==je||null==ve)throw new wn;w.push(A<<2|be>>4),64!==je&&(w.push(be<<4&240|je>>2),64!==ve&&w.push(je<<6&192|ve))}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}};class wn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gt=function(P){return function(P){const T=Re(P);return en.encodeByteArray(T,!0)}(P).replace(/\./g,"")},J=function(P){try{return en.decodeString(P,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Me(P,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return T}for(const I in T)!T.hasOwnProperty(I)||!Ke(I)||(P[I]=Me(P[I],T[I]));return P}function Ke(P){return"__proto__"!==P}const Ge=()=>{try{return function Ct(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=P&&J(P[1]);return T&&JSON.parse(T)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},Ln=P=>{var T,I;return null===(I=null===(T=Ge())||void 0===T?void 0:T.emulatorHosts)||void 0===I?void 0:I[P]},tn=P=>{const T=Ln(P);if(!T)return;const I=T.lastIndexOf(":");if(I<=0||I+1===T.length)throw new Error(`Invalid host ${T} with no separate hostname and port!`);const w=parseInt(T.substring(I+1),10);return"["===T[0]?[T.substring(1,I-1),w]:[T.substring(0,I),w]},at=()=>{var P;return null===(P=Ge())||void 0===P?void 0:P.config},Pt=P=>{var T;return null===(T=Ge())||void 0===T?void 0:T[`_${P}`]};class Gr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,I)=>{this.resolve=T,this.reject=I})}wrapCallback(T){return(I,w)=>{I?this.reject(I):this.resolve(w),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(I):T(I,w))}}}function Sn(P,T){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const w=T||"demo-project",v=P.iat||0,A=P.sub||P.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const K=Object.assign({iss:`https://securetoken.google.com/${w}`,aud:w,iat:v,exp:v+3600,auth_time:v,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},P);return[gt(JSON.stringify({alg:"none",type:"JWT"})),gt(JSON.stringify(K)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function ft(){var P;const T=null===(P=Ge())||void 0===P?void 0:P.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function qt(){return"object"==typeof self&&self.self===self}function gn(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function Cn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Si(){const P=Xe();return P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0}function Ji(){return!ft()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){try{return"object"==typeof indexedDB}catch{return!1}}function q(){return new Promise((P,T)=>{try{let I=!0;const w="validate-browser-context-for-indexeddb-analytics-module",v=self.indexedDB.open(w);v.onsuccess=()=>{v.result.close(),I||self.indexedDB.deleteDatabase(w),P(!0)},v.onupgradeneeded=()=>{I=!1},v.onerror=()=>{var A;T((null===(A=v.error)||void 0===A?void 0:A.message)||"")}}catch(I){T(I)}})}class te extends Error{constructor(T,I,w){super(I),this.code=T,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ee.prototype.create)}}class ee{constructor(T,I,w){this.service=T,this.serviceName=I,this.errors=w}create(T,...I){const w=I[0]||{},v=`${this.service}/${T}`,A=this.errors[T],K=A?function ge(P,T){return P.replace(ot,(I,w)=>{const v=T[w];return null!=v?String(v):`<${w}?>`})}(A,w):"Error";return new te(v,`${this.serviceName}: ${K} (${v}).`,w)}}const ot=/\{\$([^}]+)}/g;function Bn(P,T){return Object.prototype.hasOwnProperty.call(P,T)}function Rr(P){for(const T in P)if(Object.prototype.hasOwnProperty.call(P,T))return!1;return!0}function Xi(P,T){if(P===T)return!0;const I=Object.keys(P),w=Object.keys(T);for(const v of I){if(!w.includes(v))return!1;const A=P[v],K=T[v];if(_t(A)&&_t(K)){if(!Xi(A,K))return!1}else if(A!==K)return!1}for(const v of w)if(!I.includes(v))return!1;return!0}function _t(P){return null!==P&&"object"==typeof P}function to(P){const T=[];for(const[I,w]of Object.entries(P))Array.isArray(w)?w.forEach(v=>{T.push(encodeURIComponent(I)+"="+encodeURIComponent(v))}):T.push(encodeURIComponent(I)+"="+encodeURIComponent(w));return T.length?"&"+T.join("&"):""}function xi(P){const T={};return P.replace(/^\?/,"").split("&").forEach(w=>{if(w){const[v,A]=w.split("=");T[decodeURIComponent(v)]=decodeURIComponent(A)}}),T}function Mi(P){const T=P.indexOf("?");if(!T)return"";const I=P.indexOf("#",T);return P.substring(T,I>0?I:void 0)}function Zr(P,T){const I=new Kr(P,T);return I.subscribe.bind(I)}class Kr{constructor(T,I){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=I,this.task.then(()=>{T(this)}).catch(w=>{this.error(w)})}next(T){this.forEachObserver(I=>{I.next(T)})}error(T){this.forEachObserver(I=>{I.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,I,w){let v;if(void 0===T&&void 0===I&&void 0===w)throw new Error("Missing Observer.");v=function Jn(P,T){if("object"!=typeof P||null===P)return!1;for(const I of T)if(I in P&&"function"==typeof P[I])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:I,complete:w},void 0===v.next&&(v.next=xt),void 0===v.error&&(v.error=xt),void 0===v.complete&&(v.complete=xt);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch{}}),this.observers.push(v),A}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let I=0;I<this.observers.length;I++)this.sendOne(I,T)}sendOne(T,I){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{I(this.observers[T])}catch(w){typeof console<"u"&&console.error&&console.error(w)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xt(){}function io(P){return P&&P._delegate?P._delegate:P}},615:(Yi,Vn,Le)=>{function C(t){return"function"==typeof t}function Z(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const N=Z(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Re(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class wt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(o){e=o instanceof N?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{jt(o)}catch(s){e=e??[],s instanceof N?e=[...e,...s.errors]:e.push(s)}}if(e)throw new N(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jt(e);else{if(e instanceof wt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Re(n,e)}remove(e){const{_finalizers:n}=this;n&&Re(n,e),e instanceof wt&&e._removeParent(this)}}wt.EMPTY=(()=>{const t=new wt;return t.closed=!0,t})();const en=wt.EMPTY;function wn(t){return t instanceof wt||t&&"closed"in t&&C(t.remove)&&C(t.add)&&C(t.unsubscribe)}function jt(t){C(t)?t():t.unsubscribe()}const gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(t,e,...n){const{delegate:r}=J;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=J;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function le(t){J.setTimeout(()=>{const{onUnhandledError:e}=gt;if(!e)throw t;e(t)})}function Me(){}const Ke=dt("C",void 0,void 0);function dt(t,e,n){return{kind:t,value:e,error:n}}let qe=null;function Ge(t){if(gt.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=qe;if(qe=null,n)throw r}}else t()}class tn extends wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wn(e)&&e.add(this)):this.destination=qt}static create(e,n,r){return new Sn(e,n,r)}next(e){this.isStopped?ft(function Fn(t){return dt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ft(function Ct(t){return dt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ft(Ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Pt(t,e){return at.call(t,e)}class Gr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Xe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Xe(r)}else Xe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Xe(n)}}}class Sn extends tn{constructor(e,n,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Pt(e.next,o),error:e.error&&Pt(e.error,o),complete:e.complete&&Pt(e.complete,o)}):i=e}this.destination=new Gr(i)}}function Xe(t){gt.useDeprecatedSynchronousErrorHandling?function Ln(t){gt.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=t)}(t):le(t)}function ft(t,e){const{onStoppedNotification:n}=gt;n&&J.setTimeout(()=>n(t,e))}const qt={closed:!0,next:Me,error:function ae(t){throw t},complete:Me},gn="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cn(t){return t}function Si(t){return 0===t.length?Cn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function $(t){return t&&t instanceof tn||function Ji(t){return t&&C(t.next)&&C(t.error)&&C(t.complete)}(t)&&wn(t)}(n)?n:new Sn(n,r,i);return Ge(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Wr(r))((i,o)=>{const s=new Sn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[gn](){return this}pipe(...n){return Si(n)(this)}toPromise(n){return new(n=Wr(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Wr(t){var e;return null!==(e=t??gt.Promise)&&void 0!==e?e:Promise}const q=Z(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let W=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new j(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new q}next(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?en:(this.currentObservers=null,o.push(n),new wt(()=>{this.currentObservers=null,Re(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new j(e,n),t})();class j extends W{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:en}}function te(t){return C(t?.lift)}function ee(t){return e=>{if(te(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(t,e,n,r,i){return new ot(t,e,n,r,i)}class ot extends tn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function he(t,e){return ee((n,r)=>{let i=0;n.subscribe(ge(r,o=>{r.next(t.call(e,o,i++))}))})}var Fe=Le(582);const mt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Zt(t){return C(t?.then)}function kt(t){return C(t[gn])}function nn(t){return Symbol.asyncIterator&&C(t?.[Symbol.asyncIterator])}function Un(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yn=function Bn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rr(t){return C(t?.[Yn])}function Pi(t){return(0,Fe.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Fe.qq)(n.read());if(i)return yield(0,Fe.qq)(void 0);yield yield(0,Fe.qq)(r)}}finally{n.releaseLock()}})}function Xi(t){return C(t?.getReader)}function _t(t){if(t instanceof We)return t;if(null!=t){if(kt(t))return function eo(t){return new We(e=>{const n=t[gn]();if(C(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(mt(t))return function to(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Zt(t))return function xi(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,le)})}(t);if(nn(t))return cr(t);if(Rr(t))return function Mi(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Xi(t))return function Zr(t){return cr(Pi(t))}(t)}throw Un(t)}function cr(t){return new We(e=>{(function Kr(t,e){var n,r,i,o;return(0,Fe.mG)(this,void 0,void 0,function*(){try{for(n=(0,Fe.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Qr(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function xt(t,e,n=1/0){return C(e)?xt((r,i)=>he((o,s)=>e(r,o,i,s))(_t(t(r,i))),n):("number"==typeof e&&(n=e),ee((r,i)=>function Jn(t,e,n,r,i,o,s,a){const u=[];let l=0,h=0,g=!1;const m=()=>{g&&!u.length&&!l&&e.complete()},y=D=>l<r?b(D):u.push(D),b=D=>{o&&e.next(D),l++;let x=!1;_t(n(D,h++)).subscribe(ge(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){const L=u.shift();s?Qr(e,s,()=>b(L)):b(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(ge(e,y,()=>{g=!0,m()})),()=>{a?.()}}(r,i,t,n)))}function Yr(t=1/0){return xt(Cn,t)}const bn=new We(t=>t.complete());function no(t){return t[t.length-1]}function ro(t){return C(no(t))?t.pop():void 0}function Ri(t){return function Tn(t){return t&&C(t.schedule)}(no(t))?t.pop():void 0}function Pn(t,e=0){return ee((n,r)=>{n.subscribe(ge(r,i=>Qr(r,t,()=>r.next(i),e),()=>Qr(r,t,()=>r.complete(),e),i=>Qr(r,t,()=>r.error(i),e)))})}function lr(t,e=0){return ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function io(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Qr(n,e,()=>{const r=t[Symbol.asyncIterator]();Qr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function I(t,e){return e?function T(t,e){if(null!=t){if(kt(t))return function Jr(t,e){return _t(t).pipe(lr(e),Pn(e))}(t,e);if(mt(t))return function Fo(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Zt(t))return function Qs(t,e){return _t(t).pipe(lr(e),Pn(e))}(t,e);if(nn(t))return io(t,e);if(Rr(t))return function ps(t,e){return new We(n=>{let r;return Qr(n,e,()=>{r=t[Yn](),Qr(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(t,e);if(Xi(t))return function P(t,e){return io(Pi(t),e)}(t,e)}throw Un(t)}(t,e):_t(t)}function w(...t){const e=Ri(t),n=function jn(t,e){return"number"==typeof no(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?_t(r[0]):Yr(n)(I(r,e)):bn}class v extends W{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function A(...t){return I(t,Ri(t))}function K(t={}){const{connector:e=(()=>new W),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,g=!1;const m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=g=!1},b=()=>{const D=s;y(),D?.unsubscribe()};return ee((D,x)=>{l++,!g&&!h&&m();const L=u=u??e();x.add(()=>{l--,0===l&&!g&&!h&&(a=be(b,i))}),L.subscribe(x),!s&&l>0&&(s=new Sn({next:k=>L.next(k),error:k=>{g=!0,m(),a=be(y,n,k),L.error(k)},complete:()=>{h=!0,m(),a=be(y,r),L.complete()}}),_t(D).subscribe(s))})(o)}}function be(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Sn({next:()=>{r.unsubscribe(),t()}});return _t(e(...n)).subscribe(r)}function Te(t,e){return ee((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(ge(r,u=>{i?.unsubscribe();let l=0;const h=o++;_t(t(u,h)).subscribe(i=ge(r,g=>r.next(e?e(u,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function je(t,e=Cn){return t=t??yt,ee((n,r)=>{let i,o=!0;n.subscribe(ge(r,s=>{const a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function yt(t,e){return t===e}function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function Nt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Wn(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const gs=ve({__forward_ref__:ve});function F(t){return t.__forward_ref__=F,t.toString=function(){return Oe(this())},t}function M(t){return re(t)?t():t}function re(t){return"function"==typeof t&&t.hasOwnProperty(gs)&&t.__forward_ref__===F}function Ee(t){return t&&!!t.\u0275providers}const ut="https://g.co/ng/security#xss";class G extends Error{constructor(e,n){super(function on(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Se(t){return"string"==typeof t?t:null==t?"":String(t)}function Zd(t,e){throw new G(-201,!1)}function ei(t,e){null==t&&function $e(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function bc(t){return Kd(t,Tc)||Kd(t,Qd)}function Kd(t,e){return t.hasOwnProperty(e)?t[e]:null}function eu(t){return t&&(t.hasOwnProperty(Lo)||t.hasOwnProperty(Yd))?t[Lo]:null}const Tc=ve({\u0275prov:ve}),Lo=ve({\u0275inj:ve}),Qd=ve({ngInjectableDef:ve}),Yd=ve({ngInjectorDef:ve});var ct=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ct||{});let tu;function dr(t){const e=tu;return tu=t,e}function vg(t,e,n){const r=bc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ct.Optional?null:void 0!==e?e:void Zd(Oe(t))}const $t=globalThis;class de{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ms={},_s="__NG_DI_FLAG__",mi="ngTempTokenPath",h0=/\n/gm,Tg="__source";let Uo;function so(t){const e=Uo;return Uo=t,e}function p0(t,e=ct.Default){if(void 0===Uo)throw new G(-203,!1);return null===Uo?vg(t,void 0,e):Uo.get(t,e&ct.Optional?null:void 0,e)}function ce(t,e=ct.Default){return(function yg(){return tu}()||p0)(M(t),e)}function we(t,e=ct.Default){return ce(t,Ys(e))}function Ys(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Co(t){const e=[];for(let n=0;n<t.length;n++){const r=M(t[n]);if(Array.isArray(r)){if(0===r.length)throw new G(900,!1);let i,o=ct.Default;for(let s=0;s<r.length;s++){const a=r[s],u=g0(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function ou(t,e){return t[_s]=e,t.prototype[_s]=e,t}function g0(t){return t[_s]}function Ni(t){return{toString:t}.toString()}var _i=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_i||{}),hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(hr||{});const Or={},bt=[],Dc=ve({\u0275cmp:ve}),th=ve({\u0275dir:ve}),nh=ve({\u0275pipe:ve}),ys=ve({\u0275mod:ve}),bo=ve({\u0275fac:ve}),Bo=ve({__NG_ELEMENT_ID__:ve}),Ag=ve({__NG_ENV_ID__:ve});function rh(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function au(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];ih(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ti(t){return 3===t||4===t||6===t}function ih(t){return 64===t.charCodeAt(0)}function uu(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ac(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ac(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const cu="ng-template";function Sg(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if("string"==typeof o&&i){const s=t[r++];if(n&&"class"===o&&-1!==rh(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function oh(t){return 4===t.type&&t.value!==cu}function m0(t,e,n){return e===(4!==t.type||n?t.value:cu)}function sh(t,e,n){let r=4;const i=t.attrs||[],o=function Pg(t){for(let e=0;e<t.length;e++)if(ti(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!m0(t,u,n)||""===u&&1===e.length){if(ni(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Sg(t.attrs,l,n)){if(ni(r))return!1;s=!0}continue}const g=ah(8&r?"class":u,i,oh(t),n);if(-1===g){if(ni(r))return!1;s=!0;continue}if(""!==l){let m;m=g>o?"":i[g+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==rh(y,l,0)||2&r&&l!==m){if(ni(r))return!1;s=!0}}}}else{if(!s&&!ni(r)&&!ni(u))return!1;if(s&&ni(u))continue;s=!1,r=u|1&r}}return ni(r)||s}function ni(t){return 0==(1&t)}function ah(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function ch(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function lu(t,e,n=!1){for(let r=0;r<e.length;r++)if(sh(t,e[r],n))return!0;return!1}function Sc(t,e){return t?":not("+e.trim()+")":e}function Pc(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ni(s)&&(e+=Sc(o,i),i=""),r=s,o=o||!ni(r);n++}return""!==i&&(e+=Sc(o,i)),e}function mn(t){return Ni(()=>{const e=Mc(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_i.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||hr.Emulated,styles:t.styles||bt,_:null,schemas:t.schemas||null,tView:null,id:""};Og(n);const r=t.dependencies;return n.directiveDefs=Js(r,!1),n.pipeDefs=Js(r,!0),n.id=function hh(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function dh(t){return ht(t)||xn(t)}function _0(t){return null!==t}function _n(t){return Ni(()=>({type:t.type,bootstrap:t.bootstrap||bt,declarations:t.declarations||bt,imports:t.imports||bt,exports:t.exports||bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function xc(t,e){if(null==t)return Or;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Ue(t){return Ni(()=>{const e=Mc(t);return Og(e),e})}function Xn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ht(t){return t[Dc]||null}function xn(t){return t[th]||null}function er(t){return t[nh]||null}function ri(t,e){const n=t[ys]||null;if(!n&&!0===e)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return n}function Mc(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Or,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||bt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xc(t.inputs,e),outputs:xc(t.outputs)}}function Og(t){t.features?.forEach(e=>e(t))}function Js(t,e){if(!t)return null;const n=e?er:dh;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(_0)}const an=0,ye=1,Qe=2,zt=3,ki=4,vs=5,fr=6,Xs=7,un=8,$o=9,ea=10,He=11,du=12,Rc=13,ta=14,cn=15,hu=16,zo=17,ao=18,Is=19,Ng=20,uo=21,To=22,Es=23,fu=24,lt=25,pu=1,kg=2,Cr=7,na=9,tr=11;function Nr(t){return Array.isArray(t)&&"object"==typeof t[pu]}function kr(t){return Array.isArray(t)&&!0===t[pu]}function Vg(t){return 0!=(4&t.flags)}function ra(t){return t.componentOffset>-1}function ia(t){return 1==(1&t.flags)}function Vi(t){return!!t.template}function fh(t){return 0!=(512&t[Qe])}function ws(t,e){return t.hasOwnProperty(bo)?t[bo]:null}let $n=null,Oc=!1;function yi(t){const e=$n;return $n=t,e}const sa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function An(t){if(!aa(t)||t.dirty){if(!t.producerMustRecompute(t)&&!qg(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Hg(t){t.dirty=!0,function zg(t){if(void 0===t.liveConsumerNode)return;const e=Oc;Oc=!0;try{for(const n of t.liveConsumerNode)n.dirty||Hg(n)}finally{Oc=e}}(t),t.consumerMarkedDirty?.(t)}function vu(t){return t&&(t.nextProducerIndex=0),yi(t)}function ph(t,e){if(yi(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(aa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)bs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function qg(t){co(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(An(n),r!==n.version))return!0}return!1}function gh(t){if(co(t),aa(t))for(let e=0;e<t.producerNode.length;e++)bs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function bs(t,e){if(function Iu(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),co(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)bs(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];co(i),i.producerIndexOfThis[r]=e}}function aa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function co(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let _h=null;const kc=()=>{},M0=(()=>({...sa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:kc}))();class R0{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ii(){return vh}function vh(t){return t.type.prototype.ngOnChanges&&(t.setInput=N0),O0}function O0(){const t=Vc(this),e=t?.current;if(e){const n=t.previous;if(n===Or)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function N0(t,e,n,r){const i=this.declaredInputs[n],o=Vc(t)||function k0(t,e){return t[Xg]=e}(t,{previous:Or,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new R0(u&&u.currentValue,e,a===Or),t[r]=e}ii.ngInherit=!0;const Xg="__ngSimpleChanges__";function Vc(t){return t[Xg]||null}const vi=function(t,e,n){},em="svg";function Mt(t){for(;Array.isArray(t);)t=t[an];return t}function Lc(t,e){return Mt(e[t])}function pr(t,e){return Mt(e[t.index])}function Ho(t,e){return t.data[e]}function qo(t,e){return t[e]}function oi(t,e){const n=e[t];return Nr(n)?n:n[an]}function Do(t,e){return null==e?null:t[e]}function tm(t){t[zo]=0}function B0(t){1024&t[Qe]||(t[Qe]|=1024,nm(t,1))}function Uc(t){1024&t[Qe]&&(t[Qe]&=-1025,nm(t,-1))}function nm(t,e){let n=t[zt];if(null===n)return;n[vs]+=e;let r=n;for(n=n[zt];null!==n&&(1===e&&1===r[vs]||-1===e&&0===r[vs]);)n[vs]+=e,r=n,n=n[zt]}const Be={lFrame:Au(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $c(){return Be.bindingsEnabled}function ne(){return Be.lFrame.lView}function vt(){return Be.lFrame.tView}function br(t){return Be.lFrame.contextLView=t,t[un]}function si(t){return Be.lFrame.contextLView=null,t}function nr(){let t=zc();for(;null!==t&&64===t.type;)t=t.parent;return t}function zc(){return Be.lFrame.currentTNode}function lo(t,e){const n=Be.lFrame;n.currentTNode=t,n.isParent=e}function Tu(){return Be.lFrame.isParent}function wh(){Be.lFrame.isParent=!1}function gr(){const t=Be.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ts(){return Be.lFrame.bindingIndex++}function lm(t,e){const n=Be.lFrame;n.bindingIndex=n.bindingRootIndex=t,Th(e)}function Th(t){Be.lFrame.currentDirectiveIndex=t}function Du(t){Be.lFrame.currentQueryIndex=t}function q0(t){const e=t[ye];return 2===e.type?e.declTNode:1===e.type?t[fr]:null}function hm(t,e,n){if(n&ct.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&ct.Host||(i=q0(o),null===i||(o=o[ta],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Be.lFrame=fm();return r.currentTNode=e,r.lView=t,!0}function qc(t){const e=fm(),n=t[ye];Be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fm(){const t=Be.lFrame,e=null===t?null:t.child;return null===e?Au(t):e}function Au(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function pm(){const t=Be.lFrame;return Be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const gm=pm;function Ah(){const t=pm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Tr(){return Be.lFrame.selectedIndex}function Ds(t){Be.lFrame.selectedIndex=t}function ln(){const t=Be.lFrame;return Ho(t.tView,t.selectedIndex)}function Su(){Be.lFrame.currentNamespace=em}let ym=!0;function Pu(){return ym}function Wo(t){ym=t}function Gc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=h&&(t.destroyHooks??=[]).push(n,h)}}function Wc(t,e,n){Kc(t,e,3,n)}function Zc(t,e,n,r){(3&t[Qe])===n&&Kc(t,e,n,r)}function xu(t,e){let n=t[Qe];(3&n)===e&&(n&=8191,n+=1,t[Qe]=n)}function Kc(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[zo]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[zo]+=65536),(a<o||-1==o)&&(Sh(t,n,e,u),t[zo]=(4294901760&t[zo])+u+2),u++}function vm(t,e){vi(4,t,e);const n=yi(null);try{e.call(t)}finally{yi(n),vi(5,t,e)}}function Sh(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[Qe]>>13<t[zo]>>16&&(3&t[Qe])===e&&(t[Qe]+=8192,vm(a,o)):vm(a,o)}const ua=-1;class ca{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Qc(t){return t!==ua}function Mu(t){return 32767&t}function Ru(t,e){let n=function X0(t){return t>>16}(t),r=e;for(;n>0;)r=r[ta],n--;return r}let Rh=!0;function Yc(t){const e=Rh;return Rh=t,e}const wm=255,Cm=5;let tI=0;const f={};function d(t,e){const n=_(t,e);if(-1!==n)return n;const r=e[ye];r.firstCreatePass&&(t.injectorIndex=e.length,p(r.data,t),p(e,null),p(r.blueprint,null));const i=E(t,e),o=t.injectorIndex;if(Qc(i)){const s=Mu(i),a=Ru(i,e),u=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function p(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function E(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=el(i),null===r)return ua;if(n++,i=i[ta],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ua}function R(t,e,n){!function c(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bo)&&(r=n[Bo]),null==r&&(r=n[Bo]=tI++);const i=r&wm;e.data[t+(i>>Cm)]|=1<<i}(t,e,n)}function se(t,e,n){if(n&ct.Optional||void 0!==t)return t;Zd()}function De(t,e,n,r){if(n&ct.Optional&&void 0===r&&(r=null),!(n&(ct.Self|ct.Host))){const i=t[$o],o=dr(void 0);try{return i?i.get(e,r,n&ct.Optional):vg(e,r,n&ct.Optional)}finally{dr(o)}}return se(r,0,n)}function ke(t,e,n,r=ct.Default,i){if(null!==t){if(2048&e[Qe]&&!(r&ct.Self)){const s=function nI(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[Qe]&&!(512&s[Qe]);){const a=st(o,s,n,r|ct.Self,f);if(a!==f)return a;let u=o.parent;if(!u){const l=s[Ng];if(l){const h=l.get(n,f,r);if(h!==f)return h}u=el(s),s=s[ta]}o=u}return i}(t,e,n,r,f);if(s!==f)return s}const o=st(t,e,n,r,f);if(o!==f)return o}return De(e,n,r,i)}function st(t,e,n,r,i){const o=function bm(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bo)?t[Bo]:void 0;return"number"==typeof e?e>=0?e&wm:Tm:e}(n);if("function"==typeof o){if(!hm(e,t,r))return r&ct.Host?se(i,0,r):De(e,n,r,i);try{let s;if(s=o(r),null!=s||r&ct.Optional)return s;Zd()}finally{gm()}}else if("number"==typeof o){let s=null,a=_(t,e),u=ua,l=r&ct.Host?e[cn][fr]:null;for((-1===a||r&ct.SkipSelf)&&(u=-1===a?E(t,e):e[a+8],u!==ua&&Oh(r,!1)?(s=e[ye],a=Mu(u),e=Ru(u,e)):a=-1);-1!==a;){const h=e[ye];if(Jc(o,a,h.data)){const g=Vr(a,e,n,s,r,l);if(g!==f)return g}u=e[a+8],u!==ua&&Oh(r,e[ye].data[a+8]===l)&&Jc(o,a,e)?(s=h,a=Mu(u),e=Ru(u,e)):a=-1}}return i}function Vr(t,e,n,r,i,o){const s=e[ye],a=s.data[t+8],h=function Li(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,h=o>>20,m=i?a+h:t.directiveEnd;for(let y=r?a:a+h;y<m;y++){const b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){const y=s[u];if(y&&Vi(y)&&y.type===n)return u}return null}(a,s,n,null==r?ra(a)&&Rh:r!=s&&0!=(3&a.type),i&ct.Host&&o===a);return null!==h?fo(e,s,h,a):f}function fo(t,e,n,r){let i=t[n];const o=e.data;if(function Y0(t){return t instanceof ca}(i)){const s=i;s.resolving&&function Xa(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,`Circular dependency in DI detected for ${t}${n}`)}(function it(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Se(t)}(o[n]));const a=Yc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?dr(s.injectImpl):null;hm(t,r,ct.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Q0(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=vh(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==l&&dr(l),Yc(a),s.resolving=!1,gm()}}return i}function Jc(t,e,n){return!!(n[e+(t>>Cm)]&1<<t)}function Oh(t,e){return!(t&ct.Self||t&ct.Host&&e)}class mr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ke(this._tNode,this._lView,e,Ys(r),n)}}function Tm(){return new mr(nr(),ne())}function zn(t){return Ni(()=>{const e=t.prototype.constructor,n=e[bo]||Xc(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[bo]||Xc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xc(t){return re(t)?()=>{const e=Xc(M(t));return e&&e()}:ws(t)}function el(t){const e=t[ye],n=e.type;return 2===n?e.declTNode:1===n?t[fr]:null}const rl="__parameters__";function ol(t,e,n){return Ni(()=>{const r=function rI(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,h){const g=u.hasOwnProperty(rl)?u[rl]:Object.defineProperty(u,rl,{value:[]})[rl];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function al(t,e){t.forEach(n=>Array.isArray(n)?al(n,e):e(n))}function MA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dm(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ui(t,e,n){let r=ul(t,e);return r>=0?t[1|r]=n:(r=~r,function aB(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function iI(t,e){const n=ul(t,e);if(n>=0)return t[1|n]}function ul(t,e){return function RA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Ii=ou(ol("Optional"),8),Sm=ou(ol("SkipSelf"),4);function Om(t){return 128==(128&t.flags)}var da=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(da||{});const SB=/^>|^->|<!--|-->|--!>|<!-$/g,PB=/(<|>)/g,xB="\u200b$1\u200b";const cI=new Map;let MB=0;const dI="__ngContext__";function Fr(t,e){Nr(e)?(t[dI]=e[Is],function OB(t){cI.set(t[Is],t)}(e)):t[dI]=e}let hI;function fI(t,e){return hI(t,e)}function Uh(t){const e=t[zt];return kr(e)?e[zt]:e}function JA(t){return eS(t[du])}function XA(t){return eS(t[ki])}function eS(t){for(;null!==t&&!kr(t);)t=t[ki];return t}function dl(t,e,n,r,i){if(null!=r){let o,s=!1;kr(r)?o=r:Nr(r)&&(s=!0,r=r[an]);const a=Mt(r);0===t&&null!==n?null==i?iS(e,n,a):Ou(e,n,a,i||null,!0):1===t&&null!==n?Ou(e,n,a,i||null,!0):2===t?function Bm(t,e,n){const r=Lm(t,e);r&&function JB(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function t3(t,e,n,r,i){const o=n[Cr];o!==Mt(n)&&dl(e,t,r,o,i);for(let a=tr;a<n.length;a++){const u=n[a];jh(u[ye],u,t,e,r,o)}}(e,t,o,n,i)}}function pI(t,e){return t.createComment(function HA(t){return t.replace(SB,e=>e.replace(PB,xB))}(e))}function Vm(t,e,n){return t.createElement(e,n)}function nS(t,e){const n=t[na],r=n.indexOf(e);Uc(e),n.splice(r,1)}function Fm(t,e){if(t.length<=tr)return;const n=tr+e,r=t[n];if(r){const i=r[hu];null!==i&&i!==t&&nS(i,r),e>0&&(t[n-1][ki]=r[ki]);const o=Dm(t,tr+e);!function HB(t,e){jh(t,e,e[He],2,null,null),e[an]=null,e[fr]=null}(r[ye],r);const s=o[ao];null!==s&&s.detachView(o[ye]),r[zt]=null,r[ki]=null,r[Qe]&=-129}return r}function gI(t,e){if(!(256&e[Qe])){const n=e[He];e[Es]&&gh(e[Es]),e[fu]&&gh(e[fu]),n.destroyNode&&jh(t,e,n,3,null,null),function WB(t){let e=t[du];if(!e)return mI(t[ye],t);for(;e;){let n=null;if(Nr(e))n=e[du];else{const r=e[tr];r&&(n=r)}if(!n){for(;e&&!e[ki]&&e!==t;)Nr(e)&&mI(e[ye],e),e=e[zt];null===e&&(e=t),Nr(e)&&mI(e[ye],e),n=e&&e[ki]}e=n}}(e)}}function mI(t,e){if(!(256&e[Qe])){e[Qe]&=-129,e[Qe]|=256,function YB(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ca)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];vi(4,a,u);try{u.call(a)}finally{vi(5,a,u)}}else{vi(4,i,o);try{o.call(i)}finally{vi(5,i,o)}}}}}(t,e),function QB(t,e){const n=t.cleanup,r=e[Xs];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Xs]=null);const i=e[uo];if(null!==i){e[uo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[ye].type&&e[He].destroy();const n=e[hu];if(null!==n&&kr(e[zt])){n!==e[zt]&&nS(n,e);const r=e[ao];null!==r&&r.detachView(t)}!function NB(t){cI.delete(t[Is])}(e)}}function _I(t,e,n){return function rS(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[an];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===hr.None||o===hr.Emulated)return null}return pr(r,n)}}(t,e.parent,n)}function Ou(t,e,n,r,i){t.insertBefore(e,n,r,i)}function iS(t,e,n){t.appendChild(e,n)}function oS(t,e,n,r,i){null!==r?Ou(t,e,n,r,i):iS(t,e,n)}function Lm(t,e){return t.parentNode(e)}let yI,wI,$m,uS=function aS(t,e,n){return 40&t.type?pr(t,n):null};function Um(t,e,n,r){const i=_I(t,r,e),o=e[He],a=function sS(t,e,n){return uS(t,e,n)}(r.parent||e[fr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)oS(o,i,n[u],a,!1);else oS(o,i,n,a,!1);void 0!==yI&&yI(o,r,e,n,i)}function Bh(t,e){if(null!==e){const n=e.type;if(3&n)return pr(e,t);if(4&n)return vI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Bh(t,r);{const i=t[e.index];return kr(i)?vI(-1,i):Mt(i)}}if(32&n)return fI(e,t)()||Mt(t[e.index]);{const r=lS(t,e);return null!==r?Array.isArray(r)?r[0]:Bh(Uh(t[cn]),r):Bh(t,e.next)}}return null}function lS(t,e){return null!==e?t[cn][fr].projection[e.projection]:null}function vI(t,e){const n=tr+t+1;if(n<e.length){const r=e[n],i=r[ye].firstChild;if(null!==i)return Bh(r,i)}return e[Cr]}function II(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Fr(Mt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)II(t,e,n.child,r,i,o,!1),dl(e,t,i,a,o);else if(32&u){const l=fI(n,r);let h;for(;h=l();)dl(e,t,i,h,o);dl(e,t,i,a,o)}else 16&u?hS(t,e,r,n,i,o):dl(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jh(t,e,n,r,i,o){II(n,r,t.firstChild,e,i,o,!1)}function hS(t,e,n,r,i,o){const s=n[cn],u=s[fr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)dl(e,t,i,u[l],o);else{let l=u;const h=s[zt];Om(r)&&(l.flags|=128),II(t,e,l,h,i,o,!0)}}function fS(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pS(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&au(t,e,r),null!==i&&fS(t,e,i),null!==o&&function r3(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function _S(t){return function CI(){if(void 0===$m&&($m=null,$t.trustedTypes))try{$m=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return $m}()?.createScriptURL(t)||t}class yS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function ha(t){return t instanceof yS?t.changingThisBreaksApplicationSecurity:t}function $h(t,e){const n=function f3(t){return t instanceof yS&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ut})`)}return n===e}const _3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var pl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(pl||{});function Hh(t){const e=qh();return e?e.sanitize(pl.URL,t)||"":$h(t,"URL")?ha(t):function bI(t){return(t=String(t)).match(_3)?t:"unsafe:"+t}(Se(t))}function TS(t){const e=qh();if(e)return _S(e.sanitize(pl.RESOURCE_URL,t)||"");if($h(t,"ResourceURL"))return _S(ha(t));throw new G(904,!1)}function qh(){const t=ne();return t&&t[ea].sanitizer}const Gh=new de("ENVIRONMENT_INITIALIZER"),AS=new de("INJECTOR",-1),SS=new de("INJECTOR_DEF_TYPES");class SI{get(e,n=ms){if(n===ms){const r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return n}}function x3(...t){return{\u0275providers:PS(0,t),\u0275fromNgModule:!0}}function PS(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return al(e,s=>{const a=s;Hm(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&xS(i,o),n}function xS(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];xI(i,o=>{e(o,r)})}}function Hm(t,e,n,r){if(!(t=M(t)))return!1;let i=null,o=eu(t);const s=!o&&ht(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=eu(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)Hm(l,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{al(o.imports,h=>{Hm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&xS(l,e)}if(!a){const l=ws(i)||(()=>new i);e({provide:i,useFactory:l,deps:bt},i),e({provide:SS,useValue:i,multi:!0},i),e({provide:Gh,useValue:()=>ce(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=t;xI(u,h=>{e(h,l)})}}}return i!==t&&void 0!==t.providers}function xI(t,e){for(let n of t)Ee(n)&&(n=n.\u0275providers),Array.isArray(n)?xI(n,e):e(n)}const M3=ve({provide:String,useValue:ve});function MI(t){return null!==t&&"object"==typeof t&&M3 in t}function Nu(t){return"function"==typeof t}const RI=new de("Set Injector scope."),qm={},O3={};let OI;function Gm(){return void 0===OI&&(OI=new SI),OI}class Bi{}class gl extends Bi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kI(e,s=>this.processProvider(s)),this.records.set(AS,ml(void 0,this)),i.has("environment")&&this.records.set(Bi,ml(void 0,this));const o=this.records.get(RI);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SS.multi,bt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=so(this),r=dr(void 0);try{return e()}finally{so(n),dr(r)}}get(e,n=ms,r=ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ag))return e[Ag](this);r=Ys(r);const o=so(this),s=dr(void 0);try{if(!(r&ct.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function L3(t){return"function"==typeof t||"object"==typeof t&&t instanceof de}(e)&&bc(e);u=l&&this.injectableDefInScope(l)?ml(NI(e),qm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ct.Self?Gm():this.parent).get(e,n=r&ct.Optional&&n===ms?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[mi]=a[mi]||[]).unshift(Oe(e)),o)throw a;return function su(t,e,n,r){const i=t[mi];throw e[Tg]&&i.unshift(e[Tg]),t.message=function fA(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Oe(e);if(Array.isArray(e))i=e.map(Oe).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Oe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(h0,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[mi]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{dr(s),so(o)}}resolveInjectorInitializers(){const e=so(this),n=dr(void 0);try{const i=this.get(Gh.multi,bt,ct.Self);for(const o of i)o()}finally{so(e),dr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){let n=Nu(e=M(e))?e:M(e&&e.provide);const r=function k3(t){return MI(t)?ml(void 0,t.useValue):ml(OS(t),qm)}(e);if(Nu(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ml(void 0,qm,!0),i.factory=()=>Co(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===qm&&(n.value=O3,n.value=n.factory()),"object"==typeof n.value&&n.value&&function F3(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=M(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function NI(t){const e=bc(t),n=null!==e?e.factory:ws(t);if(null!==n)return n;if(t instanceof de)throw new G(204,!1);if(t instanceof Function)return function N3(t){const e=t.length;if(e>0)throw function Vh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new G(204,!1);const n=function l0(t){return t&&(t[Tc]||t[Qd])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new G(204,!1)}function OS(t,e,n){let r;if(Nu(t)){const i=M(t);return ws(i)||NI(i)}if(MI(t))r=()=>M(t.useValue);else if(function RS(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Co(t.deps||[]));else if(function MS(t){return!(!t||!t.useExisting)}(t))r=()=>ce(M(t.useExisting));else{const i=M(t&&(t.useClass||t.provide));if(!function V3(t){return!!t.deps}(t))return ws(i)||NI(i);r=()=>new i(...Co(t.deps))}return r}function ml(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kI(t,e){for(const n of t)Array.isArray(n)?kI(n,e):n&&Ee(n)?kI(n.\u0275providers,e):e(n)}const Wm=new de("AppId",{providedIn:"root",factory:()=>U3}),U3="ng",NS=new de("Platform Initializer"),Ao=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kS=new de("CSP nonce",{providedIn:"root",factory:()=>function fl(){if(void 0!==wI)return wI;if(typeof document<"u")return document;throw new G(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let VS=(t,e,n)=>null;function zI(t,e,n=!1){return VS(t,e,n)}class K3{}class US{}class Y3{resolveComponentFactory(e){throw function Q3(t){const e=Error(`No component factory found for ${Oe(t)}.`);return e.ngComponent=t,e}(e)}}let Xm=(()=>{class t{static#e=this.NULL=new Y3}return t})();function J3(){return vl(nr(),ne())}function vl(t,e){return new ji(pr(t,e))}let ji=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=J3}return t})();class jS{}let Ss=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ej(){const t=ne(),n=oi(nr().index,t);return(Nr(n)?n:t)[He]}()}return t})(),tj=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>null})}return t})();class Il{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const GI=new Il("16.2.12"),WI={};function qS(t,e=null,n=null,r){const i=GS(t,e,n,r);return i.resolveInjectorInitializers(),i}function GS(t,e=null,n=null,r,i=new Set){const o=[n||bt,x3(t)];return r=r||("object"==typeof t?void 0:Oe(t)),new gl(o,e||Gm(),r||null,i)}let Lr=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=ms;static#t=this.NULL=new SI;static create(n,r){if(Array.isArray(n))return qS({name:""},r,n,"");{const i=n.name??"";return qS({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Pe({token:t,providedIn:"any",factory:()=>ce(AS)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function KI(t){return t.ngOriginalError}class Ps{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&KI(e);for(;n&&KI(n);)n=KI(n);return n||null}}function YI(t){return e=>{setTimeout(t,void 0,e)}}const Mn=class uj extends W{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=YI(o),i&&(i=YI(i)),s&&(s=YI(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof wt&&e.add(a),a}};function ZS(...t){}class Dt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function cj(){const t="function"==typeof $t.requestAnimationFrame;let e=$t[t?"requestAnimationFrame":"setTimeout"],n=$t[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function hj(t){const e=()=>{!function dj(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($t,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,XI(t),t.isCheckStableRunning=!0,JI(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),XI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function pj(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return KS(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),QS(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return KS(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),QS(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,XI(t),JI(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dt.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(Dt.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,lj,ZS,ZS);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const lj={};function JI(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function KS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function QS(t){t._nesting--,JI(t)}class fj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const YS=new de("",{providedIn:"root",factory:JS});function JS(){const t=we(Dt);let e=!0;return w(new We(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new We(i=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=t.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(K()))}function XS(t){return t.ownerDocument}function xs(t){return t instanceof Function?t():t}let eE=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function Kh(t){for(;t;){t[Qe]|=64;const e=Uh(t);if(fh(t)&&!e)return t;t=e}return null}const iP=new de("",{providedIn:"root",factory:()=>!1});let t_=null;function uP(t,e){return t[e]??dP()}function cP(t,e){const n=dP();n.producerNode?.length&&(t[e]=t_,n.lView=t,t_=lP())}const Cj={...sa,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Kh(t.lView)},lView:null};function lP(){return Object.create(Cj)}function dP(){return t_??=lP(),t_}const Je={};function X(t){hP(vt(),ne(),Tr()+t,!1)}function hP(t,e,n,r){if(!r)if(3==(3&e[Qe])){const o=t.preOrderCheckHooks;null!==o&&Wc(e,o,n)}else{const o=t.preOrderHooks;null!==o&&Zc(e,o,0,n)}Ds(n)}function Q(t,e=ct.Default){const n=ne();return null===n?ce(t,e):ke(nr(),n,M(t),e)}function n_(t,e,n,r,i,o,s,a,u,l,h){const g=e.blueprint.slice();return g[an]=i,g[Qe]=140|r,(null!==l||t&&2048&t[Qe])&&(g[Qe]|=2048),tm(g),g[zt]=g[ta]=t,g[un]=n,g[ea]=s||t&&t[ea],g[He]=a||t&&t[He],g[$o]=u||t&&t[$o]||null,g[fr]=o,g[Is]=function RB(){return MB++}(),g[To]=h,g[Ng]=l,g[cn]=2==e.type?t[cn]:g,g}function Cl(t,e,n,r,i){let o=t.data[e];if(null===o)o=function tE(t,e,n,r,i){const o=zc(),s=Tu(),u=t.data[e]=function Mj(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Go(){return null!==Be.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function um(){return Be.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function bu(){const t=Be.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return lo(o,!0),o}function Qh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function pP(t,e,n,r,i){const o=uP(e,Es),s=Tr(),a=2&r;try{Ds(-1),a&&e.length>lt&&hP(t,e,lt,!1),vi(a?2:0,i);const l=a?o:null,h=vu(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{ph(l,h)}}finally{a&&null===e[Es]&&cP(e,Es),Ds(s),vi(a?3:1,i)}}function nE(t,e,n){if(Vg(e)){const r=yi(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{yi(r)}}}function rE(t,e,n){$c()&&(function Lj(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;ra(n)&&function qj(t,e,n){const r=pr(e,t),i=gP(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=r_(t,n_(t,i,null,s,r,e,null,t[ea].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||d(n,e),Fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],l=fo(e,t,a,n);Fr(l,e),null!==s&&Gj(0,a-i,l,u,0,s),Vi(u)&&(oi(n.index,e)[un]=fo(e,t,a,n))}}(t,e,n,pr(n,e)),64==(64&n.flags)&&IP(t,e,n))}function iE(t,e,n=pr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function gP(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=oE(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function oE(t,e,n,r,i,o,s,a,u,l,h){const g=lt+r,m=g+i,y=function Tj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Je);return n}(g,m),b="function"==typeof l?l():l;return y[ye]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}let mP=t=>null;function _P(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?yP(n,e,i,o):r.hasOwnProperty(i)&&yP(n,e,r[i],o)}return n}function yP(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function $i(t,e,n,r,i,o,s,a){const u=pr(e,n);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(lE(t,n,h,r,i),ra(e)&&function Nj(t,e){const n=oi(e,t);16&n[Qe]||(n[Qe]|=64)}(n,e.index)):3&e.type&&(r=function Oj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function sE(t,e,n,r){if($c()){const i=null===r?null:{"":-1},o=function Bj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(lu(e,s.selectors,!1))if(r||(r=[]),Vi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),aE(t,e,a.length)}else r.unshift(s),aE(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&vP(t,e,n,s,i,a),i&&function jj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new G(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=uu(n.mergedAttrs,n.attrs)}function vP(t,e,n,r,i,o){for(let l=0;l<r.length;l++)R(d(n,e),t,r[l].type);!function zj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=Qh(t,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];n.mergedAttrs=uu(n.mergedAttrs,h.hostAttrs),Hj(t,n,e,u,h),$j(u,h,i),null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Rj(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=o[h],m=n?n.get(g):null,b=m?m.outputs:null;u=_P(g.inputs,h,u,m?m.inputs:null),l=_P(g.outputs,h,l,b);const D=null===u||null===s||oh(e)?null:Wj(u,h,s);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(t,n,o)}function IP(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function bh(){return Be.lFrame.currentDirectiveIndex}();try{Ds(o);for(let a=r;a<i;a++){const u=t.data[a],l=e[a];Th(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Uj(u,l)}}finally{Ds(-1),Th(s)}}function Uj(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function aE(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $j(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vi(e)&&(n[""]=t)}}function Hj(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ws(i.type)),s=new ca(o,Vi(i),Q);t.blueprint[r]=s,n[r]=s,function Vj(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function Fj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Qh(t,n,i.hostVars,Je),i)}function Zo(t,e,n,r,i,o){const s=pr(t,e);!function uE(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?Se(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[He],s,o,t.value,n,r,i)}function Gj(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)EP(r,n,s[a++],s[a++],s[a++])}function EP(t,e,n,r,i){const o=yi(null);try{const s=t.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{yi(o)}}function Wj(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function wP(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function CP(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Du(n[r]),s.contentQueries(2,e[o],o)}}}function r_(t,e){return t[du]?t[Rc][ki]=e:t[du]=e,t[Rc]=e,e}function cE(t,e,n){Du(0);const r=yi(null);try{e(t,n)}finally{yi(r)}}function AP(t,e){const n=t[$o],r=n?n.get(Ps,null):null;r&&r.handleError(e)}function lE(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];EP(t.data[s],e[s],r,a,i)}}function Zj(t,e){const n=oi(e,t),r=n[ye];!function Kj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[an];null!==i&&null===n[To]&&(n[To]=zI(i,n[$o])),dE(r,n,n[un])}function dE(t,e,n){qc(e);try{const r=t.viewQuery;null!==r&&cE(1,r,n);const i=t.template;null!==i&&pP(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&CP(t,e),t.staticViewQueries&&cE(2,t.viewQuery,n);const o=t.components;null!==o&&function Qj(t,e){for(let n=0;n<e.length;n++)Zj(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Qe]&=-5,Ah()}}let SP=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function x0(t,e,n){const r=Object.create(M0);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>Hg(r),run:()=>{if(r.dirty=!1,r.hasRun&&!qg(r))return;r.hasRun=!0;const s=vu(r);try{r.cleanupFn(),r.cleanupFn=kc,r.fn(i)}finally{ph(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new t})}return t})();function i_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Wn(i,a):2==o&&(r=Wn(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Yh(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Mt(o)),kr(o)&&PP(o,r);const s=n.type;if(8&s)Yh(t,e,n.child,r);else if(32&s){const a=fI(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=lS(e,n);if(Array.isArray(a))r.push(...a);else{const u=Uh(e[cn]);Yh(u[ye],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PP(t,e){for(let n=tr;n<t.length;n++){const r=t[n],i=r[ye].firstChild;null!==i&&Yh(r[ye],r,i,e)}t[Cr]!==t[an]&&e.push(t[Cr])}function o_(t,e,n,r=!0){const i=e[ea],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{xP(t,e,t.template,n)}catch(u){throw r&&AP(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function xP(t,e,n,r){const i=e[Qe];if(256!=(256&i)){e[ea].effectManager?.flush(),qc(e);try{tm(e),function am(t){return Be.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&pP(t,e,n,2,r);const s=3==(3&i);if(s){const l=t.preOrderCheckHooks;null!==l&&Wc(e,l,null)}else{const l=t.preOrderHooks;null!==l&&Zc(e,l,0,null),xu(e,0)}if(function Xj(t){for(let e=JA(t);null!==e;e=XA(e)){if(!e[kg])continue;const n=e[na];for(let r=0;r<n.length;r++){B0(n[r])}}}(e),MP(e,2),null!==t.contentQueries&&CP(t,e),s){const l=t.contentCheckHooks;null!==l&&Wc(e,l)}else{const l=t.contentHooks;null!==l&&Zc(e,l,1),xu(e,1)}!function bj(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=uP(e,fu);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Ds(~o);else{const s=o,a=n[++i],u=n[++i];lm(a,s),r.dirty=!1;const l=vu(r);try{u(2,e[s])}finally{ph(r,l)}}}}finally{null===e[fu]&&cP(e,fu),Ds(-1)}}(t,e);const a=t.components;null!==a&&OP(e,a,0);const u=t.viewQuery;if(null!==u&&cE(2,u,r),s){const l=t.viewCheckHooks;null!==l&&Wc(e,l)}else{const l=t.viewHooks;null!==l&&Zc(e,l,2),xu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Qe]&=-73,Uc(e)}finally{Ah()}}}function MP(t,e){for(let n=JA(t);null!==n;n=XA(n))for(let r=tr;r<n.length;r++)RP(n[r],e)}function e5(t,e,n){RP(oi(e,t),n)}function RP(t,e){if(!function U0(t){return 128==(128&t[Qe])}(t))return;const n=t[ye],r=t[Qe];if(80&r&&0===e||1024&r||2===e)xP(n,t,n.template,t[un]);else if(t[vs]>0){MP(t,1);const i=n.components;null!==i&&OP(t,i,1)}}function OP(t,e,n){for(let r=0;r<e.length;r++)e5(t,e[r],n)}class Jh{get rootNodes(){const e=this._lView,n=e[ye];return Yh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return 256==(256&this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[zt];if(kr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Fm(e,r),Dm(n,r))}this._attachedToViewContainer=!1}gI(this._lView[ye],this._lView)}onDestroy(e){!function Bc(t,e){if(256==(256&t[Qe]))throw new G(911,!1);null===t[uo]&&(t[uo]=[]),t[uo].push(e)}(this._lView,e)}markForCheck(){Kh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qe]&=-129}reattach(){this._lView[Qe]|=128}detectChanges(){o_(this._lView[ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function GB(t,e){jh(t,e,e[He],2,null,null)}(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e}}class t5 extends Jh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;o_(e[ye],e,e[un],!1)}checkNoChanges(){}get context(){return null}}class NP extends Xm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ht(e);return new Xh(n,this.ngModule)}}function kP(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class r5{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ys(r);const i=this.injector.get(e,WI,r);return i!==WI||n===WI?i:this.parentInjector.get(e,n,r)}}class Xh extends US{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=kP(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return kP(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function lh(t){return t.map(Pc).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof Bi?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new r5(e,o):e,a=s.get(jS,null);if(null===a)throw new G(407,!1);const g={rendererFactory:a,sanitizer:s.get(tj,null),effectManager:s.get(SP,null),afterRenderEventManager:s.get(eE,null)},m=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?function Dj(t,e,n,r){const o=r.get(iP,!1)||n===hr.ShadowDom,s=t.selectRootElement(e,o);return function Aj(t){mP(t)}(s),s}(m,r,this.componentDef.encapsulation,s):Vm(m,y,function n5(t){const e=t.toLowerCase();return"svg"===e?em:"math"===e?"math":null}(y)),L=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==b&&(k=zI(b,s,!0));const B=oE(0,null,null,1,0,null,null,null,null,null,null),oe=n_(null,B,null,L,null,null,g,m,s,null,k);let pe,ze;qc(oe);try{const St=this.componentDef;let Qn,hg=null;St.findHostDirectiveDefs?(Qn=[],hg=new Map,St.findHostDirectiveDefs(St,Qn,hg),Qn.push(St)):Qn=[St];const o0=function o5(t,e){const n=t[ye],r=lt;return t[r]=e,Cl(n,r,2,"#host",null)}(oe,b),Ute=function s5(t,e,n,r,i,o,s){const a=i[ye];!function a5(t,e,n,r){for(const i of t)e.mergedAttrs=uu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(i_(e,e.mergedAttrs,!0),null!==n&&pS(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=zI(e,i[$o]));const l=o.rendererFactory.createRenderer(e,n);let h=16;n.signals?h=4096:n.onPush&&(h=64);const g=n_(i,gP(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&aE(a,t,r.length-1),r_(i,g),i[t.index]=g}(o0,b,St,Qn,oe,g,m);ze=Ho(B,lt),b&&function c5(t,e,n,r){if(r)au(t,n,["ng-version",GI.full]);else{const{attrs:i,classes:o}=function Mg(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ni(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&au(t,n,i),o&&o.length>0&&fS(t,n,o.join(" "))}}(m,St,b,r),void 0!==n&&function l5(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(ze,this.ngContentSelectors,n),pe=function u5(t,e,n,r,i,o){const s=nr(),a=i[ye],u=pr(s,i);vP(a,i,s,n,null,r);for(let h=0;h<n.length;h++)Fr(fo(i,a,s.directiveStart+h,s),i);IP(a,i,s),u&&Fr(u,i);const l=fo(i,a,s.directiveStart+s.componentOffset,s);if(t[un]=i[un]=l,null!==o)for(const h of o)h(l,e);return nE(a,s,t),l}(Ute,St,Qn,hg,oe,[d5]),dE(B,oe,null)}finally{Ah()}return new i5(this.componentType,pe,vl(ze,oe),oe,ze)}}class i5 extends K3{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new t5(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;lE(o[ye],o,i,e,n),this.previousInputValues.set(e,n),Kh(oi(this._tNode.index,o))}}get injector(){return new mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function d5(){const t=nr();Gc(ne()[ye],t)}function Vt(t){let e=function VP(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Vi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=s_(t.inputs),s.inputTransforms=s_(t.inputTransforms),s.declaredInputs=s_(t.declaredInputs),s.outputs=s_(t.outputs);const a=i.hostBindings;a&&g5(t,a);const u=i.viewQuery,l=i.contentQueries;if(u&&f5(t,u),l&&p5(t,l),Nt(t.inputs,i.inputs),Nt(t.declaredInputs,i.declaredInputs),Nt(t.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Nt(s.inputTransforms,i.inputTransforms)),Vi(i)&&i.data.animation){const h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Vt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function h5(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uu(i.hostAttrs,n=uu(n,i.hostAttrs))}}(r)}function s_(t){return t===Or?{}:t===bt?[]:t}function f5(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function p5(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function g5(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function BP(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function a_(t){return!!function hE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Ko(t,e,n){return t[e]=n}function Ur(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Qo(t,e,n,r){const i=ne();return Ur(i,Ts(),e)&&(vt(),Zo(ln(),i,t,e,n,r)),Qo}function Tl(t,e,n,r){return Ur(t,Ts(),n)?e+Se(n)+r:Je}function xe(t,e,n,r,i,o,s,a){const u=ne(),l=vt(),h=t+lt,g=l.firstCreatePass?function B5(t,e,n,r,i,o,s,a,u){const l=e.consts,h=Cl(e,t,4,s||null,Do(l,a));sE(e,n,h,Do(l,u)),Gc(e,h);const g=h.tView=oE(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,l,u,e,n,r,i,o,s):l.data[h];lo(g,!1);const m=XP(l,u,g,t);Pu()&&Um(l,u,m,g),Fr(m,u),r_(u,u[h]=wP(m,u,m,g)),ia(g)&&rE(l,u,g),null!=s&&iE(u,g,a)}let XP=function ex(t,e,n,r){return Wo(!0),e[He].createComment("")};function fa(t){return qo(function Ch(){return Be.lFrame.contextLView}(),lt+t)}function me(t,e,n){const r=ne();return Ur(r,Ts(),e)&&$i(vt(),ln(),r,t,e,r[He],n,!1),me}function yE(t,e,n,r,i){const s=i?"class":"style";lE(t,n,e.inputs[s],s,r)}function S(t,e,n,r){const i=ne(),o=vt(),s=lt+t,a=i[He],u=o.firstCreatePass?function H5(t,e,n,r,i,o){const s=e.consts,u=Cl(e,t,2,r,Do(s,i));return sE(e,n,u,Do(s,o)),null!==u.attrs&&i_(u,u.attrs,!1),null!==u.mergedAttrs&&i_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],l=tx(o,i,u,a,e,t);i[s]=l;const h=ia(u);return lo(u,!0),pS(a,l,u),32!=(32&u.flags)&&Pu()&&Um(o,i,l,u),0===function Cu(){return Be.lFrame.elementDepthCount}()&&Fr(l,i),function $0(){Be.lFrame.elementDepthCount++}(),h&&(rE(o,i,u),nE(o,u,i)),null!==r&&iE(i,u),S}function O(){let t=nr();Tu()?wh():(t=t.parent,lo(t,!1));const e=t;(function Eh(t){return Be.skipHydrationRootTNode===t})(e)&&function om(){Be.skipHydrationRootTNode=null}(),function z0(){Be.lFrame.elementDepthCount--}();const n=vt();return n.firstCreatePass&&(Gc(n,t),Vg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function xh(t){return 0!=(8&t.flags)}(e)&&yE(n,e,ne(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Em(t){return 0!=(16&t.flags)}(e)&&yE(n,e,ne(),e.stylesWithoutHost,!1),O}function Ce(t,e,n,r){return S(t,e,n,r),O(),Ce}let tx=(t,e,n,r,i,o)=>(Wo(!0),Vm(r,i,function _m(){return Be.lFrame.currentNamespace}()));function ir(t,e,n){const r=ne(),i=vt(),o=t+lt,s=i.firstCreatePass?function W5(t,e,n,r,i){const o=e.consts,s=Do(o,r),a=Cl(e,t,8,"ng-container",s);return null!==s&&i_(a,s,!0),sE(e,n,a,Do(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];lo(s,!0);const a=rx(i,r,s,t);return r[o]=a,Pu()&&Um(i,r,a,s),Fr(a,r),ia(s)&&(rE(i,r,s),nE(i,s,r)),null!=n&&iE(r,s),ir}function or(){let t=nr();const e=vt();return Tu()?wh():(t=t.parent,lo(t,!1)),e.firstCreatePass&&(Gc(e,t),Vg(t)&&e.queries.elementEnd(t)),or}let rx=(t,e,n,r)=>(Wo(!0),pI(e[He],""));function Yo(){return ne()}function sf(t){return!!t&&"function"==typeof t.then}function ix(t){return!!t&&"function"==typeof t.subscribe}function Ft(t,e,n,r){const i=ne(),o=vt(),s=nr();return function sx(t,e,n,r,i,o,s){const a=ia(r),l=t.firstCreatePass&&function TP(t){return t.cleanup||(t.cleanup=[])}(t),h=e[un],g=function bP(t){return t[Xs]||(t[Xs]=[])}(e);let m=!0;if(3&r.type||s){const D=pr(r,e),x=s?s(D):D,L=g.length,k=s?oe=>s(Mt(oe[r.index])):r.index;let B=null;if(!s&&a&&(B=function Q5(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Xs],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==B)(B.__ngLastListenerFn__||B).__ngNextListenerFn__=o,B.__ngLastListenerFn__=o,m=!1;else{o=ux(r,e,h,o,!1);const oe=n.listen(x,i,o);g.push(o,oe),l&&l.push(i,k,L,L+1)}}else o=ux(r,e,h,o,!1);const y=r.outputs;let b;if(m&&null!==y&&(b=y[i])){const D=b.length;if(D)for(let x=0;x<D;x+=2){const pe=e[b[x]][b[x+1]].subscribe(o),ze=g.length;g.push(o,pe),l&&l.push(i,r.index,ze,-(ze+1))}}}(o,i,i[He],s,t,e,r),Ft}function ax(t,e,n,r){try{return vi(6,e,n),!1!==n(r)}catch(i){return AP(t,i),!1}finally{vi(7,e,n)}}function ux(t,e,n,r,i){return function o(s){if(s===Function)return r;Kh(t.componentOffset>-1?oi(t.index,e):e);let u=ax(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=ax(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function et(t=1){return function G0(t){return(Be.lFrame.contextLView=function W0(t,e){for(;t>0;)e=e[ta],t--;return e}(t,Be.lFrame.contextLView))[un]}(t)}function af(t,e,n){return vE(t,"",e,"",n),af}function vE(t,e,n,r,i){const o=ne(),s=Tl(o,e,n,r);return s!==Je&&$i(vt(),ln(),o,t,s,o[He],i,!1),vE}function h_(t,e){return t<<17|e<<2}function pa(t){return t>>17&32767}function IE(t){return 2|t}function Vu(t){return(131068&t)>>2}function EE(t,e){return-131069&t|e<<2}function wE(t){return 1|t}function _x(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?pa(o):Vu(o),u=!1;for(;0!==a&&(!1===u||s);){const h=t[a+1];o$(t[a],e)&&(u=!0,t[a+1]=r?wE(h):IE(h)),a=r?pa(h):Vu(h)}u&&(t[n+1]=r?IE(o):wE(o))}function o$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ul(t,e)>=0}function uf(t,e){return function So(t,e,n,r){const i=ne(),o=vt(),s=function ho(t){const e=Be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function Dx(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Tr()],s=function Tx(t,e){return e>=t.expandoStartIndex}(t,n);(function xx(t,e){return 0!=(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function p$(t,e,n,r){const i=function Dh(t){const e=Be.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=cf(n=CE(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=CE(i,t,e,n,r),null===o){let u=function g$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Vu(r))return t[pa(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=CE(null,t,e,u[1],r),u=cf(u,e.attrs,r),function m$(t,e,n,r){t[pa(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function _$(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=cf(r,t[o].hostAttrs,n);return cf(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function r$(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pa(s),u=Vu(s);t[r]=n;let h,l=!1;if(Array.isArray(n)?(h=n[1],(null===h||ul(n,h)>0)&&(l=!0)):h=n,i)if(0!==u){const m=pa(t[a+1]);t[r+1]=h_(m,a),0!==m&&(t[m+1]=EE(t[m+1],r)),t[a+1]=function t$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=h_(a,0),0!==a&&(t[a+1]=EE(t[a+1],r)),a=r;else t[r+1]=h_(u,0),0===a?a=r:t[u+1]=EE(t[u+1],r),u=r;l&&(t[r+1]=IE(t[r+1])),_x(t,h,r,!0),_x(t,h,r,!1),function i$(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ul(o,e)>=0&&(n[r+1]=wE(n[r+1]))}(e,h,t,r,o),s=h_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==Je&&Ur(i,s,e)&&function Sx(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,l=u[a+1],h=function n$(t){return 1==(1&t)}(l)?Px(u,e,n,i,Vu(l),s):void 0;f_(h)||(f_(o)||function e$(t){return 2==(2&t)}(l)&&(o=Px(u,null,n,i,a,s)),function n3(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:da.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=da.Important),t.setStyle(n,r,i,o))}}(r,s,Lc(Tr(),n),i,o))}(o,o.data[Tr()],i,i[He],t,i[s+1]=function E$(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Oe(ha(t)))),t}(e,n),r,s)}(t,e,null,!0),uf}function CE(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=cf(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function cf(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ui(t,s,!!n||e[++o]))}return void 0===t?null:t}function Px(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],l=Array.isArray(u),h=l?u[1]:u,g=null===h;let m=n[i+1];m===Je&&(m=g?bt:void 0);let y=g?iI(m,r):h===r?m:void 0;if(l&&!f_(y)&&(y=iI(u,r)),f_(y)&&(a=y,s))return a;const b=t[i+1];i=s?pa(b):Vu(b)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=iI(u,r))}return a}function f_(t){return void 0!==t}function U(t,e=""){const n=ne(),r=vt(),i=t+lt,o=r.firstCreatePass?Cl(r,i,1,e,null):r.data[i],s=Mx(r,n,o,e,t);n[i]=s,Pu()&&Um(r,n,s,o),lo(o,!1)}let Mx=(t,e,n,r,i)=>(Wo(!0),function km(t,e){return t.createText(e)}(e[He],r));function yn(t){return ai("",t,""),yn}function ai(t,e,n){const r=ne(),i=Tl(r,t,e,n);return i!==Je&&function Ms(t,e,n){const r=Lc(e,t);!function tS(t,e,n){t.setValue(e,n)}(t[He],r,n)}(r,Tr(),i),ai}const Fu=void 0;var z$=["en",[["a","p"],["AM","PM"],Fu],[["AM","PM"],Fu,Fu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fu,"{1} 'at' {0}",Fu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $$(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Nl={};function ui(t){const e=function H$(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Jx(e);if(n)return n;const r=e.split("-")[0];if(n=Jx(r),n)return n;if("en"===r)return z$;throw new G(701,!1)}function Jx(t){return t in Nl||(Nl[t]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[t]),Nl[t]}var Kt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Kt||{});const kl="en-US";let Xx=kl;function DE(t,e,n,r,i){if(t=M(t),Array.isArray(t))for(let o=0;o<t.length;o++)DE(t[o],e,n,r,i);else{const o=vt(),s=ne(),a=nr();let u=Nu(t)?t:M(t.provide);const l=OS(t),h=1048575&a.providerIndexes,g=a.directiveStart,m=a.providerIndexes>>20;if(Nu(t)||!t.multi){const y=new ca(l,i,Q),b=SE(u,e,i?h:h+m,g);-1===b?(R(d(a,s),o,u),AE(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[b]=y,s[b]=y)}else{const y=SE(u,e,h+m,g),b=SE(u,e,h,h+m),x=b>=0&&n[b];if(i&&!x||!i&&!(y>=0&&n[y])){R(d(a,s),o,u);const L=function $4(t,e,n,r,i){const o=new ca(t,n,Q);return o.multi=[],o.index=e,o.componentProviders=0,b1(o,i,r&&!n),o}(i?j4:B4,n.length,i,r,l);!i&&x&&(n[b].providerFactory=L),AE(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),s.push(L)}else AE(o,t,y>-1?y:b,b1(n[i?b:y],l,!i&&r));!i&&r&&x&&n[b].componentProviders++}}}function AE(t,e,n,r){const i=Nu(e),o=function R3(t){return!!t.useClass}(e);if(i||o){const u=(o?M(e.useClass):e).prototype.ngOnDestroy;if(u){const l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(n);-1===h?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function b1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function SE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function B4(t,e,n,r){return PE(this.multi,[])}function j4(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=fo(n,n[ye],this.providerFactory.index,r);o=a.slice(0,s),PE(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],PE(i,o);return o}function PE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Qt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function U4(t,e,n){const r=vt();if(r.firstCreatePass){const i=Vi(t);DE(n,r.data,r.blueprint,i,!0),DE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Lu{}class T1{}class xE extends Lu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NP(this);const i=ri(e);this._bootstrapComponents=xs(i.bootstrap),this._r3Injector=GS(e,n,[{provide:Lu,useValue:this},{provide:Xm,useValue:this.componentFactoryResolver},...r],Oe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ME extends T1{constructor(e){super(),this.moduleType=e}create(e){return new xE(this.moduleType,e,[])}}class D1 extends Lu{constructor(e){super(),this.componentFactoryResolver=new NP(this),this.instance=null;const n=new gl([...e.providers,{provide:Lu,useValue:this},{provide:Xm,useValue:this.componentFactoryResolver}],e.parent||Gm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function RE(t,e,n=null){return new D1({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let q4=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=PS(0,n.type),i=r.length>0?RE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pe({token:t,providedIn:"environment",factory:()=>new t(ce(Bi))})}return t})();function A1(t){t.getStandaloneInjector=e=>e.get(q4).getOrCreateStandaloneInjector(t)}function NE(t,e,n,r){return function N1(t,e,n,r,i,o){const s=e+n;return Ur(t,s,i)?Ko(t,s+1,o?r.call(o,i):r(i)):gf(t,s+1)}(ne(),gr(),t,e,n,r)}function gf(t,e){const n=t[e];return n===Je?void 0:n}function k1(t,e,n,r,i,o,s){const a=e+n;return function ku(t,e,n,r){const i=Ur(t,e,n);return Ur(t,e+1,r)||i}(t,a,i,o)?Ko(t,a+2,s?r.call(s,i,o):r(i,o)):gf(t,a+2)}function kE(t,e){const n=vt();let r;const i=t+lt;n.firstCreatePass?(r=function c6(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=ws(r.type)),a=dr(Q);try{const u=Yc(!1),l=o();return Yc(u),function z5(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,ne(),i,l),l}finally{dr(a)}}function VE(t,e,n,r){const i=t+lt,o=ne(),s=qo(o,i);return function mf(t,e){return t[ye].data[e].pure}(o,i)?k1(o,gr(),e,s.transform,n,r,s):s.transform(n,r)}function m6(t,e,n,r=!0){const i=e[ye];if(function ZB(t,e,n,r){const i=tr+r,o=n.length;r>0&&(n[i-1][ki]=e),r<o-tr?(e[ki]=n[i],MA(n,tr+r,e)):(n.push(e),e[ki]=null),e[zt]=n;const s=e[hu];null!==s&&n!==s&&function KB(t,e){const n=t[na];e[cn]!==e[zt][zt][cn]&&(t[kg]=!0),null===n?t[na]=[e]:n.push(e)}(s,e);const a=e[ao];null!==a&&a.insertView(t),e[Qe]|=128}(i,e,t,n),r){const o=vI(n,t),s=e[He],a=Lm(s,t[Cr]);null!==a&&function qB(t,e,n,r,i,o){r[an]=i,r[fr]=e,jh(t,r,n,1,i,o)}(i,t[fr],s,e,a,o)}}Symbol;let Rs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=v6}return t})();const _6=Rs,y6=class extends _6{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function g6(t,e,n,r){const i=e.tView,a=n_(t,i,n,4096&t[Qe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[hu]=t[e.index];const l=t[ao];return null!==l&&(a[ao]=l.createEmbeddedView(i)),dE(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Jh(i)}};function v6(){return function y_(t,e){return 4&t.type?new y6(e,t,vl(t,e)):null}(nr(),ne())}let xo=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=T6}return t})();function T6(){return function q1(t,e){let n;const r=e[t.index];return kr(r)?n=r:(n=wP(r,e,null,t),e[t.index]=n,r_(e,n)),G1(n,e,t,r),new z1(n,t,e)}(nr(),ne())}const D6=xo,z1=class extends D6{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vl(this._hostTNode,this._hostLView)}get injector(){return new mr(this._hostTNode,this._hostLView)}get parentInjector(){const e=E(this._hostTNode,this._hostLView);if(Qc(e)){const n=Ru(e,this._hostLView),r=Mu(e);return new mr(n[ye].data[r+8],n)}return new mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=H1(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,o){const s=e&&!function kh(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}const u=s?e:new Xh(ht(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const x=(s?l:this.parentInjector).get(Bi,null);x&&(o=x)}ht(u.componentType??{});const y=u.create(l,i,null,o);return this.insertImpl(y.hostView,a,false),y}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Ih(t){return kr(t[zt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[zt],h=new z1(l,l[fr],l[zt]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),a=this._lContainer;return m6(a,i,s,!r),e.attachToViewContainerRef(),MA(LE(a),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=H1(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Fm(this._lContainer,n);r&&(Dm(LE(this._lContainer),n),gI(r[ye],r))}detach(e){const n=this._adjustIndex(e,-1),r=Fm(this._lContainer,n);return r&&null!=Dm(LE(this._lContainer),n)?new Jh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function H1(t){return t[8]}function LE(t){return t[8]||(t[8]=[])}let G1=function W1(t,e,n,r){if(t[Cr])return;let i;i=8&n.type?Mt(r):function A6(t,e){const n=t[He],r=n.createComment(""),i=pr(e,t);return Ou(n,Lm(n,i),r,function XB(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Cr]=i};const KE=new de("Application Initializer");let QE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=we(KE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(sf(o))n.push(o);else if(ix(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yM=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Os=new de("LocaleId",{providedIn:"root",factory:()=>we(Os,ct.Optional|ct.SkipSelf)||function iz(){return typeof $localize<"u"&&$localize.locale||kl}()});let E_=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new v(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class az{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let vM=(()=>{class t{compileModuleSync(n){return new ME(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=xs(ri(n).declarations).reduce((s,a)=>{const u=ht(a);return u&&s.push(new Xh(u)),s},[]);return new az(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const CM=new de(""),C_=new de("");let tw,XE=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tw||(function Pz(t){tw=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(ce(Dt),ce(ew),ce(C_))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),ew=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return tw?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),ga=null;const bM=new de("AllowMultipleToken"),nw=new de("PlatformDestroyListeners"),rw=new de("appBootstrapListener");class DM{constructor(e,n){this.name=e,this.token=n}}function SM(t,e,n=[]){const r=`Platform: ${e}`,i=new de(r);return(o=[])=>{let s=iw();if(!s||s.injector.get(bM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function Rz(t){if(ga&&!ga.get(bM,!1))throw new G(400,!1);(function TM(){!function T0(t){_h=t}(()=>{throw new G(600,!1)})})(),ga=t;const e=t.get(xM);(function AM(t){t.get(NS,null)?.forEach(n=>n())})(t)}(function PM(t=[],e){return Lr.create({name:e,providers:[{provide:RI,useValue:"platform"},{provide:nw,useValue:new Set([()=>ga=null])},...t]})}(a,r))}return function Nz(t){const e=iw();if(!e)throw new G(401,!1);return e}()}}function iw(){return ga?.get(xM)??null}let xM=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function kz(t="zone.js",e){return"noop"===t?new fj:"zone.js"===t?new Dt(e):t}(r?.ngZone,function MM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function H4(t,e,n){return new xE(t,e,n)}(n.moduleType,this.injector,function VM(t){return[{provide:Dt,useFactory:t},{provide:Gh,multi:!0,useFactory:()=>{const e=we(Fz,{optional:!0});return()=>e.initialize()}},{provide:kM,useFactory:Vz},{provide:YS,useFactory:JS}]}(()=>i)),s=o.injector.get(Ps,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{b_(this._modules,o),a.unsubscribe()})}),function RM(t,e,n){try{const r=n();return sf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(QE);return a.runInitializers(),a.donePromise.then(()=>(function e1(t){ei(t,"Expected localeId to be defined"),"string"==typeof t&&(Xx=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Os,kl)||kl),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=OM({},r);return function xz(t,e,n){const r=new ME(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Ll);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new G(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new G(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(nw,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(ce(Lr))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function OM(t,e){return Array.isArray(e)?e.reduce(OM,t):{...t,...e}}let Ll=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=we(kM),this.zoneIsStable=we(YS),this.componentTypes=[],this.components=[],this.isStable=we(E_).hasPendingTasks.pipe(Te(n=>n?A(!1):this.zoneIsStable),je(),K()),this._injector=we(Bi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof US;if(!this._injector.get(QE).done)throw!i&&function jo(t){const e=ht(t)||xn(t)||er(t);return null!==e&&e.standalone}(n),new G(405,!1);let s;s=i?n:this._injector.get(Xm).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function Mz(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Lu),l=s.create(Lr.NULL,[],r||s.selector,a),h=l.location.nativeElement,g=l.injector.get(CM,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),b_(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new G(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;b_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(rw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>b_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function b_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const kM=new de("",{providedIn:"root",factory:()=>we(Ps).handleError.bind(void 0)});function Vz(){const t=we(Dt),e=we(Ps);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Fz=(()=>{class t{constructor(){this.zone=we(Dt),this.applicationRef=we(Ll)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let T_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Uz}return t})();function Uz(t){return function Bz(t,e,n){if(ra(t)&&!n){const r=oi(t.index,e);return new Jh(r,r)}return 47&t.type?new Jh(e[cn],e):null}(nr(),ne(),16==(16&t))}class jM{constructor(){}supports(e){return a_(e)}create(e){return new Gz(e)}}const qz=(t,e)=>e;class Gz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qz}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<zM(r,i,o)?n:r,a=zM(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){const y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}o[s.previousIndex]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!a_(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function w5(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Wz(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new $M),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $M),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Wz{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class $M{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Zz,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zM(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function qM(){return new S_([new jM])}let S_=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:qM});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||qM()),deps:[[t,new Sm,new Ii]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new G(901,!1)}}return t})();const Xz=SM(null,"core",[]);let eH=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(ce(Ll))};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({})}return t})();function Ul(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let lw=null;function ma(){return lw}class pH{}const zi=new de("DocumentToken");let dw=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return we(mH)},providedIn:"platform"})}return t})();const gH=new de("Location Initialized");let mH=(()=>{class t extends dw{constructor(){super(),this._doc=we(zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ma().getBaseHref(this._doc)}onPopState(n){const r=ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ma().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function hw(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function tR(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ns(t){return t&&"?"!==t[0]?"?"+t:t}let Bu=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return we(rR)},providedIn:"root"})}return t})();const nR=new de("appBaseHref");let rR=(()=>{class t extends Bu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??we(zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return hw(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ns(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Ns(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ce(dw),ce(nR,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_H=(()=>{class t extends Bu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=hw(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ns(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(ce(dw),ce(nR,8))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})(),fw=(()=>{class t{constructor(n){this._subject=new Mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function IH(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(tR(iR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ns(r))}normalize(n){return t.stripTrailingSlash(function vH(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,iR(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ns(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Ns;static#t=this.joinWithSlash=hw;static#n=this.stripTrailingSlash=tR;static#r=this.\u0275fac=function(r){return new(r||t)(ce(Bu))};static#i=this.\u0275prov=Pe({token:t,factory:function(){return function yH(){return new fw(ce(Bu))}()},providedIn:"root"})}return t})();function iR(t){return t.replace(/\/index.html$/,"")}var li=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(li||{}),Gt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Gt||{}),Hi=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Hi||{}),Hn=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(Hn||{});function M_(t,e){return _o(ui(t)[Kt.DateFormat],e)}function R_(t,e){return _o(ui(t)[Kt.TimeFormat],e)}function O_(t,e){return _o(ui(t)[Kt.DateTimeFormat],e)}function mo(t,e){const n=ui(t),r=n[Kt.NumberSymbols][e];if(typeof r>"u"){if(e===Hn.CurrencyDecimal)return n[Kt.NumberSymbols][Hn.Decimal];if(e===Hn.CurrencyGroup)return n[Kt.NumberSymbols][Hn.Group]}return r}function sR(t){if(!t[Kt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Kt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _o(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function gw(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const NH=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,If={},kH=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ks=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ks||{}),Rt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Rt||{}),Ot=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ot||{});function VH(t,e,n,r){let i=function qH(t){if(cR(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,o=1,s=1]=t.split("-").map(a=>+a);return N_(i,o-1,s)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(NH))return function GH(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,l),e}(r)}const e=new Date(t);if(!cR(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Vs(n,e)||e;let a,s=[];for(;e;){if(a=kH.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const h=s.pop();if(!h)break;e=h}}let u=i.getTimezoneOffset();r&&(u=uR(r,u),i=function HH(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function zH(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(uR(e,i)-i))}(i,r,!0));let l="";return s.forEach(h=>{const g=function $H(t){if(_w[t])return _w[t];let e;switch(t){case"G":case"GG":case"GGG":e=Yt(Ot.Eras,Gt.Abbreviated);break;case"GGGG":e=Yt(Ot.Eras,Gt.Wide);break;case"GGGGG":e=Yt(Ot.Eras,Gt.Narrow);break;case"y":e=Zn(Rt.FullYear,1,0,!1,!0);break;case"yy":e=Zn(Rt.FullYear,2,0,!0,!0);break;case"yyy":e=Zn(Rt.FullYear,3,0,!1,!0);break;case"yyyy":e=Zn(Rt.FullYear,4,0,!1,!0);break;case"Y":e=L_(1);break;case"YY":e=L_(2,!0);break;case"YYY":e=L_(3);break;case"YYYY":e=L_(4);break;case"M":case"L":e=Zn(Rt.Month,1,1);break;case"MM":case"LL":e=Zn(Rt.Month,2,1);break;case"MMM":e=Yt(Ot.Months,Gt.Abbreviated);break;case"MMMM":e=Yt(Ot.Months,Gt.Wide);break;case"MMMMM":e=Yt(Ot.Months,Gt.Narrow);break;case"LLL":e=Yt(Ot.Months,Gt.Abbreviated,li.Standalone);break;case"LLLL":e=Yt(Ot.Months,Gt.Wide,li.Standalone);break;case"LLLLL":e=Yt(Ot.Months,Gt.Narrow,li.Standalone);break;case"w":e=mw(1);break;case"ww":e=mw(2);break;case"W":e=mw(1,!0);break;case"d":e=Zn(Rt.Date,1);break;case"dd":e=Zn(Rt.Date,2);break;case"c":case"cc":e=Zn(Rt.Day,1);break;case"ccc":e=Yt(Ot.Days,Gt.Abbreviated,li.Standalone);break;case"cccc":e=Yt(Ot.Days,Gt.Wide,li.Standalone);break;case"ccccc":e=Yt(Ot.Days,Gt.Narrow,li.Standalone);break;case"cccccc":e=Yt(Ot.Days,Gt.Short,li.Standalone);break;case"E":case"EE":case"EEE":e=Yt(Ot.Days,Gt.Abbreviated);break;case"EEEE":e=Yt(Ot.Days,Gt.Wide);break;case"EEEEE":e=Yt(Ot.Days,Gt.Narrow);break;case"EEEEEE":e=Yt(Ot.Days,Gt.Short);break;case"a":case"aa":case"aaa":e=Yt(Ot.DayPeriods,Gt.Abbreviated);break;case"aaaa":e=Yt(Ot.DayPeriods,Gt.Wide);break;case"aaaaa":e=Yt(Ot.DayPeriods,Gt.Narrow);break;case"b":case"bb":case"bbb":e=Yt(Ot.DayPeriods,Gt.Abbreviated,li.Standalone,!0);break;case"bbbb":e=Yt(Ot.DayPeriods,Gt.Wide,li.Standalone,!0);break;case"bbbbb":e=Yt(Ot.DayPeriods,Gt.Narrow,li.Standalone,!0);break;case"B":case"BB":case"BBB":e=Yt(Ot.DayPeriods,Gt.Abbreviated,li.Format,!0);break;case"BBBB":e=Yt(Ot.DayPeriods,Gt.Wide,li.Format,!0);break;case"BBBBB":e=Yt(Ot.DayPeriods,Gt.Narrow,li.Format,!0);break;case"h":e=Zn(Rt.Hours,1,-12);break;case"hh":e=Zn(Rt.Hours,2,-12);break;case"H":e=Zn(Rt.Hours,1);break;case"HH":e=Zn(Rt.Hours,2);break;case"m":e=Zn(Rt.Minutes,1);break;case"mm":e=Zn(Rt.Minutes,2);break;case"s":e=Zn(Rt.Seconds,1);break;case"ss":e=Zn(Rt.Seconds,2);break;case"S":e=Zn(Rt.FractionalSeconds,1);break;case"SS":e=Zn(Rt.FractionalSeconds,2);break;case"SSS":e=Zn(Rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=V_(ks.Short);break;case"ZZZZZ":e=V_(ks.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=V_(ks.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=V_(ks.Long);break;default:return null}return _w[t]=e,e}(h);l+=g?g(i,n,u):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function N_(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Vs(t,e){const n=function wH(t){return ui(t)[Kt.LocaleId]}(t);if(If[n]=If[n]||{},If[n][e])return If[n][e];let r="";switch(e){case"shortDate":r=M_(t,Hi.Short);break;case"mediumDate":r=M_(t,Hi.Medium);break;case"longDate":r=M_(t,Hi.Long);break;case"fullDate":r=M_(t,Hi.Full);break;case"shortTime":r=R_(t,Hi.Short);break;case"mediumTime":r=R_(t,Hi.Medium);break;case"longTime":r=R_(t,Hi.Long);break;case"fullTime":r=R_(t,Hi.Full);break;case"short":const i=Vs(t,"shortTime"),o=Vs(t,"shortDate");r=k_(O_(t,Hi.Short),[i,o]);break;case"medium":const s=Vs(t,"mediumTime"),a=Vs(t,"mediumDate");r=k_(O_(t,Hi.Medium),[s,a]);break;case"long":const u=Vs(t,"longTime"),l=Vs(t,"longDate");r=k_(O_(t,Hi.Long),[u,l]);break;case"full":const h=Vs(t,"fullTime"),g=Vs(t,"fullDate");r=k_(O_(t,Hi.Full),[h,g])}return r&&(If[n][e]=r),r}function k_(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function Mo(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Zn(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function LH(t,e){switch(t){case Rt.FullYear:return e.getFullYear();case Rt.Month:return e.getMonth();case Rt.Date:return e.getDate();case Rt.Hours:return e.getHours();case Rt.Minutes:return e.getMinutes();case Rt.Seconds:return e.getSeconds();case Rt.FractionalSeconds:return e.getMilliseconds();case Rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===Rt.Hours)0===a&&-12===n&&(a=12);else if(t===Rt.FractionalSeconds)return function FH(t,e){return Mo(t,3).substring(0,e)}(a,e);const u=mo(s,Hn.MinusSign);return Mo(a,e,u,r,i)}}function Yt(t,e,n=li.Format,r=!1){return function(i,o){return function UH(t,e,n,r,i,o){switch(n){case Ot.Months:return function TH(t,e,n){const r=ui(t),o=_o([r[Kt.MonthsFormat],r[Kt.MonthsStandalone]],e);return _o(o,n)}(e,i,r)[t.getMonth()];case Ot.Days:return function bH(t,e,n){const r=ui(t),o=_o([r[Kt.DaysFormat],r[Kt.DaysStandalone]],e);return _o(o,n)}(e,i,r)[t.getDay()];case Ot.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const l=function PH(t){const e=ui(t);return sR(e),(e[Kt.ExtraData][2]||[]).map(r=>"string"==typeof r?gw(r):[gw(r[0]),gw(r[1])])}(e),h=function xH(t,e,n){const r=ui(t);sR(r);const o=_o([r[Kt.ExtraData][0],r[Kt.ExtraData][1]],e)||[];return _o(o,n)||[]}(e,i,r),g=l.findIndex(m=>{if(Array.isArray(m)){const[y,b]=m,D=s>=y.hours&&a>=y.minutes,x=s<b.hours||s===b.hours&&a<b.minutes;if(y.hours<b.hours){if(D&&x)return!0}else if(D||x)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function CH(t,e,n){const r=ui(t),o=_o([r[Kt.DayPeriodsFormat],r[Kt.DayPeriodsStandalone]],e);return _o(o,n)}(e,i,r)[s<12?0:1];case Ot.Eras:return function DH(t,e){return _o(ui(t)[Kt.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,t,e,n,r)}}function V_(t){return function(e,n,r){const i=-1*r,o=mo(n,Hn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ks.Short:return(i>=0?"+":"")+Mo(s,2,o)+Mo(Math.abs(i%60),2,o);case ks.ShortGMT:return"GMT"+(i>=0?"+":"")+Mo(s,1,o);case ks.Long:return"GMT"+(i>=0?"+":"")+Mo(s,2,o)+":"+Mo(Math.abs(i%60),2,o);case ks.Extended:return 0===r?"Z":(i>=0?"+":"")+Mo(s,2,o)+":"+Mo(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const BH=0,F_=4;function aR(t){return N_(t.getFullYear(),t.getMonth(),t.getDate()+(F_-t.getDay()))}function mw(t,e=!1){return function(n,r){let i;if(e){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{const o=aR(n),s=function jH(t){const e=N_(t,BH,1).getDay();return N_(t,0,1+(e<=F_?F_:F_+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Mo(i,t,mo(r,Hn.MinusSign))}}function L_(t,e=!1){return function(n,r){return Mo(aR(n).getFullYear(),t,mo(r,Hn.MinusSign),e)}}const _w={};function uR(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function cR(t){return t instanceof Date&&!isNaN(t.valueOf())}function fR(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class s9{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new s9(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),mR(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{mR(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Q(xo),Q(Rs),Q(S_))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function mR(t,e){t.context.$implicit=e.item}let qi=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new a9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){_R("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){_R("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Q(xo),Q(Rs))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class a9{constructor(){this.$implicit=null,this.ngIf=null}}function _R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Oe(e)}'.`)}const I9=new de("DATE_PIPE_DEFAULT_TIMEZONE"),E9=new de("DATE_PIPE_DEFAULT_OPTIONS");let Aw=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(null==n||""===n||n!=n)return null;try{return VH(n,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function Ro(t,e){return new G(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Os,16),Q(I9,24),Q(E9,24))};static#t=this.\u0275pipe=Xn({name:"date",type:t,pure:!0,standalone:!0})}return t})(),B_=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({})}return t})();function j_(t){return"server"===t}let N9=(()=>{class t{static#e=this.\u0275prov=Pe({token:t,providedIn:"root",factory:()=>new k9(ce(zi),window)})}return t})();class k9{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function V9(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class ER{}class o8 extends pH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rw extends o8{static makeCurrent(){!function fH(t){lw||(lw=t)}(new Rw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function s8(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}();return null==n?null:function a8(t){H_=H_||document.createElement("a"),H_.setAttribute("href",t);const e=H_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fR(document.cookie,e)}}let H_,Cf=null,c8=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Ow=new de("EventManagerPlugins");let DR=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(ce(Ow),ce(Dt))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class AR{constructor(e){this._doc=e}}const Nw="ng-app-id";let SR=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=j_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Nw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Nw),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Nw,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(ce(zi),ce(Wm),ce(kS,8),ce(Ao))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const kw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vw=/%COMP%/g,f8=new de("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function xR(t,e){return e.map(n=>n.replace(Vw,t))}let MR=(()=>{class t{constructor(n,r,i,o,s,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=j_(a),this.defaultRenderer=new Fw(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hr.ShadowDom&&(r={...r,encapsulation:hr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof OR?i.applyToHost(n):i instanceof Lw&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case hr.Emulated:o=new OR(u,l,r,this.appId,h,s,a,g);break;case hr.ShadowDom:return new _8(u,l,n,r,s,a,this.nonce,g);default:o=new Lw(u,l,r,h,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(ce(DR),ce(SR),ce(Wm),ce(f8),ce(zi),ce(Ao),ce(Dt),ce(kS))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();class Fw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(kw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(RR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(RR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=kw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=kw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(da.DashCase|da.Important)?e.style.setProperty(n,r,i&da.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&da.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=ma().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function RR(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class _8 extends Fw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=xR(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Lw extends Fw{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?xR(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class OR extends Lw{constructor(e,n,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=function p8(t){return"_ngcontent-%COMP%".replace(Vw,t)}(l),this.hostAttr=function g8(t){return"_nghost-%COMP%".replace(Vw,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let y8=(()=>{class t extends AR{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(ce(zi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const NR=["alt","control","meta","shift"],v8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},I8={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let E8=(()=>{class t extends AR{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ma().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),NR.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=v8[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),NR.forEach(s=>{s!==i&&(0,I8[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(ce(zi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const VR=[{provide:Ao,useValue:"browser"},{provide:NS,useValue:function w8(){Rw.makeCurrent()},multi:!0},{provide:zi,useFactory:function b8(){return function a3(t){wI=t}(document),document},deps:[]}],T8=SM(Xz,"browser",VR),D8=new de(""),FR=[{provide:C_,useClass:class u8{addToWindow(e){$t.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new G(5103,!1);return o},$t.getAllAngularTestabilities=()=>e.getAllTestabilities(),$t.getAllAngularRootElements=()=>e.getAllRootElements(),$t.frameworkStabilizers||($t.frameworkStabilizers=[]),$t.frameworkStabilizers.push(r=>{const i=$t.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ma().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:CM,useClass:XE,deps:[Dt,ew,C_]},{provide:XE,useClass:XE,deps:[Dt,ew,C_]}],LR=[{provide:RI,useValue:"root"},{provide:Ps,useFactory:function C8(){return new Ps},deps:[]},{provide:Ow,useClass:y8,multi:!0,deps:[zi,Dt,Ao]},{provide:Ow,useClass:E8,multi:!0,deps:[zi]},MR,SR,DR,{provide:jS,useExisting:MR},{provide:ER,useClass:c8,deps:[]},[]];let UR=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Wm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ce(D8,12))};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({providers:[...LR,...FR],imports:[B_,eH]})}return t})(),BR=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(ce(zi))};static#t=this.\u0275prov=Pe({token:t,factory:function(r){let i=null;return i=r?new r:function S8(){return new BR(ce(zi))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:N8}=Array,{getPrototypeOf:k8,prototype:V8,keys:F8}=Object;function HR(t){if(1===t.length){const e=t[0];if(N8(e))return{args:e,keys:null};if(function L8(t){return t&&"object"==typeof t&&k8(t)===V8}(e)){const n=F8(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:U8}=Array;function qR(t){return he(e=>function B8(t,e){return U8(e)?t(...e):t(e)}(t,e))}function GR(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Bw(...t){const e=Ri(t),n=ro(t),{args:r,keys:i}=HR(t);if(0===r.length)return I([],e);const o=new We(function j8(t,e,n=Cn){return r=>{WR(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)WR(e,()=>{const l=I(t[u],e);let h=!1;l.subscribe(ge(r,g=>{o[u]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>GR(i,s):Cn));return n?o.pipe(qR(n)):o}function WR(t,e,n){t?Qr(n,t,e):e()}const q_=Z(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function jw(...t){return function $8(){return Yr(1)}()(I(t,Ri(t)))}function ZR(t){return new We(e=>{_t(t()).subscribe(e)})}function ju(t,e){const n=C(t)?t:()=>t,r=i=>i.error(n());return new We(e?i=>e.schedule(r,0,i):r)}function $w(){return ee((t,e)=>{let n=null;t._refCount++;const r=ge(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class KR extends We{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,te(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wt;const n=this.getSubject();e.add(this.source.subscribe(ge(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wt.EMPTY)}return e}refCount(){return $w()(this)}}function jl(t){return t<=0?()=>bn:ee((e,n)=>{let r=0;e.subscribe(ge(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function G_(...t){const e=Ri(t);return ee((n,r)=>{(e?jw(t,n,e):jw(t,n)).subscribe(r)})}function yo(t,e){return ee((n,r)=>{let i=0;n.subscribe(ge(r,o=>t.call(e,o,i++)&&r.next(o)))})}function W_(t){return ee((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function QR(t=z8){return ee((e,n)=>{let r=!1;e.subscribe(ge(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function z8(){return new q_}function ya(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yo((i,o)=>t(i,o,r)):Cn,jl(1),n?W_(e):QR(()=>new q_))}function $l(t,e){return C(e)?xt(t,e,1):xt(t,1)}function _r(t,e,n){const r=C(t)||e||n?{next:t,error:e,complete:n}:t;return r?ee((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Cn}function Gi(t){return ee((e,n)=>{let o,r=null,i=!1;r=e.subscribe(ge(n,void 0,void 0,s=>{o=_t(t(s,Gi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Z_(t,e){return ee(function H8(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ge(s,h=>{const g=l++;u=a?t(u,h,g):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}function zw(t){return t<=0?()=>bn:ee((e,n)=>{let r=[];e.subscribe(ge(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bf(t){return ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const tt="primary",Tf=Symbol("RouteTitle");class Z8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function zl(t){return new Z8(t)}function K8(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function es(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!YR(t[i],e[i]))return!1;return!0}function YR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function JR(t){return t.length>0?t[t.length-1]:null}function va(t){return function O8(t){return!!t&&(t instanceof We||C(t.lift)&&C(t.subscribe))}(t)?t:sf(t)?I(Promise.resolve(t)):A(t)}const Y8={exact:function tO(t,e,n){if(!$u(t.segments,e.segments)||!K_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!tO(t.children[r],e.children[r],n))return!1;return!0},subset:nO},XR={exact:function J8(t,e){return es(t,e)},subset:function X8(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>YR(t[n],e[n]))},ignored:()=>!0};function eO(t,e,n){return Y8[n.paths](t.root,e.root,n.matrixParams)&&XR[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function nO(t,e,n){return rO(t,e,e.segments,n)}function rO(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!$u(i,n)||e.hasChildren()||!K_(i,n,r))}if(t.segments.length===n.length){if(!$u(t.segments,n)||!K_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!nO(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!($u(t.segments,i)&&K_(t.segments,i,r)&&t.children[tt])&&rO(t.children[tt],e,o,r)}}function K_(t,e,n){return e.every((r,i)=>XR[n](t[i].parameters,r.parameters))}class Hl{constructor(e=new Lt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return nq.serialize(this)}}class Lt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Q_(this)}}class Df{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=zl(this.parameters)),this._parameterMap}toString(){return sO(this)}}function $u(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Af=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return new Hw},providedIn:"root"})}return t})();class Hw{parse(e){const n=new fq(e);return new Hl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Sf(e.root,!0)}`,r=function oq(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Y_(n)}=${Y_(i)}`).join("&"):`${Y_(n)}=${Y_(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function rq(t){return encodeURI(t)}(e.fragment)}`:""}`}}const nq=new Hw;function Q_(t){return t.segments.map(e=>sO(e)).join("/")}function Sf(t,e){if(!t.hasChildren())return Q_(t);if(e){const n=t.children[tt]?Sf(t.children[tt],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==tt&&r.push(`${i}:${Sf(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function tq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===tt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==tt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===tt?[Sf(t.children[tt],!1)]:[`${i}:${Sf(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[tt]?`${Q_(t)}/${n[0]}`:`${Q_(t)}/(${n.join("//")})`}}function iO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Y_(t){return iO(t).replace(/%3B/gi,";")}function qw(t){return iO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function J_(t){return decodeURIComponent(t)}function oO(t){return J_(t.replace(/\+/g,"%20"))}function sO(t){return`${qw(t.path)}${function iq(t){return Object.keys(t).map(e=>`;${qw(e)}=${qw(t[e])}`).join("")}(t.parameters)}`}const sq=/^[^\/()?;#]+/;function Gw(t){const e=t.match(sq);return e?e[0]:""}const aq=/^[^\/()?;=#]+/,cq=/^[^=?&#]+/,dq=/^[^&#]+/;class fq{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Lt([],{}):new Lt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[tt]=new Lt(e,n)),r}parseSegment(){const e=Gw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Df(J_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function uq(t){const e=t.match(aq);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Gw(this.remaining);i&&(r=i,this.capture(r))}e[J_(n)]=J_(r)}parseQueryParam(e){const n=function lq(t){const e=t.match(cq);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function hq(t){const e=t.match(dq);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=oO(n),o=oO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gw(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=tt);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[tt]:new Lt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}}function aO(t){return t.segments.length>0?new Lt([],{[tt]:t}):t}function uO(t){const e={};for(const r of Object.keys(t.children)){const o=uO(t.children[r]);if(r===tt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function pq(t){if(1===t.numberOfChildren&&t.children[tt]){const e=t.children[tt];return new Lt(t.segments.concat(e.segments),e.children)}return t}(new Lt(t.segments,e))}function zu(t){return t instanceof Hl}function cO(t){let e;const i=aO(function n(o){const s={};for(const u of o.children){const l=n(u);s[u.outlet]=l}const a=new Lt(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function lO(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Ww(i,i,i,n,r);const o=function mq(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new hO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new hO(n,e,r)}(e);if(o.toRoot())return Ww(i,i,new Lt([],{}),n,r);const s=function _q(t,e,n){if(t.isAbsolute)return new ey(e,!0,0);if(!n)return new ey(e,!1,NaN);if(null===n.parent)return new ey(n,!0,0);const r=X_(t.commands[0])?0:1;return function yq(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new ey(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?xf(s.segmentGroup,s.index,o.commands):fO(s.segmentGroup,s.index,o.commands);return Ww(i,s.segmentGroup,a,n,r)}function X_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pf(t){return"object"==typeof t&&null!=t&&t.outlets}function Ww(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=t===e?n:dO(t,e,n);const a=aO(uO(s));return new Hl(a,o,i)}function dO(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:dO(o,e,n)}),new Lt(t.segments,r)}class hO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&X_(r[0]))throw new G(4003,!1);const i=r.find(Pf);if(i&&i!==JR(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ey{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function fO(t,e,n){if(t||(t=new Lt([],{})),0===t.segments.length&&t.hasChildren())return xf(t,e,n);const r=function Iq(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Pf(a))break;const u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!gO(u,l,s))return o;r+=2}else{if(!gO(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new Lt(t.segments.slice(0,r.pathIndex),{});return o.children[tt]=new Lt(t.segments.slice(r.pathIndex),t.children),xf(o,0,i)}return r.match&&0===i.length?new Lt(t.segments,{}):r.match&&!t.hasChildren()?Zw(t,e,n):r.match?xf(t,0,i):Zw(t,e,n)}function xf(t,e,n){if(0===n.length)return new Lt(t.segments,{});{const r=function vq(t){return Pf(t[0])?t[0].outlets:{[tt]:t}}(n),i={};if(Object.keys(r).some(o=>o!==tt)&&t.children[tt]&&1===t.numberOfChildren&&0===t.children[tt].segments.length){const o=xf(t.children[tt],e,n);return new Lt(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=fO(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Lt(t.segments,i)}}function Zw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Pf(o)){const u=Eq(o.outlets);return new Lt(r,u)}if(0===i&&X_(n[0])){r.push(new Df(t.segments[e].path,pO(n[0]))),i++;continue}const s=Pf(o)?o.outlets[tt]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&X_(a)?(r.push(new Df(s,pO(a))),i+=2):(r.push(new Df(s,{})),i++)}return new Lt(r,{})}function Eq(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Zw(new Lt([],{}),0,r))}),e}function pO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function gO(t,e,n){return t==n.path&&es(e,n.parameters)}const Mf="imperative";class ts{constructor(e,n){this.id=e,this.url=n}}class ty extends ts{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ia extends ts{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rf extends ts{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ql extends ts{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class ny extends ts{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mO extends ts{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wq extends ts{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cq extends ts{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bq extends ts{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tq extends ts{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dq{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Aq{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sq{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pq{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xq{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mq{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _O{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Kw{}class Qw{constructor(e){this.url=e}}class Rq{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Of,this.attachRef=null}}let Of=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Rq,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class yO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Yw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Yw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Jw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jw(e,this._root).map(n=>n.value)}}function Yw(t,e){if(t===e.value)return e;for(const n of e.children){const r=Yw(t,n);if(r)return r}return null}function Jw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Jw(t,n);if(r.length)return r.unshift(e),r}return[]}class Fs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Gl(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class vO extends yO{constructor(e,n){super(e),this.snapshot=n,Xw(this,e)}toString(){return this.snapshot.toString()}}function IO(t,e){const n=function Oq(t,e){const s=new ry([],{},{},"",{},tt,e,null,{});return new wO("",new Fs(s,[]))}(0,e),r=new v([new Df("",{})]),i=new v({}),o=new v({}),s=new v({}),a=new v(""),u=new Ea(r,i,s,a,o,tt,e,n.root);return u.snapshot=n.root,new vO(new Fs(u,[]),n)}class Ea{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(he(l=>l[Tf]))??A(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(he(e=>zl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(he(e=>zl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function EO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Nq(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ry{get title(){return this.data?.[Tf]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wO extends yO{constructor(e,n){super(n),this.url=e,Xw(this,n)}toString(){return CO(this._root)}}function Xw(t,e){e.value._routerState=t,e.children.forEach(n=>Xw(t,n))}function CO(t){const e=t.children.length>0?` { ${t.children.map(CO).join(", ")} } `:"";return`${t.value}${e}`}function eC(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,es(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),es(e.params,n.params)||t.paramsSubject.next(n.params),function Q8(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!es(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),es(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tC(t,e){const n=es(t.params,e.params)&&function eq(t,e){return $u(t,e)&&t.every((n,r)=>es(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||tC(t.parent,e.parent))}let nC=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=tt,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.parentContexts=we(Of),this.location=we(xo),this.changeDetector=we(T_),this.environmentInjector=we(Bi),this.inputBinder=we(iy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new kq(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ue({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ii]})}return t})();class kq{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Ea?this.route:e===Of?this.childContexts:this.parent.get(e,n)}}const iy=new de("");let bO=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Bw([r.queryParams,r.params,r.data]).pipe(Te(([o,s,a],u)=>(a={...o,...s,...a},0===u?A(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function hH(t){const e=ht(t);if(!e)return null;const n=new Xh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function Nf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Fq(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Nf(t,r,i);return Nf(t,r)})}(t,e,n);return new Fs(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Nf(t,a)),s}}const r=function Lq(t){return new Ea(new v(t.url),new v(t.params),new v(t.queryParams),new v(t.fragment),new v(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Nf(t,o));return new Fs(r,i)}}const rC="ngNavigationCancelingError";function TO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=DO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function DO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[rC]=!0,r.cancellationCode=e,n&&(r.url=n),r}function AO(t){return t&&t[rC]}let SO=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["ng-component"]],standalone:!0,features:[A1],decls:1,vars:0,template:function(r,i){1&r&&Ce(0,"router-outlet")},dependencies:[nC],encapsulation:2})}return t})();function iC(t){const e=t.children&&t.children.map(iC),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==tt&&(n.component=SO),n}function Oo(t){return t.outlet||tt}function kf(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Gq{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),eC(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Gl(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Gl(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mq(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Pq(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(eC(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),eC(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=kf(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class PO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oy{constructor(e,n){this.component=e,this.route=n}}function Wq(t,e,n){const r=t._root;return Vf(r,e?e._root:null,n,[r.value])}function Wl(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function _g(t){return null!==bc(t)}(t)?e.get(t):t:r}function Vf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Gl(e);return t.children.forEach(s=>{(function Kq(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function Qq(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!$u(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$u(t.url,e.url)||!es(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tC(t,e)||!es(t.queryParams,e.queryParams);default:return!tC(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new PO(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Vf(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oy(a.outlet.component,s))}else s&&Ff(e,a,i),i.canActivateChecks.push(new PO(r)),Vf(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ff(a,n.getContext(s),i)),i}function Ff(t,e,n){const r=Gl(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Ff(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new oy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Lf(t){return"function"==typeof t}function xO(t){return t instanceof q_||"EmptyError"===t?.name}const sy=Symbol("INITIAL_VALUE");function Zl(){return Te(t=>Bw(t.map(e=>e.pipe(jl(1),G_(sy)))).pipe(he(e=>{for(const n of e)if(!0!==n){if(n===sy)return sy;if(!1===n||n instanceof Hl)return n}return!0}),yo(e=>e!==sy),jl(1)))}function MO(t){return function Ai(...t){return Si(t)}(_r(e=>{if(zu(e))throw TO(0,e)}),he(e=>!0===e))}class ay{constructor(e){this.segmentGroup=e||null}}class RO{constructor(e){this.urlTree=e}}function Kl(t){return ju(new ay(t))}function OO(t){return ju(new RO(t))}class mG{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new G(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return A(r);if(i.numberOfChildren>1||!i.children[tt])return ju(new G(4e3,!1));i=i.children[tt]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Hl(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Lt(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const oC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _G(t,e,n,r,i){const o=sC(t,e,n);return o.matched?(r=function Bq(t,e){return t.providers&&!t._injector&&(t._injector=RE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function fG(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?A(i.map(s=>{const a=Wl(s,t);return va(function nG(t){return t&&Lf(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Zl(),MO()):A(!0)}(r,e,n).pipe(he(s=>!0===s?o:{...oC}))):A(o)}function sC(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...oC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||K8)(n,t,e);if(!i)return{...oC};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function NO(t,e,n,r){return n.length>0&&function IG(t,e,n){return n.some(r=>uy(t,e,r)&&Oo(r)!==tt)}(t,n,r)?{segmentGroup:new Lt(e,vG(r,new Lt(n,t.children))),slicedSegments:[]}:0===n.length&&function EG(t,e,n){return n.some(r=>uy(t,e,r))}(t,n,r)?{segmentGroup:new Lt(t.segments,yG(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Lt(t.segments,t.children),slicedSegments:n}}function yG(t,e,n,r,i){const o={};for(const s of r)if(uy(t,n,s)&&!i[Oo(s)]){const a=new Lt([],{});o[Oo(s)]=a}return{...i,...o}}function vG(t,e){const n={};n[tt]=e;for(const r of t)if(""===r.path&&Oo(r)!==tt){const i=new Lt([],{});n[Oo(r)]=i}return n}function uy(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class TG{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new mG(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,!1)}recognize(){const e=NO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,tt).pipe(Gi(n=>{if(n instanceof RO)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof ay?this.noMatchError(n):n}),he(n=>{const r=new ry([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tt,this.rootComponentType,null,{}),i=new Fs(r,n),o=new wO("",i),s=function gq(t,e,n=null,r=null){return lO(cO(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,tt).pipe(Gi(r=>{throw r instanceof ay?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=EO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return I(i).pipe($l(o=>{const s=r.children[o],a=function Hq(t,e){const n=t.filter(r=>Oo(r)===e);return n.push(...t.filter(r=>Oo(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),Z_((o,s)=>(o.push(...s),o)),W_(null),function q8(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yo((i,o)=>t(i,o,r)):Cn,zw(1),n?W_(e):QR(()=>new q_))}(),xt(o=>{if(null===o)return Kl(r);const s=kO(o);return function DG(t){t.sort((e,n)=>e.value.outlet===tt?-1:n.value.outlet===tt?1:e.value.outlet.localeCompare(n.value.outlet))}(s),A(s)}))}processSegment(e,n,r,i,o,s){return I(n).pipe($l(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Gi(u=>{if(u instanceof ay)return A(null);throw u}))),ya(a=>!!a),Gi(a=>{if(xO(a))return function CG(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?A([]):Kl(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function wG(t,e,n,r){return!!(Oo(t)===r||r!==tt&&uy(e,n,t))&&("**"===t.path||sC(e,t,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Kl(i):Kl(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?OO(o):this.applyRedirects.lineralizeSegments(r,o).pipe(xt(s=>{const a=new Lt(s,{});return this.processSegment(e,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:h}=sC(n,i,o);if(!a)return Kl(n);const g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h);return i.redirectTo.startsWith("/")?OO(g):this.applyRedirects.lineralizeSegments(i,g).pipe(xt(m=>this.processSegment(e,r,n,m.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?JR(i).parameters:{};a=A({snapshot:new ry(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VO(r),Oo(r),r.component??r._loadedComponent??null,r,FO(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=_G(n,r,i,e).pipe(he(({matched:u,consumedSegments:l,remainingSegments:h,parameters:g})=>u?{snapshot:new ry(l,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VO(r),Oo(r),r.component??r._loadedComponent??null,r,FO(r)),consumedSegments:l,remainingSegments:h}:null));return a.pipe(Te(u=>null===u?Kl(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Te(({routes:l})=>{const h=r._loadedInjector??e,{snapshot:g,consumedSegments:m,remainingSegments:y}=u,{segmentGroup:b,slicedSegments:D}=NO(n,m,y,l);if(0===D.length&&b.hasChildren())return this.processChildren(h,l,b).pipe(he(L=>null===L?null:[new Fs(g,L)]));if(0===l.length&&0===D.length)return A([new Fs(g,[])]);const x=Oo(r)===o;return this.processSegment(h,l,b,D,x?tt:o,!0).pipe(he(L=>[new Fs(g,L)]))}))))}getChildConfig(e,n,r){return n.children?A({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?A({routes:n._loadedRoutes,injector:n._loadedInjector}):function hG(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?A(!0):A(i.map(s=>{const a=Wl(s,t);return va(function Jq(t){return t&&Lf(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Zl(),MO())}(e,n,r).pipe(xt(i=>i?this.configLoader.loadChildren(e,n).pipe(_r(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function gG(t){return ju(DO(!1,3))}())):A({routes:[],injector:e})}}function AG(t){const e=t.value.routeConfig;return e&&""===e.path}function kO(t){const e=[],n=new Set;for(const r of t){if(!AG(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=kO(r.children);e.push(new Fs(r.value,i))}return e.filter(r=>!n.has(r))}function VO(t){return t.data||{}}function FO(t){return t.resolve||{}}function LO(t){return"string"==typeof t.title||null===t.title}function aC(t){return Te(e=>{const n=t(e);return n?I(n).pipe(he(()=>e)):A(e)})}const Ql=new de("ROUTES");let uC=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=we(vM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return A(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=va(n.loadComponent()).pipe(he(UO),_r(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),bf(()=>{this.componentLoaders.delete(n)})),i=new KR(r,()=>new W).pipe($w());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function NG(t,e,n,r){return va(t.loadChildren()).pipe(he(UO),xt(i=>i instanceof T1||Array.isArray(i)?A(i):I(e.compileModuleAsync(i))),he(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Ql,[],{optional:!0,self:!0}).flat()),{routes:s.map(iC),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(bf(()=>{this.childrenLoaders.delete(r)})),s=new KR(o,()=>new W).pipe($w());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UO(t){return function kG(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let cy=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new W,this.transitionAbortSubject=new W,this.configLoader=we(uC),this.environmentInjector=we(Bi),this.urlSerializer=we(Af),this.rootContexts=we(Of),this.inputBindingEnabled=null!==we(iy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Aq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Dq(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new v({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yo(o=>0!==o.id),he(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),Te(o=>{this.currentTransition=o;let s=!1,a=!1;return A(o).pipe(_r(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Te(u=>{const l=u.currentBrowserUrl.toString(),h=!n.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!h&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new ql(u.id,this.urlSerializer.serialize(u.rawUrl),m,0)),u.resolve(null),bn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return A(u).pipe(Te(m=>{const y=this.transitions?.getValue();return this.events.next(new ty(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?bn:Promise.resolve(m)}),function SG(t,e,n,r,i,o){return xt(s=>function bG(t,e,n,r,i,o,s="emptyOnly"){return new TG(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(he(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),_r(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new mO(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:b,restoredState:D,extras:x}=u,L=new ty(m,this.urlSerializer.serialize(y),b,D);this.events.next(L);const k=IO(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:k,urlAfterRedirects:y,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},A(o)}{const m="";return this.events.next(new ql(u.id,this.urlSerializer.serialize(u.extractedUrl),m,1)),u.resolve(null),bn}}),_r(u=>{const l=new wq(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),he(u=>(this.currentTransition=o={...u,guards:Wq(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function iG(t,e){return xt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?A({...n,guardsResult:!0}):function oG(t,e,n,r){return I(t).pipe(xt(i=>function dG(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?A(o.map(a=>{const u=kf(e)??i,l=Wl(a,u);return va(function tG(t){return t&&Lf(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):u.runInContext(()=>l(t,e,n,r))).pipe(ya())})).pipe(Zl()):A(!0)}(i.component,i.route,n,e,r)),ya(i=>!0!==i,!0))}(s,r,i,t).pipe(xt(a=>a&&function Yq(t){return"boolean"==typeof t}(a)?function sG(t,e,n,r){return I(e).pipe($l(i=>jw(function uG(t,e){return null!==t&&e&&e(new Sq(t)),A(!0)}(i.route.parent,r),function aG(t,e){return null!==t&&e&&e(new xq(t)),A(!0)}(i.route,r),function lG(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Zq(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>ZR(()=>A(s.guards.map(u=>{const l=kf(s.node)??n,h=Wl(u,l);return va(function eG(t){return t&&Lf(t.canActivateChild)}(h)?h.canActivateChild(r,t):l.runInContext(()=>h(r,t))).pipe(ya())})).pipe(Zl())));return A(o).pipe(Zl())}(t,i.path,n),function cG(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return A(!0);const i=r.map(o=>ZR(()=>{const s=kf(e)??n,a=Wl(o,s);return va(function Xq(t){return t&&Lf(t.canActivate)}(a)?a.canActivate(e,t):s.runInContext(()=>a(e,t))).pipe(ya())}));return A(i).pipe(Zl())}(t,i.route,n))),ya(i=>!0!==i,!0))}(r,o,t,e):A(a)),he(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),_r(u=>{if(o.guardsResult=u.guardsResult,zu(u.guardsResult))throw TO(0,u.guardsResult);const l=new Cq(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),yo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),aC(u=>{if(u.guards.canActivateChecks.length)return A(u).pipe(_r(l=>{const h=new bq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Te(l=>{let h=!1;return A(l).pipe(function PG(t,e){return xt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return A(n);let o=0;return I(i).pipe($l(s=>function xG(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!LO(i)&&(o[Tf]=i.title),function MG(t,e,n,r){const i=function RG(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return A({});const o={};return I(i).pipe(xt(s=>function OG(t,e,n,r){const i=kf(e)??r,o=Wl(t,i);return va(o.resolve?o.resolve(e,n):i.runInContext(()=>o(e,n)))}(t[s],e,n,r).pipe(ya(),_r(a=>{o[s]=a}))),zw(1),function G8(t){return he(()=>t)}(o),Gi(s=>xO(s)?bn:ju(s)))}(o,t,e,r).pipe(he(s=>(t._resolvedData=s,t.data=EO(t,n).resolve,i&&LO(i)&&(t.data[Tf]=i.title),null)))}(s.route,r,t,e)),_r(()=>o++),zw(1),xt(s=>o===i.length?A(n):bn))})}(n.paramsInheritanceStrategy,this.environmentInjector),_r({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",2)}}))}),_r(l=>{const h=new Tq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),aC(u=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(_r(m=>{h.component=m}),he(()=>{})));for(const m of h.children)g.push(...l(m));return g};return Bw(l(u.targetSnapshot.root)).pipe(W_(),jl(1))}),aC(()=>this.afterPreactivation()),he(u=>{const l=function Vq(t,e,n){const r=Nf(t,e._root,n?n._root:void 0);return new vO(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),_r(()=>{this.events.next(new Kw)}),((t,e,n,r)=>he(i=>(new Gq(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),jl(1),_r({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ia(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function W8(t){return ee((e,n)=>{_t(t).subscribe(ge(n,()=>n.complete(),Me)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(_r(u=>{throw u}))),bf(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Gi(u=>{if(a=!0,AO(u))this.events.next(new Rf(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function Uq(t){return AO(t)&&zu(t.url)}(u)?this.events.next(new Qw(u.url)):o.resolve(!1);else{this.events.next(new ny(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(l){o.reject(l)}}return bn}))}))}cancelNavigationTransition(n,r,i){const o=new Rf(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BO(t){return t!==Mf}let jO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===tt);return r}getResolvedTitleForRoute(n){return n.data[Tf]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return we(VG)},providedIn:"root"})}return t})(),VG=(()=>{class t extends jO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(ce(BR))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),FG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return we(UG)},providedIn:"root"})}return t})();class LG{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let UG=(()=>{class t extends LG{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ly=new de("",{providedIn:"root",factory:()=>({})});let BG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:function(){return we(jG)},providedIn:"root"})}return t})(),jG=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Uf||{});function $O(t,e){t.events.pipe(yo(n=>n instanceof Ia||n instanceof Rf||n instanceof ny||n instanceof ql),he(n=>n instanceof Ia||n instanceof ql?Uf.COMPLETE:n instanceof Rf&&(0===n.code||1===n.code)?Uf.REDIRECTING:Uf.FAILED),yo(n=>n!==Uf.REDIRECTING),jl(1)).subscribe(()=>{e()})}function $G(t){throw t}function zG(t,e,n){return e.parse("/")}const HG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vn=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=we(yM),this.isNgZoneEnabled=!1,this._events=new W,this.options=we(ly,{optional:!0})||{},this.pendingTasks=we(E_),this.errorHandler=this.options.errorHandler||$G,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zG,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=we(BG),this.routeReuseStrategy=we(FG),this.titleStrategy=we(jO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=we(Ql,{optional:!0})?.flat()??[],this.navigationTransitions=we(cy),this.urlSerializer=we(Af),this.location=we(fw),this.componentInputBindingEnabled=!!we(iy,{optional:!0}),this.eventsSubscription=new wt,this.isNgZoneEnabled=we(Dt)instanceof Dt&&Dt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Hl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=IO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(zO(r)&&this._events.next(r));if(r instanceof ty)BO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof ql)this.rawUrlTree=i.rawUrl;else if(r instanceof mO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Kw)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Rf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Qw){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||BO(i.source)};this.scheduleNavigation(o,Mf,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof ny&&this.restoreHistory(i,!0),r instanceof Ia&&(this.navigated=!0),zO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mf,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(iC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{g=cO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),g=this.currentUrlTree.root}return lO(g,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=zu(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Mf,null,r)}navigate(n,r={skipLocationChange:!1}){return function GG(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new G(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...HG}:!1===r?{...qG}:r,zu(n))return eO(this.currentUrlTree,n,i);const o=this.parseUrl(n);return eO(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((g,m)=>{a=g,u=m});const h=this.pendingTasks.add();return $O(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zO(t){return!(t instanceof Kw||t instanceof Qw)}let No=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new W,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Ia&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function DS(t,e,n){return function P3(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?TS:Hh}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(vn),Q(Ea),function tl(t){return function z(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(ti(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(nr(),t)}("tabindex"),Q(Ss),Q(ji),Q(Bu))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ft("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Qo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Ul],skipLocationChange:["skipLocationChange","skipLocationChange",Ul],replaceUrl:["replaceUrl","replaceUrl",Ul],routerLink:"routerLink"},standalone:!0,features:[BP,ii]})}return t})();class HO{}let KG=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(yo(n=>n instanceof Ia),$l(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=RE(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return I(i).pipe(Yr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):A(null);const o=i.pipe(xt(s=>null===s?A(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?I([o,this.loader.loadComponent(r)]).pipe(Yr()):o})}static#e=this.\u0275fac=function(r){return new(r||t)(ce(vn),ce(vM),ce(Bi),ce(HO),ce(uC))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cC=new de("");let qO=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ty?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ia?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof ql&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof _O&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _O(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function fP(){throw new Error("invalid")}()};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function Ls(t,e){return{\u0275kind:t,\u0275providers:e}}function WO(){const t=we(Lr);return e=>{const n=t.get(Ll);if(e!==n.components[0])return;const r=t.get(vn),i=t.get(ZO);1===t.get(lC)&&r.initialNavigation(),t.get(KO,null,ct.Optional)?.setUpPreloading(),t.get(cC,null,ct.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ZO=new de("",{factory:()=>new W}),lC=new de("",{providedIn:"root",factory:()=>1}),KO=new de("");function XG(t){return Ls(0,[{provide:KO,useExisting:KG},{provide:HO,useExisting:t}])}const QO=new de("ROUTER_FORROOT_GUARD"),tW=[fw,{provide:Af,useClass:Hw},vn,Of,{provide:Ea,useFactory:function GO(t){return t.routerState.root},deps:[vn]},uC,[]];function nW(){return new DM("Router",vn)}let Bf=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[tW,[],{provide:Ql,multi:!0,useValue:n},{provide:QO,useFactory:sW,deps:[[vn,new Ii,new Sm]]},{provide:ly,useValue:r||{}},r?.useHash?{provide:Bu,useClass:_H}:{provide:Bu,useClass:rR},{provide:cC,useFactory:()=>{const t=we(N9),e=we(Dt),n=we(ly),r=we(cy),i=we(Af);return n.scrollOffset&&t.setOffset(n.scrollOffset),new qO(i,r,t,e,n)}},r?.preloadingStrategy?XG(r.preloadingStrategy).\u0275providers:[],{provide:DM,multi:!0,useFactory:nW},r?.initialNavigation?aW(r):[],r?.bindToComponentInputs?Ls(8,[bO,{provide:iy,useExisting:bO}]).\u0275providers:[],[{provide:YO,useFactory:WO},{provide:rw,multi:!0,useExisting:YO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ql,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ce(QO,8))};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({})}return t})();function sW(t){return"guarded"}function aW(t){return["disabled"===t.initialNavigation?Ls(3,[{provide:KE,multi:!0,useFactory:()=>{const e=we(vn);return()=>{e.setUpLocationChangeListener()}}},{provide:lC,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Ls(2,[{provide:lC,useValue:0},{provide:KE,multi:!0,deps:[Lr],useFactory:e=>{const n=e.get(gH,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(vn),o=e.get(ZO);$O(i,()=>{r(!0)}),e.get(cy).afterPreactivation=()=>(r(!0),o.closed?A(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const YO=new de("");var Y=Le(861),Br=Le(534);(0,Br.registerVersion)("firebase","10.9.0","app");class dW extends wt{constructor(e,n){super()}schedule(e,n=0){return this}}const dy={setInterval(t,e,...n){const{delegate:r}=dy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=dy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class JO extends dW{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return dy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&dy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Re(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const dC={now:()=>(dC.delegate||Date).now(),delegate:void 0};class jf{constructor(e,n=jf.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}jf.now=dC.now;class XO extends jf{constructor(e,n=jf.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const pW=new class fW extends XO{}(class hW extends JO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),eN=new XO(JO),Yl=new Il("ANGULARFIRE2_VERSION");function tN(t,e,n){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const hC=(t,e)=>{const n=e?[e]:(0,Br.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class hy{constructor(){return hC(gW)}}const gW="app-check";function Jl(){}class nN{zone;delegate;constructor(e,n=pW){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class mW{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jl,{},Jl,Jl)),n.pipe(_r({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $f=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new nN(Zone.current)),this.insideAngular=n.run(()=>new nN(Zone.current,eN)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ce(Dt))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Hu(t){return Xl().ngZone.run(()=>t())}function Wi(t){return function yW(t){return function(n){return(n=n.lift(new mW(t.ngZone))).pipe(lr(t.outsideAngular),Pn(t.insideAngular))}}(Xl())(t)}const vW=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Hu(()=>t.apply(void 0,r))},fC=(t,e)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(n||=Hu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jl,{},Jl,Jl))),r[o]=vW(r[o],n));const i=function _W(t){return Xl().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof We){const o=Xl();return i.pipe(lr(o.outsideAngular),Pn(o.insideAngular))}return Hu(()=>i)}return i instanceof We?i.pipe(Wi):i instanceof Promise?Hu(()=>new Promise((o,s)=>i.then(a=>Hu(()=>o(a)),a=>Hu(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Hu(()=>i)};var qu=Le(106);qu.Z.registerVersion("firebase","10.9.0","app-compat");const wW=["ngOnDestroy"];class rN{constructor(e){return e}}const fy=new de("angularfire2.app.options"),py=new de("angularfire2.app.name");function pC(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const s=qu.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qu.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){const a=!!module.hot;TW("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rN(s)}const TW=(t,...e)=>{},DW={provide:rN,useFactory:pC,deps:[fy,Dt,[new Ii,py]]};let AW=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:fy,useValue:n},{provide:py,useValue:r}]}}constructor(n){qu.Z.registerVersion("angularfire",Yl.full,"core"),qu.Z.registerVersion("angularfire",Yl.full,"app-compat"),qu.Z.registerVersion("angular",GI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ce(Ao))};static \u0275mod=_n({type:t});static \u0275inj=Dn({providers:[DW]})}return t})();function iN(t,e,n,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return function SW(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,s)||(oN("error",`${e} was already initialized on the ${n} Firebase App with different settings.${PW?" You may need to reload as Firebase is not HMR aware.":""}`),oN("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const PW=typeof module<"u"&&!!module.hot,oN=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Le(365);class xW extends W{constructor(e=1/0,n=1/0,r=dC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function sN(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,K({connector:()=>new xW(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function aN(t,e){return C(e)?Te(()=>t,e):Te(()=>t)}const uN=new de("angularfire2.auth.use-emulator"),cN=new de("angularfire2.auth.settings"),lN=new de("angularfire2.auth.tenant-id"),dN=new de("angularfire2.auth.langugage-code"),hN=new de("angularfire2.auth.use-device-language"),fN=new de("angularfire.auth.persistence"),pN=(t,e,n,r,i,o,s,a)=>iN(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]);let gC=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,h,g,m,y){const b=new W,D=A(void 0).pipe(Pn(s.outsideAngular),Te(()=>o.runOutsideAngular(()=>Promise.resolve().then(Le.bind(Le,365)))),he(()=>pC(n,o,r)),he(x=>pN(x,o,a,l,h,g,u,m)),sN({bufferSize:1,refCount:!1}));if(j_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{D.pipe(ya()).subscribe();const x=D.pipe(Te(B=>B.getRedirectResult().then(oe=>oe,()=>null)),Wi,sN({bufferSize:1,refCount:!1})),L=D.pipe(Te(B=>new We(oe=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(pe=>oe.next(pe),pe=>oe.error(pe),()=>oe.complete()))})))),k=D.pipe(Te(B=>new We(oe=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(pe=>oe.next(pe),pe=>oe.error(pe),()=>oe.complete()))}))));this.authState=x.pipe(aN(L),lr(s.outsideAngular),Pn(s.insideAngular)),this.user=x.pipe(aN(k),lr(s.outsideAngular),Pn(s.insideAngular)),this.idToken=this.user.pipe(Te(B=>B?I(B.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(Te(B=>B?I(B.getIdTokenResult()):A(null))),this.credential=w(x,b,this.authState.pipe(yo(B=>!B))).pipe(he(B=>B?.user?B:null),lr(s.outsideAngular),Pn(s.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(wW.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})}))(this,D,o,{spy:{apply:(x,L,k)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&k.then(B=>b.next(B))}}})}static \u0275fac=function(r){return new(r||t)(ce(fy),ce(py,8),ce(Ao),ce(Dt),ce($f),ce(uN,8),ce(cN,8),ce(lN,8),ce(dN,8),ce(hN,8),ce(fN,8),ce(hy,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function mC(){return ee((t,e)=>{let n,r=!1;t.subscribe(ge(e,i=>{const o=n;n=i,r&&e.next([o,i]),r=!0}))})}var Ie,gN=Le(537),ns=Le(879),At=Le(58),RW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={},_C=_C||{},Ye=RW||self;function gy(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function zf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var yC="closure_uid_"+(1e9*Math.random()>>>0),NW=0;function kW(t,e,n){return t.call.apply(t.bind,arguments)}function VW(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function jr(t,e,n){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kW:VW).apply(null,arguments)}function my(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function yr(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function wa(){this.s=this.s,this.o=this.o}wa.prototype.s=!1,wa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function OW(t){Object.prototype.hasOwnProperty.call(t,yC)&&t[yC]||(t[yC]=++NW)}(this)},wa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function _N(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(gy(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function $r(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$r.prototype.h=function(){this.defaultPrevented=!0};var LW=function(){if(!Ye.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ye.addEventListener("test",n,e),Ye.removeEventListener("test",n,e)}catch{}return t}();function Hf(t){return/^[\s\xa0]*$/.test(t)}function _y(){var t=Ye.navigator;return t&&(t=t.userAgent)?t:""}function rs(t){return-1!=_y().indexOf(t)}function IC(t){return IC[" "](t),t}IC[" "]=function(){};var wC,t,BW=rs("Opera"),ed=rs("Trident")||rs("MSIE"),yN=rs("Edge"),EC=yN||ed,vN=rs("Gecko")&&!(-1!=_y().toLowerCase().indexOf("webkit")&&!rs("Edge"))&&!(rs("Trident")||rs("MSIE"))&&!rs("Edge"),jW=-1!=_y().toLowerCase().indexOf("webkit")&&!rs("Edge");function IN(){var t=Ye.document;return t?t.documentMode:void 0}e:{var CC="",bC=(t=_y(),vN?/rv:([^\);]+)(\)|;)/.exec(t):yN?/Edge\/([\d\.]+)/.exec(t):ed?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):jW?/WebKit\/(\S+)/.exec(t):BW?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(bC&&(CC=bC?bC[1]:""),ed){var TC=IN();if(null!=TC&&TC>parseFloat(CC)){wC=String(TC);break e}}wC=CC}var $W=Ye.document&&ed&&(IN()||parseInt(wC,10))||void 0;function qf(t,e){if($r.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vN){e:{try{IC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:zW[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qf.$.h.call(this)}}yr(qf,$r);var zW={2:"touch",3:"pen",4:"mouse"};qf.prototype.h=function(){qf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Gf="closure_listenable_"+(1e6*Math.random()|0),HW=0;function qW(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++HW,this.fa=this.ia=!1}function yy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function AC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function wN(t){const e={};for(const n in t)e[n]=t[n];return e}const CN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bN(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let o=0;o<CN.length;o++)n=CN[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vy(t){this.src=t,this.g={},this.h=0}function SC(t,e){var n=e.type;if(n in t.g){var o,r=t.g[n],i=mN(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(yy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function PC(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}vy.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=PC(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):((e=new qW(e,this.src,o,!!r,i)).ia=n,t.push(e)),e};var xC="closure_lm_"+(1e6*Math.random()|0),MC={};function TN(t,e,n,r,i){if(r&&r.once)return AN(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)TN(t,e[o],n,r,i);return null}return n=kC(n),t&&t[Gf]?t.O(e,n,zf(r)?!!r.capture:!!r,i):DN(t,e,n,!1,r,i)}function DN(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=zf(i)?!!i.capture:!!i,a=OC(t);if(a||(t[xC]=a=new vy(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function WW(){const e=ZW;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)LW||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(PN(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function AN(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)AN(t,e[o],n,r,i);return null}return n=kC(n),t&&t[Gf]?t.P(e,n,zf(r)?!!r.capture:!!r,i):DN(t,e,n,!0,r,i)}function SN(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)SN(t,e[o],n,r,i);else r=zf(r)?!!r.capture:!!r,n=kC(n),t&&t[Gf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=PC(o=t.g[e],n,r,i))&&(yy(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=OC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=PC(e,n,r,i)),(n=-1<t?e[t]:null)&&RC(n))}function RC(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Gf])SC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(PN(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=OC(e))?(SC(n,t),0==n.h&&(n.src=null,e[xC]=null)):yy(t)}}}function PN(t){return t in MC?MC[t]:MC[t]="on"+t}function ZW(t,e){if(t.fa)t=!0;else{e=new qf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&RC(t),t=n.call(r,e)}return t}function OC(t){return(t=t[xC])instanceof vy?t:null}var NC="__closure_events_fn_"+(1e9*Math.random()>>>0);function kC(t){return"function"==typeof t?t:(t[NC]||(t[NC]=function(e){return t.handleEvent(e)}),t[NC])}function vr(){wa.call(this),this.i=new vy(this),this.S=this,this.J=null}function Dr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new $r(e,t);else if(e instanceof $r)e.target=e.target||t;else{var i=e;bN(e=new $r(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Iy(s,r,!0,e)&&i}if(i=Iy(s=e.g=t,r,!0,e)&&i,i=Iy(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Iy(s=e.g=n[o],r,!1,e)&&i}function Iy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&SC(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}yr(vr,wa),vr.prototype[Gf]=!0,vr.prototype.removeEventListener=function(t,e,n,r){SN(this,t,e,n,r)},vr.prototype.N=function(){if(vr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yy(n[r]);delete t.g[e],t.h--}}this.J=null},vr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},vr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var VC=Ye.JSON.stringify;function QW(){var t=FC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var xN=new class KW{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new JW,t=>t.reset());class JW{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function XW(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function e7(t){Ye.setTimeout(()=>{throw t},0)}let Wf,Zf=!1,FC=new class YW{constructor(){this.h=this.g=null}add(e,n){const r=xN.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},MN=()=>{const t=Ye.Promise.resolve(void 0);Wf=()=>{t.then(t7)}};var t7=()=>{for(var t;t=QW();){try{t.h.call(t.g)}catch(n){e7(n)}var e=xN;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Zf=!1};function Ey(t,e){vr.call(this),this.h=t||1,this.g=e||Ye,this.j=jr(this.qb,this),this.l=Date.now()}function LC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function UC(t,e,n){if("function"==typeof t)n&&(t=jr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=jr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ye.setTimeout(t,e||0)}function RN(t){t.g=UC(()=>{t.g=null,t.i&&(t.i=!1,RN(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}yr(Ey,vr),(Ie=Ey.prototype).ga=!1,Ie.T=null,Ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dr(this,"tick"),this.ga&&(LC(this),this.start()))}},Ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ie.N=function(){Ey.$.N.call(this),LC(this),delete this.g};class n7 extends wa{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RN(this)}N(){super.N(),this.g&&(Ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kf(t){wa.call(this),this.h=t,this.g={}}yr(Kf,wa);var ON=[];function NN(t,e,n,r){Array.isArray(n)||(n&&(ON[0]=n.toString()),n=ON);for(var i=0;i<n.length;i++){var o=TN(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function kN(t){AC(t.g,function(e,n){this.g.hasOwnProperty(n)&&RC(e)},t),t.g={}}function wy(){this.g=!0}function td(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function s7(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return VC(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Kf.prototype.N=function(){Kf.$.N.call(this),kN(this)},Kf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wy.prototype.Ea=function(){this.g=!1},wy.prototype.info=function(){};var Gu={},VN=null;function Cy(){return VN=VN||new vr}function FN(t){$r.call(this,Gu.Ta,t)}function Qf(t){const e=Cy();Dr(e,new FN(e))}function LN(t,e){$r.call(this,Gu.STAT_EVENT,t),this.stat=e}function di(t){const e=Cy();Dr(e,new LN(e,t))}function UN(t,e){$r.call(this,Gu.Ua,t),this.size=e}function Yf(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ye.setTimeout(function(){t()},e)}Gu.Ta="serverreachability",yr(FN,$r),Gu.STAT_EVENT="statevent",yr(LN,$r),Gu.Ua="timingevent",yr(UN,$r);var by={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function BC(){}function $N(){}BC.prototype.h=null;var zC,Jf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jC(){$r.call(this,"d")}function $C(){$r.call(this,"c")}function Ty(){}function Xf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Kf(this),this.P=a7,this.V=new Ey(t=EC?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zN}function zN(){this.i=null,this.g="",this.h=!1}yr(jC,$r),yr($C,$r),yr(Ty,BC),Ty.prototype.g=function(){return new XMLHttpRequest},Ty.prototype.i=function(){return{}},zC=new Ty;var a7=45e3,HN={},HC={};function qC(t,e,n){t.L=1,t.A=Py(Us(e)),t.u=n,t.S=!0,qN(t,null)}function qN(t,e){t.G=Date.now(),ep(t),t.B=Us(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),tk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new zN,t.g=Tk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new n7(jr(t.Pa,t,t.g),t.O)),NN(t.U,t.g,"readystatechange",t.nb),e=t.I?wN(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Qf(),function r7(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var h=l[0];l=l[1];var g=h.split("_");s=2<=g.length&&"type"==g[1]?s+(h+"=")+l+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.v,t.B,t.m,t.W,t.u)}function GN(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function WN(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=u7(t,n),i==HC){4==e&&(t.s=4,di(14),r=!1),td(t.j,t.m,null,"[Incomplete Response]");break}if(i==HN){t.s=4,di(15),td(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}td(t.j,t.m,i,null),GC(t,i)}GN(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,di(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),XC(e),e.M=!0,di(11))):(td(t.j,t.m,n,"[Invalid Chunked Response]"),Wu(t),tp(t))}function u7(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?HC:(n=Number(e.substring(n,r)),isNaN(n)?HN:(r+=1)+n>e.length?HC:(e=e.slice(r,r+n),t.o=r+n,e))}function ep(t){t.Y=Date.now()+t.P,ZN(t,t.P)}function ZN(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Yf(jr(t.lb,t),e)}function Dy(t){t.C&&(Ye.clearTimeout(t.C),t.C=null)}function tp(t){0==t.l.H||t.J||Ek(t.l,t)}function Wu(t){Dy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,LC(t.V),kN(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function GC(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||WC(n.i,t)))if(!t.K&&WC(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;ky(n),Oy(n)}JC(n),di(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Yf(jr(n.ib,n),6e3));if(1>=ik(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ku(n,11)}else if((t.K||n.g==t)&&ky(n),!Hf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const h=l[3];null!=h&&(n.ra=h,n.l.info("VER="+n.ra));const g=l[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const m=l[5];null!=m&&"number"==typeof m&&0<m&&(n.L=r=1.5*m,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const b=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var o=r.i;o.g||-1==b.indexOf("spdy")&&-1==b.indexOf("quic")&&-1==b.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(ZC(o,o.h),o.h=null))}if(r.F){const D=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.Da=D,dn(r.I,r.F,D))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=t;if((r=n).wa=bk(r,r.J?r.pa:null,r.Y),s.K){ok(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Dy(a),ep(a)),r.g=s}else vk(r);0<n.j.length&&Ny(n)}else"stop"!=l[0]&&"close"!=l[0]||Ku(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Ku(n,7):YC(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Qf()}catch{}}function KN(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(gy(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function l7(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gy(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function c7(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(gy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(Ie=Xf.prototype).setTimeout=function(t){this.P=t},Ie.nb=function(t){t=t.target;const e=this.M;e&&3==is(t)?e.l():this.Pa(t)},Ie.Pa=function(t){try{if(t==this.g)e:{const h=is(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||EC||this.g&&(this.h.h||this.g.ja()||fk(this.g)))){this.J||4!=h||7==e||Qf(),Dy(this);var n=this.g.da();this.ca=n;t:if(GN(this)){var r=fk(this.g);t="";var i=r.length,o=4==is(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wu(this),tp(this);var s="";break t}this.h.i=new Ye.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function i7(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hf(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,di(12),Wu(this),tp(this);break e}td(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,GC(this,n)}this.S?(WN(this,h,s),EC&&this.i&&3==h&&(NN(this.U,this.V,"tick",this.mb),this.V.start())):(td(this.j,this.m,s,null),GC(this,s)),4==h&&Wu(this),this.i&&!this.J&&(4==h?Ek(this.l,this):(this.i=!1,ep(this)))}else(function S7(t){const e={};t=(t.g&&2<=is(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Hf(t[r]))continue;var n=XW(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}!function GW(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,di(12)):(this.s=0,di(13)),Wu(this),tp(this)}}}catch{}},Ie.mb=function(){if(this.g){var t=is(this.g),e=this.g.ja();this.o<e.length&&(Dy(this),WN(this,t,e),this.i&&4!=t&&ep(this))}},Ie.cancel=function(){this.J=!0,Wu(this)},Ie.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function o7(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Qf(),di(17)),Wu(this),this.s=2,tp(this)):ZN(this,this.Y-t)};var QN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Zu){this.h=t.h,Ay(this,t.j),this.s=t.s,this.g=t.g,Sy(this,t.m),this.l=t.l;var e=t.i,n=new ip;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YN(this,n),this.o=t.o}else t&&(e=String(t).match(QN))?(this.h=!1,Ay(this,e[1]||"",!0),this.s=np(e[2]||""),this.g=np(e[3]||"",!0),Sy(this,e[4]),this.l=np(e[5]||"",!0),YN(this,e[6]||"",!0),this.o=np(e[7]||"")):(this.h=!1,this.i=new ip(null,this.h))}function Us(t){return new Zu(t)}function Ay(t,e,n){t.j=n?np(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YN(t,e,n){e instanceof ip?(t.i=e,function _7(t,e){e&&!t.j&&(Ca(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(XN(this,r),tk(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=rp(e,g7)),t.i=new ip(e,t.h))}function dn(t,e,n){t.i.set(e,n)}function Py(t){return dn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function np(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,h7),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function h7(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Zu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rp(e,JN,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(rp(e,JN,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(rp(n,"/"==n.charAt(0)?p7:f7,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rp(n,m7)),t.join("")};var JN=/[#\/\?@]/g,f7=/[#\?:]/g,p7=/[#\?]/g,g7=/[#\?@]/g,m7=/#/g;function ip(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ca(t){t.g||(t.g=new Map,t.h=0,t.i&&function d7(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function XN(t,e){Ca(t),e=nd(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ek(t,e){return Ca(t),e=nd(t,e),t.g.has(e)}function tk(t,e,n){XN(t,e),0<n.length&&(t.i=null,t.g.set(nd(t,e),vC(n)),t.h+=n.length)}function nd(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function nk(t){this.l=t||v7,t=Ye.PerformanceNavigationTiming?0<(t=Ye.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ye.g&&Ye.g.Ka&&Ye.g.Ka()&&Ye.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ie=ip.prototype).add=function(t,e){Ca(this),this.i=null,t=nd(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ie.forEach=function(t,e){Ca(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},Ie.ta=function(){Ca(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n},Ie.Z=function(t){Ca(this);let e=[];if("string"==typeof t)ek(this,t)&&(e=e.concat(this.g.get(nd(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},Ie.set=function(t,e){return Ca(this),this.i=null,ek(this,t=nd(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ie.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},Ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};var v7=10;function rk(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ik(t){return t.h?1:t.g?t.g.size:0}function WC(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ZC(t,e){t.g?t.g.add(e):t.h=e}function ok(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function sk(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vC(t.i)}nk.prototype.cancel=function(){if(this.i=sk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var I7=class{stringify(t){return Ye.JSON.stringify(t,void 0)}parse(t){return Ye.JSON.parse(t,void 0)}};function E7(){this.g=new I7}function w7(t,e,n){const r=n||"";try{KN(t,function(i,o){let s=i;zf(i)&&(s=VC(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function op(t){this.l=t.ec||null,this.j=t.ob||!1}function My(t,e){vr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=KC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yr(op,BC),op.prototype.g=function(){return new My(this.l,this.j)},op.prototype.i=function(t){return function(){return t}}({}),yr(My,vr);var KC=0;function ak(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function sp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ap(t)}function ap(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ie=My.prototype).open=function(t,e){if(this.readyState!=KC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ap(this)},Ie.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ye).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sp(this)),this.readyState=KC},Ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ye.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ak(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},Ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sp(this):ap(this),3==this.readyState&&ak(this)}},Ie.Za=function(t){this.g&&(this.response=this.responseText=t,sp(this))},Ie.Ya=function(t){this.g&&(this.response=t,sp(this))},Ie.ka=function(){this.g&&sp(this)},Ie.setRequestHeader=function(t,e){this.v.append(t,e)},Ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(My.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var b7=Ye.JSON.parse;function On(t){vr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uk,this.L=this.M=!1}yr(On,vr);var uk="",T7=/^https?$/i,D7=["POST","PUT"];function ck(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lk(t),Ry(t)}function lk(t){t.F||(t.F=!0,Dr(t,"complete"),Dr(t,"error"))}function dk(t){if(t.h&&typeof _C<"u"&&(!t.C[1]||4!=is(t)||2!=t.da()))if(t.v&&4==is(t))UC(t.La,0,t);else if(Dr(t,"readystatechange"),4==is(t)){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var i=String(t.I).match(QN)[1]||null;!i&&Ye.self&&Ye.self.location&&(i=Ye.self.location.protocol.slice(0,-1)),r=!T7.test(i?i.toLowerCase():"")}n=r}if(n)Dr(t,"complete"),Dr(t,"success");else{t.m=6;try{var o=2<is(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",lk(t)}}finally{Ry(t)}}}function Ry(t,e){if(t.g){hk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dr(t,"ready");try{n.onreadystatechange=r}catch{}}}function hk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ye.clearTimeout(t.A),t.A=null)}function is(t){return t.g?t.g.readyState:0}function fk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case uk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function pk(t){let e="";return AC(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function QC(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=pk(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):dn(t,e,n))}function up(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gk(t){this.Ga=0,this.j=[],this.l=new wy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=up("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=up("baseRetryDelayMs",5e3,t),this.hb=up("retryDelaySeedMs",1e4,t),this.eb=up("forwardChannelMaxRetries",2,t),this.xa=up("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new nk(t&&t.concurrentRequestLimit),this.Ja=new E7,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function YC(t){if(mk(t),3==t.H){var e=t.W++,n=Us(t.I);if(dn(n,"SID",t.K),dn(n,"RID",e),dn(n,"TYPE","terminate"),cp(t,n),(e=new Xf(t,t.l,e)).L=2,e.A=Py(Us(n)),n=!1,Ye.navigator&&Ye.navigator.sendBeacon)try{n=Ye.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ye.Image&&((new Image).src=e.A,n=!0),n||(e.g=Tk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ep(e)}Ck(t)}function Oy(t){t.g&&(XC(t),t.g.cancel(),t.g=null)}function mk(t){Oy(t),t.u&&(Ye.clearTimeout(t.u),t.u=null),ky(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ye.clearTimeout(t.m),t.m=null)}function Ny(t){if(!rk(t.i)&&!t.m){t.m=!0;var e=t.Na;Wf||MN(),Zf||(Wf(),Zf=!0),FC.add(e,t),t.C=0}}function _k(t,e){var n;n=e?e.m:t.W++;const r=Us(t.I);dn(r,"SID",t.K),dn(r,"RID",n),dn(r,"AID",t.V),cp(t,r),t.o&&t.s&&QC(r,t.o,t.s),n=new Xf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=yk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ZC(t.i,n),qC(n,r,e)}function cp(t,e){t.na&&AC(t.na,function(n,r){dn(e,r,n)}),t.h&&KN({},function(n,r){dn(e,r,n)})}function yk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?jr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const h=i[u].map;if(l-=o,0>l)o=Math.max(0,i[u].g-100),a=!1;else try{w7(h,s,"req"+l+"_")}catch{r&&r(h)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function vk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Wf||MN(),Zf||(Wf(),Zf=!0),FC.add(e,t),t.A=0}}function JC(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Yf(jr(t.Ma,t),wk(t,t.A)),t.A++,0))}function XC(t){null!=t.B&&(Ye.clearTimeout(t.B),t.B=null)}function Ik(t){t.g=new Xf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Us(t.wa);dn(e,"RID","rpc"),dn(e,"SID",t.K),dn(e,"AID",t.V),dn(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&dn(e,"TO",t.qa),dn(e,"TYPE","xmlhttp"),cp(t,e),t.o&&t.s&&QC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Py(Us(e)),n.u=null,n.S=!0,qN(n,t)}function ky(t){null!=t.v&&(Ye.clearTimeout(t.v),t.v=null)}function Ek(t,e){var n=null;if(t.g==e){ky(t),XC(t),t.g=null;var r=2}else{if(!WC(t.i,e))return;n=e.F,ok(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Dr(r=Cy(),new UN(r,n)),Ny(t)}else vk(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function P7(t,e){return!(ik(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Yf(jr(t.Na,t,e),wk(t,t.C)),t.C++,0)))}(t,e)||2==r&&JC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ku(t,5);break;case 4:Ku(t,10);break;case 3:Ku(t,6);break;default:Ku(t,2)}}function wk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ku(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=jr(t.pb,t);n||(n=new Zu("//www.google.com/images/cleardot.gif"),Ye.location&&"http"==Ye.location.protocol||Ay(n,"https"),Py(n)),function C7(t,e){const n=new wy;if(Ye.Image){const r=new Image;r.onload=my(xy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=my(xy,n,r,"TestLoadImage: error",!1,e),r.onabort=my(xy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=my(xy,n,r,"TestLoadImage: timeout",!1,e),Ye.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else di(2);t.H=0,t.h&&t.h.za(e),Ck(t),mk(t)}function Ck(t){if(t.H=0,t.ma=[],t.h){const e=sk(t.i);(0!=e.length||0!=t.j.length)&&(_N(t.ma,e),_N(t.ma,t.j),t.i.i.length=0,vC(t.j),t.j.length=0),t.h.ya()}}function bk(t,e,n){var r=n instanceof Zu?Us(n):new Zu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Sy(r,r.m);else{var i=Ye.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Zu(null);r&&Ay(o,r),e&&(o.g=e),i&&Sy(o,i),n&&(o.l=n),r=o}return e=t.Da,(n=t.F)&&e&&dn(r,n,e),dn(r,"VER",t.ra),cp(t,r),r}function Tk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t.Ha&&!t.va?new op({ob:n}):t.va)).Oa(t.J),e}function Dk(){}function Vy(){if(ed&&!(10<=Number($W)))throw Error("Environmental error: no available transport.")}function Zi(t,e){vr.call(this),this.g=new gk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Hf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rd(this)}function Ak(t){jC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sk(){$C.call(this),this.status=1}function rd(t){this.g=t}function Vo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eb(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var o=t.g[3],s=(e=t.g[0])+(o^(n=t.g[1])&((i=t.g[2])^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=(n=(i=(o=(e=n+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^n&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=n+((s=e+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}function Ut(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=0|t[i];r&&o==e||(n[i]=o,r=!1)}this.g=n}(Ie=On.prototype).Oa=function(t){this.M=t},Ie.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zC.g(),this.C=function jN(t){return t.h||(t.h=t.i())}(this.u?this.u:zC),this.g.onreadystatechange=jr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){return void ck(this,o)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())n.set(o,r.get(o))}r=Array.from(n.keys()).find(o=>"content-type"==o.toLowerCase()),i=Ye.FormData&&t instanceof Ye.FormData,!(0<=mN(D7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hk(this),0<this.B&&((this.L=function A7(t){return ed&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.ua,this)):this.A=UC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ck(this,o)}},Ie.ua=function(){typeof _C<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dr(this,"timeout"),this.abort(8))},Ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dr(this,"complete"),Dr(this,"abort"),Ry(this))},Ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ry(this,!0)),On.$.N.call(this)},Ie.La=function(){this.s||(this.G||this.v||this.l?dk(this):this.kb())},Ie.kb=function(){dk(this)},Ie.isActive=function(){return!!this.g},Ie.da=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},Ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),b7(e)}},Ie.Ia=function(){return this.m},Ie.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ie=gk.prototype).ra=8,Ie.H=1,Ie.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Xf(this,this.l,t);let o=this.s;if(this.U&&(o?(o=wN(o),bN(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yk(this,i,e),dn(n=Us(this.I),"RID",t),dn(n,"CVER",22),this.F&&dn(n,"X-HTTP-Session-Id",this.F),cp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(pk(o)))+"&"+e:this.o&&QC(n,this.o,o)),ZC(this.i,i),this.bb&&dn(n,"TYPE","init"),this.P?(dn(n,"$req",e),dn(n,"SID","null"),i.aa=!0,qC(i,n,null)):qC(i,n,e),this.H=2}}else 3==this.H&&(t?_k(this,t):0==this.j.length||rk(this.i)||_k(this))},Ie.Ma=function(){if(this.u=null,Ik(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Yf(jr(this.jb,this),t)}},Ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,di(10),Oy(this),Ik(this))},Ie.ib=function(){null!=this.v&&(this.v=null,Oy(this),JC(this),di(19))},Ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),di(2)):(this.l.info("Failed to ping google.com"),di(1))},Ie.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ie=Dk.prototype).Ba=function(){},Ie.Aa=function(){},Ie.za=function(){},Ie.ya=function(){},Ie.isActive=function(){return!0},Ie.Va=function(){},Vy.prototype.g=function(t,e){return new Zi(t,e)},yr(Zi,vr),Zi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;di(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=bk(t,null,t.Y),Ny(t)},Zi.prototype.close=function(){YC(this.g)},Zi.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=VC(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Ny(e)},Zi.prototype.N=function(){this.g.h=null,delete this.j,YC(this.g),delete this.g,Zi.$.N.call(this)},yr(Ak,jC),yr(Sk,$C),yr(rd,Dk),rd.prototype.Ba=function(){Dr(this.g,"a")},rd.prototype.Aa=function(t){Dr(this.g,new Ak(t))},rd.prototype.za=function(t){Dr(this.g,new Sk)},rd.prototype.ya=function(){Dr(this.g,"b")},yr(Vo,function x7(){this.blockSize=-1}),Vo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vo.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=n;)eb(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){eb(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){eb(this,r),i=0;break}}this.h=i,this.i+=e},Vo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var M7={};function tb(t){return-128<=t&&128>t?function UW(t,e){var n=M7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Ut([0|e],0>e?-1:0)}):new Ut([0|t],0>t?-1:0)}function os(t){if(isNaN(t)||!isFinite(t))return id;if(0>t)return Ar(os(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=nb;return new Ut(e,0)}var nb=4294967296,id=tb(0),rb=tb(1),xk=tb(16777216);function Bs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function vo(t){return-1==t.h}function Ar(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ut(n,~t.h).add(rb)}function Fy(t,e){return t.add(Ar(e))}function Ly(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lp(t,e){this.g=t,this.h=e}function Uy(t,e){if(Bs(e))throw Error("division by zero");if(Bs(t))return new lp(id,id);if(vo(t))return e=Uy(Ar(t),e),new lp(Ar(e.g),Ar(e.h));if(vo(e))return e=Uy(t,Ar(e)),new lp(Ar(e.g),e.h);if(30<t.g.length){if(vo(t)||vo(e))throw Error("slowDivide_ only works with positive integers.");for(var n=rb,r=e;0>=r.X(t);)n=Mk(n),r=Mk(r);var i=od(n,1),o=od(r,1);for(r=od(r,2),n=od(n,2);!Bs(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=od(r,1),n=od(n,1)}return e=Fy(t,i.R(e)),new lp(i,e)}for(i=id;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=os(n)).R(e);vo(s)||0<s.X(t);)s=(o=os(n-=r)).R(e);Bs(o)&&(o=rb),i=i.add(o),t=Fy(t,s)}return new lp(i,t)}function Mk(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ut(n,t.h)}function od(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ut(i,t.h)}(Ie=Ut.prototype).ea=function(){if(vo(this))return-Ar(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:nb+r)*e,e*=nb}return t},Ie.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Bs(this))return"0";if(vo(this))return"-"+Ar(this).toString(t);for(var e=os(Math.pow(t,6)),n=this,r="";;){var i=Uy(n,e).g,o=((0<(n=Fy(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Bs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},Ie.X=function(t){return vo(t=Fy(this,t))?-1:Bs(t)?0:1},Ie.abs=function(){return vo(this)?Ar(this):this},Ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&t.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,n[i]=(s&=65535)<<16|(o&=65535)}return new Ut(n,-2147483648&n[n.length-1]?-1:0)},Ie.R=function(t){if(Bs(this)||Bs(t))return id;if(vo(this))return vo(t)?Ar(this).R(Ar(t)):Ar(Ar(this).R(t));if(vo(t))return Ar(this.R(Ar(t)));if(0>this.X(xk)&&0>t.X(xk))return os(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=s*u,Ly(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Ly(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Ly(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Ly(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ut(n,0)},Ie.gb=function(t){return Uy(this,t).h},Ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ut(n,this.h&t.h)},Ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ut(n,this.h|t.h)},Ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ut(n,this.h^t.h)},Vy.prototype.createWebChannel=Vy.prototype.g,Zi.prototype.send=Zi.prototype.u,Zi.prototype.open=Zi.prototype.m,Zi.prototype.close=Zi.prototype.close,by.NO_ERROR=0,by.TIMEOUT=8,by.HTTP_ERROR=6,BN.COMPLETE="complete",$N.EventType=Jf,Jf.OPEN="a",Jf.CLOSE="b",Jf.ERROR="c",Jf.MESSAGE="d",vr.prototype.listen=vr.prototype.O,On.prototype.listenOnce=On.prototype.P,On.prototype.getLastError=On.prototype.Sa,On.prototype.getLastErrorCode=On.prototype.Ia,On.prototype.getStatus=On.prototype.da,On.prototype.getResponseJson=On.prototype.Wa,On.prototype.getResponseText=On.prototype.ja,On.prototype.send=On.prototype.ha,On.prototype.setWithCredentials=On.prototype.Oa,Vo.prototype.digest=Vo.prototype.l,Vo.prototype.reset=Vo.prototype.reset,Vo.prototype.update=Vo.prototype.j,Ut.prototype.add=Ut.prototype.add,Ut.prototype.multiply=Ut.prototype.R,Ut.prototype.modulo=Ut.prototype.gb,Ut.prototype.compare=Ut.prototype.X,Ut.prototype.toNumber=Ut.prototype.ea,Ut.prototype.toString=Ut.prototype.toString,Ut.prototype.getBits=Ut.prototype.D,Ut.fromNumber=os,Ut.fromString=function Pk(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Ar(Pk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=os(Math.pow(e,8)),r=id,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=os(Math.pow(e,o)),r=r.R(o).add(os(s))):r=(r=r.R(n)).add(os(s))}return r};var R7=ko.createWebChannelTransport=function(){return new Vy},O7=ko.getStatEventTarget=function(){return Cy()},ib=ko.ErrorCode=by,N7=ko.EventType=BN,k7=ko.Event=Gu,Rk=ko.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},By=(ko.FetchXmlHttpFactory=op,ko.WebChannel=$N),V7=ko.XhrIo=On,F7=ko.Md5=Vo,sd=ko.Integer=Ut;const Ok="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let ad="10.9.0";const ba=new ns.Yd("@firebase/firestore");function ud(){return ba.logLevel}function ue(t,...e){if(ba.logLevel<=ns.in.DEBUG){const n=e.map(ob);ba.debug(`Firestore (${ad}): ${t}`,...n)}}function qn(t,...e){if(ba.logLevel<=ns.in.ERROR){const n=e.map(ob);ba.error(`Firestore (${ad}): ${t}`,...n)}}function bi(t,...e){if(ba.logLevel<=ns.in.WARN){const n=e.map(ob);ba.warn(`Firestore (${ad}): ${t}`,...n)}}function ob(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Ae(t="Unexpected state"){const e=`FIRESTORE (${ad}) INTERNAL ASSERTION FAILED: `+t;throw qn(e),new Error(e)}function Ne(t,e){t||Ae()}function fe(t,e){return t}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends At.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Nk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ir.UNAUTHENTICATED))}shutdown(){}}class j7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $7{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,Y.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne("string"==typeof r.accessToken),new Nk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ne(null===e||"string"==typeof e),new Ir(e)}}class z7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class H7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{null!=o.error&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne("string"==typeof n.token),this.R=n.token,new kk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function G7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Vk{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=G7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Ze(t,e){return t<e?-1:t>e?1:0}function cd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Fk(t){return t+"\0"}class In{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new In(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new In(0,0))}static max(){return new Ve(new In(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dp{constructor(e,n,r){void 0===n?n=0:n>e.length&&Ae(),void 0===r?r=e.length-n:r>e.length-n&&Ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===dp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class It extends dp{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new It(n)}static emptyPath(){return new It([])}}const W7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends dp{construct(e,n,r){return new hn(e,n,r)}static isValidIdentifier(e){return W7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ie(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ie(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ie(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ie(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(It.fromString(e))}static fromName(e){return new _e(It.fromString(e).popFirst(5))}static empty(){return new _e(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===It.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new It(e.slice()))}}class ld{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function sb(t){return t.fields.find(e=>2===e.kind)}function Qu(t){return t.fields.filter(e=>2!==e.kind)}ld.UNKNOWN_ID=-1;class Yu{constructor(e,n){this.fieldPath=e,this.kind=n}}class dd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new dd(0,Ki.min())}}function Lk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(1e9===r?new In(n+1,0):new In(n,r));return new Ki(i,_e.empty(),e)}function Uk(t){return new Ki(t.readTime,t.key,-1)}class Ki{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ki(Ve.min(),_e.empty(),-1)}static max(){return new Ki(Ve.max(),_e.empty(),-1)}}function ab(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=_e.comparator(t.documentKey,e.documentKey),0!==n?n:Ze(t.largestBatchId,e.largestBatchId))}const Bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ta(t){return ub.apply(this,arguments)}function ub(){return ub=(0,Y.Z)(function*(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==Bk)throw t;ue("LocalStore","Unexpectedly lost primary lease")}),ub.apply(this,arguments)}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}class jy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ar,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new hp(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=cb(r.target.error);this.V.reject(new hp(e,i))}}static open(e,n,r,i){try{return new jy(n,e.transaction(i,r))}catch(o){throw new hp(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Y7(n)}}class Io{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Io.S((0,At.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),Ju(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,At.hl)())return!1;if(Io.C())return!0;const e=(0,At.z$)(),n=Io.S(e),r=0<n&&n<10,i=Io.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,Y.Z)(function*(){return n.db||(ue("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const o=indexedDB.open(n.name,n.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new hp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ie(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ie(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new hp(e,a))},o.onupgradeneeded=s=>{ue("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',s.oldVersion),n.p.N(s.target.result,o.transaction,s.oldVersion,n.version).next(()=>{ue("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=r=>n.L(r)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var o=this;return(0,Y.Z)(function*(){const s="readonly"===n;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=jy.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),V.reject(h))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,h="FirebaseError"!==l.name&&a<3;if(ue("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Q7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ju(this.k.delete())}}class hp extends ie{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Da(t){return"IndexedDbTransactionError"===t.name}class Y7{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ue("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ju(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),Ju(this.store.add(e))}get(e){return Ju(this.store.get(e)).next(n=>(void 0===n&&(n=null),ue("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),Ju(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),Ju(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new V((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new V((r,i)=>{n.onerror=o=>{const s=cb(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new Q7(a),l=n(a.primaryKey,a.value,u);if(l instanceof V){const h=l.catch(g=>(u.done(),V.reject(g)));r.push(h)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>V.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ju(t){return new V((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=cb(r.target.error);n(i)}})}let $k=!1;function cb(t){const e=Io.S((0,At.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $k||($k=!0,setTimeout(()=>{throw r},0)),r}}return t}class J7{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Y.Z)(function*(){n.task=null;try{ue("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(r){Da(r)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ta(r)}yield n.ee(6e4)}))}}class X7{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,Y.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,o=!0;return V.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ue("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(ue("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=Uk(o);ab(s,r)>0&&(r=s)}),new Ki(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Qi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function fp(t){return null==t}function pp(t){return 0===t&&1/t==-1/0}function zk(t){return"number"==typeof t&&Number.isInteger(t)&&!pp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function zr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hk(e)),e=eZ(t.get(n),e);return Hk(e)}function eZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Hk(t){return t+"\x01\x01"}function ss(t){const e=t.length;if(Ne(e>=2),2===e)return Ne("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),It.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ae(),t.charAt(s+1)){case"\x01":const a=t.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ae()}o=s+2}return new It(r)}const qk=["userId","batchId"];function $y(t,e){return[t,zr(e)]}function Gk(t,e,n){return[t,zr(e),n]}const tZ={},nZ=["prefixPath","collectionGroup","readTime","documentId"],rZ=["prefixPath","collectionGroup","documentId"],iZ=["collectionGroup","readTime","prefixPath","documentId"],oZ=["canonicalId","targetId"],sZ=["targetId","path"],aZ=["path","targetId"],uZ=["collectionId","parent"],cZ=["indexId","uid"],lZ=["uid","sequenceNumber"],dZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hZ=["indexId","uid","orderedDocumentKey"],fZ=["userId","collectionPath","documentId"],pZ=["userId","collectionPath","largestBatchId"],gZ=["userId","collectionGroup","largestBatchId"],Wk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mZ=[...Wk,"documentOverlays"],Zk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kk=Zk,_Z=[...Kk,"indexConfiguration","indexState","indexEntries"];class lb extends jk{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Er(t,e){const n=fe(t);return Io.M(n.ae,e)}function Qk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Jt{constructor(e,n){this.comparator=e,this.root=n||Sr.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zy(this.root,e,this.comparator,!1)}getReverseIterator(){return new zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zy(this.root,e,this.comparator,!0)}}class zy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Sr.RED,this.left=i??Sr.EMPTY,this.right=o??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Sr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1,Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jk(this.data.getIterator())}getIteratorFrom(e){return new Jk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class Jk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hd(t){return t.hasNext()?t.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Ti([])}unionWith(e){let n=new Ht(hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Xk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xk("Invalid base64 string: "+o):o}}(e);return new ur(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ur(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const vZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(t){if(Ne(!!t),"string"==typeof t){let e=0;const n=vZ.exec(t);if(Ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nn(t.seconds),nanos:Nn(t.nanos)}}function Nn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function js(t){return"string"==typeof t?ur.fromBase64String(t):ur.fromUint8Array(t)}function Hy(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qy(t){const e=t.mapValue.fields.__previous_value__;return Hy(e)?qy(e):e}function gp(t){const e=Sa(t.mapValue.fields.__local_write_time__.timestampValue);return new In(e.seconds,e.nanos)}class IZ{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}const xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gy={nullValue:"NULL_VALUE"};function Ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hy(t)?4:rV(t)?9007199254740991:10:Ae()}function as(t,e){if(t===e)return!0;const n=Ma(t);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gp(t).isEqual(gp(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Sa(i.timestampValue),a=Sa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,js(t.bytesValue).isEqual(js(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Nn(i.geoPointValue.latitude)===Nn(o.geoPointValue.latitude)&&Nn(i.geoPointValue.longitude)===Nn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Nn(i.integerValue)===Nn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Nn(i.doubleValue),a=Nn(o.doubleValue);return s===a?pp(s)===pp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return cd(t.arrayValue.values||[],e.arrayValue.values||[],as);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Qk(s)!==Qk(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!as(s[u],a[u])))return!1;return!0}(t,e);default:return Ae()}var o}function mp(t,e){return void 0!==(t.values||[]).find(n=>as(n,e))}function Ra(t,e){if(t===e)return 0;const n=Ma(t),r=Ma(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Nn(o.integerValue||o.doubleValue),u=Nn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return eV(t.timestampValue,e.timestampValue);case 4:return eV(gp(t),gp(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(o,s){const a=js(o),u=js(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const h=Ze(a[l],u[l]);if(0!==h)return h}return Ze(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ze(Nn(o.latitude),Nn(s.latitude));return 0!==a?a:Ze(Nn(o.longitude),Nn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const h=Ra(a[l],u[l]);if(h)return h}return Ze(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===xa.mapValue&&s===xa.mapValue)return 0;if(o===xa.mapValue)return 1;if(s===xa.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=Ze(u[g],h[g]);if(0!==m)return m;const y=Ra(a[u[g]],l[h[g]]);if(0!==y)return y}return Ze(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ae()}}function eV(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ze(t,e);const n=Sa(t),r=Sa(e),i=Ze(n.seconds,r.seconds);return 0!==i?i:Ze(n.nanos,r.nanos)}function fd(t){return db(t)}function db(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?js(t.bytesValue).toBase64():"referenceValue"in t?_e.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=db(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${db(n.fields[s])}`;return i+"}"}(t.mapValue):Ae()}function Xu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hb(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function tV(t){return!!t&&"nullValue"in t}function nV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zy(t){return!!t&&"mapValue"in t}function yp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rV(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function EZ(t){return"nullValue"in t?Gy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xu(Pa.empty(),_e.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ae()}function wZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xu(Pa.empty(),_e.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?xa:Ae()}function iV(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function oV(t,e){const n=Ra(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Pr{constructor(e){this.value=e}static empty(){return new Pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(n)}setAll(e){let n=hn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=yp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Zy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Aa(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Pr(yp(this.value))}}function sV(t){const e=[];return Aa(t.fields,(n,r)=>{const i=new hn([n]);if(Zy(r)){const o=sV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ti(e)}class fn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new fn(e,0,Ve.min(),Ve.min(),Ve.min(),Pr.empty(),0)}static newFoundDocument(e,n,r,i){return new fn(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new fn(e,2,n,Ve.min(),Ve.min(),Pr.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Ve.min(),Ve.min(),Pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oa{constructor(e,n){this.position=e,this.inclusive=n}}function aV(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?_e.comparator(_e.fromName(s.referenceValue),n.key):Ra(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function uV(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!as(t.position[n],e.position[n]))return!1;return!0}class vp{constructor(e,n="asc"){this.field=e,this.dir=n}}function CZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class cV{}class Et extends cV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new bZ(e,n,r):"array-contains"===n?new AZ(e,r):"in"===n?new gV(e,r):"not-in"===n?new SZ(e,r):"array-contains-any"===n?new PZ(e,r):new Et(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new TZ(e,r):new DZ(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Ra(n,this.value)):null!==n&&Ma(this.value)===Ma(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends cV{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Bt(e,n)}matches(e){return pd(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pd(t){return"and"===t.op}function fb(t){return"or"===t.op}function pb(t){return lV(t)&&pd(t)}function lV(t){for(const e of t.filters)if(e instanceof Bt)return!1;return!0}function gb(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+fd(t.value);if(pb(t))return t.filters.map(e=>gb(e)).join(",");{const e=t.filters.map(n=>gb(n)).join(",");return`${t.op}(${e})`}}function dV(t,e){return t instanceof Et?(r=t,(i=e)instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&as(r.value,i.value)):t instanceof Bt?function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&dV(s,i.filters[a]),!0)}(t,e):void Ae();var r,i}function hV(t,e){const n=t.filters.concat(e);return Bt.create(n,t.op)}function fV(t){return t instanceof Et?`${(n=t).field.canonicalString()} ${n.op} ${fd(n.value)}`:t instanceof Bt?function(n){return n.op.toString()+" {"+n.getFilters().map(fV).join(" ,")+"}"}(t):"Filter";var n}class bZ extends Et{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class TZ extends Et{constructor(e,n){super(e,"in",n),this.keys=pV(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DZ extends Et{constructor(e,n){super(e,"not-in",n),this.keys=pV(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pV(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class AZ extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&mp(n.arrayValue,this.value)}}class gV extends Et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&mp(this.value.arrayValue,n)}}class SZ extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!mp(this.value.arrayValue,n)}}class PZ extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mp(this.value.arrayValue,r))}}class xZ{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function mb(t,e=null,n=[],r=[],i=null,o=null,s=null){return new xZ(t,e,n,r,i,o,s)}function ec(t){const e=fe(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),fp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fd(r)).join(",")),e.ce=n}return e.ce}function Ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uV(t.startAt,e.startAt)&&uV(t.endAt,e.endAt)}function Ky(t){return _e.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Qy(t,e){return t.filters.filter(n=>n instanceof Et&&n.field.isEqual(e))}function mV(t,e,n){let r=Gy,i=!0;for(const o of Qy(t,e)){let s=Gy,a=!0;switch(o.op){case"<":case"<=":s=EZ(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Gy}iV({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];iV({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}function _V(t,e,n){let r=xa,i=!0;for(const o of Qy(t,e)){let s=xa,a=!0;switch(o.op){case">=":case">":s=wZ(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=xa}oV({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==n)for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];oV({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}return{value:r,inclusive:i}}class $s{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function yV(t,e,n,r,i,o,s,a){return new $s(t,e,n,r,i,o,s,a)}function gd(t){return new $s(t)}function vV(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function _b(t){return null!==t.collectionGroup}function md(t){const e=fe(t);if(null===e.le){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ht(hn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new vp(o,r))}),n.has(hn.keyField().canonicalString())||e.le.push(new vp(hn.keyField(),r))}return e.le}function hi(t){const e=fe(t);return e.he||(e.he=function IV(t,e){if("F"===t.limitType)return mb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new vp(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Oa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oa(t.startAt.position,t.startAt.inclusive):null;return mb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,md(t))),e.he}function yb(t,e){const n=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yy(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ep(t,e){return Ip(hi(t),hi(e))&&t.limitType===e.limitType}function EV(t){return`${ec(hi(t))}|lt:${t.limitType}`}function _d(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fV(i)).join(", ")}]`),fp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fd(i)).join(",")),`Target(${r})`}(hi(t))}; limitType=${t.limitType})`}function wp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of md(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const l=aV(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,md(r),i)||r.endAt&&!function(s,a,u){const l=aV(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,md(r),i)));var r,i}function wV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CV(t){return(e,n)=>{let r=!1;for(const i of md(t)){const o=MZ(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function MZ(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?Ra(u,l):Ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Yk(this.inner)}size(){return this.innerSize}}const RZ=new Jt(_e.comparator);function Di(){return RZ}const bV=new Jt(_e.comparator);function Cp(...t){let e=bV;for(const n of t)e=e.insert(n.key,n);return e}function TV(t){let e=bV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function us(){return bp()}function DV(){return bp()}function bp(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const OZ=new Jt(_e.comparator),NZ=new Ht(_e.comparator);function nt(...t){let e=NZ;for(const n of t)e=e.add(n);return e}const kZ=new Ht(Ze);function vb(){return kZ}function AV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pp(e)?"-0":e}}function SV(t){return{integerValue:""+t}}function PV(t,e){return zk(e)?SV(e):AV(t,e)}class Jy{constructor(){this._=void 0}}function VZ(t,e,n){return t instanceof yd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hy(o)&&(o=qy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof tc?MV(t,e):t instanceof nc?RV(t,e):function(i,o){const s=xV(i,o),a=OV(s)+OV(i.Ie);return hb(s)&&hb(i.Ie)?SV(a):AV(i.serializer,a)}(t,e)}function FZ(t,e,n){return t instanceof tc?MV(t,e):t instanceof nc?RV(t,e):n}function xV(t,e){return t instanceof vd?hb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class yd extends Jy{}class tc extends Jy{constructor(e){super(),this.elements=e}}function MV(t,e){const n=NV(e);for(const r of t.elements)n.some(i=>as(i,r))||n.push(r);return{arrayValue:{values:n}}}class nc extends Jy{constructor(e){super(),this.elements=e}}function RV(t,e){let n=NV(e);for(const r of t.elements)n=n.filter(i=>!as(i,r));return{arrayValue:{values:n}}}class vd extends Jy{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function OV(t){return Nn(t.integerValue||t.doubleValue)}function NV(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Tp{constructor(e,n){this.field=e,this.transform=n}}class UZ{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xy(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class ev{}function kV(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Ed(t.key,En.none()):new Id(t.key,t.data,En.none());{const n=t.data,r=Pr.empty();let i=new Ht(hn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Hs(t.key,r,new Ti(i.toArray()),En.none())}}function BZ(t,e,n){t instanceof Id?function(i,o,s){const a=i.value.clone(),u=LV(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,o,s){if(!Xy(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=LV(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(FV(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Dp(t,e,n,r){return t instanceof Id?function(o,s,a,u){if(!Xy(o.precondition,s))return a;const l=o.value.clone(),h=UV(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(o,s,a,u){if(!Xy(o.precondition,s))return a;const l=UV(o.fieldTransforms,u,s),h=s.data;return h.setAll(FV(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,Xy(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function jZ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=xV(r.transform,i||null);null!=o&&(null===n&&(n=Pr.empty()),n.set(r.field,o))}return n||null}function VV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&cd(r,i,(o,s)=>function LZ(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof tc&&i instanceof tc||r instanceof nc&&i instanceof nc?cd(r.elements,i.elements,as):r instanceof vd&&i instanceof vd?as(r.Ie,i.Ie):r instanceof yd&&i instanceof yd);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Id extends ev{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends ev{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function FV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function LV(t,e,n){const r=new Map;Ne(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,FZ(s,a,n[i]))}return r}function UV(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,VZ(o,s,e))}return r}class Ed extends ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ib extends ev{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Eb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&BZ(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Dp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Dp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DV();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=kV(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),nt())}isEqual(e){return this.batchId===e.batchId&&cd(this.mutations,e.mutations,(n,r)=>VV(n,r))&&cd(this.baseMutations,e.baseMutations,(n,r)=>VV(n,r))}}class wb{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length);let i=OZ;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new wb(e,n,r,i)}}class Cb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Kn,Tt;function BV(t){switch(t){default:return Ae();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function jV(t){if(void 0===t)return qn("GRPC error has no .code"),H.UNKNOWN;switch(t){case Kn.OK:return H.OK;case Kn.CANCELLED:return H.CANCELLED;case Kn.UNKNOWN:return H.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return H.INTERNAL;case Kn.UNAVAILABLE:return H.UNAVAILABLE;case Kn.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Kn.NOT_FOUND:return H.NOT_FOUND;case Kn.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Kn.ABORTED:return H.ABORTED;case Kn.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Kn.DATA_LOSS:return H.DATA_LOSS;default:return Ae()}}(Tt=Kn||(Kn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";function $V(){return new TextEncoder}const HZ=new sd([4294967295,4294967295],0);function zV(t){const e=$V().encode(t),n=new F7;return n.update(e),new Uint8Array(n.digest())}function HV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sd([n,r],0),new sd([i,o],0)]}class bb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ap(`Invalid padding: ${n}`);if(r<0)throw new Ap(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Ap(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Ap(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=sd.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(sd.fromNumber(r)));return 1===i.compare(HZ)&&(i=new sd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=zV(e),[r,i]=HV(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new bb(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const n=zV(e),[r,i]=HV(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ap extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sp(Ve.min(),i,new Jt(Ze),Di(),nt())}}class Pp{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pp(r,n,nt(),nt(),nt())}}class nv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class qV{constructor(e,n){this.targetId=e,this.fe=n}}class GV{constructor(e,n,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WV{constructor(){this.ge=0,this.pe=KV(),this.ye=ur.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=nt(),n=nt(),r=nt();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new Pp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=KV()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ne(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class qZ{constructor(e){this.Be=e,this.ke=new Map,this.qe=Di(),this.Qe=ZV(),this.Ke=new Jt(Ze)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Ky(o))if(0===r){const s=new _e(o.path);this.We(n,s,fn.newNoDocument(s,Ve.min()))}else Ne(1===r);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(n),this.Ke=this.Ke.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=js(r).toUint8Array()}catch(u){if(u instanceof Xk)return bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new bb(s,i,o)}catch(u){return bi(u instanceof Ap?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Ky(a.target)){const u=new _e(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,fn.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=nt();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Sp(e,n,this.Ke,this.qe,r);return this.qe=Di(),this.Qe=ZV(),this.Ke=new Jt(Ze),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new WV,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ht(Ze),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new WV),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function ZV(){return new Jt(_e.comparator)}function KV(){return new Jt(_e.comparator)}const GZ={asc:"ASCENDING",desc:"DESCENDING"},WZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZZ={and:"AND",or:"OR"};class KZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tb(t,e){return t.useProto3Json||fp(e)?e:{value:e}}function wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QZ(t,e){return wd(t,e.toTimestamp())}function Gn(t){return Ne(!!t),Ve.fromTimestamp(function(n){const r=Sa(n);return new In(r.seconds,r.nanos)}(t))}function Db(t,e){return Ab(t,e).canonicalString()}function Ab(t,e){const n=(i=t,new It(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function YV(t){const e=It.fromString(t);return Ne(a2(e)),e}function xp(t,e){return Db(t.databaseId,e.path)}function cs(t,e){const n=YV(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(e2(n))}function JV(t,e){return Db(t.databaseId,e)}function XV(t){const e=YV(t);return 4===e.length?It.emptyPath():e2(e)}function Sb(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function e2(t){return Ne(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function t2(t,e,n){return{name:xp(t,e),fields:n.value.mapValue.fields}}function n2(t,e,n){const r=cs(t,e.name),i=Gn(e.updateTime),o=e.createTime?Gn(e.createTime):Ve.min(),s=new Pr({mapValue:{fields:e.fields}}),a=fn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Mp(t,e){let n;if(e instanceof Id)n={update:t2(t,e.key,e.value)};else if(e instanceof Ed)n={delete:xp(t,e.key)};else if(e instanceof Hs)n={update:t2(t,e.key,e.data),updateMask:iK(e.fieldMask)};else{if(!(e instanceof Ib))return Ae();n={verify:xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof yd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vd)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw Ae()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:QZ(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Ae()),n;var o}function Pb(t,e){const n=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?En.updateTime(Gn(o.updateTime)):void 0!==o.exists?En.exists(o.exists):En.none():En.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(Ne("REQUEST_TIME"===a.setToServerValue),u=new yd):"appendMissingElements"in a?u=new tc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new nc(a.removeAllFromArray.values||[]):"increment"in a?u=new vd(s,a.increment):Ae();const l=hn.fromServerFormat(a.fieldPath);return new Tp(l,u)}(t,i)):[];var o;if(e.update){const i=cs(t,e.update.name),o=new Pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Ti((e.updateMask.fieldPaths||[]).map(h=>hn.fromServerFormat(h)));return new Hs(i,o,s,n,r)}return new Id(i,o,n,r)}if(e.delete){const i=cs(t,e.delete);return new Ed(i,n)}if(e.verify){const i=cs(t,e.verify);return new Ib(i,n)}return Ae()}function r2(t,e){return{documents:[JV(t,e.path)]}}function xb(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JV(t,i);const o=function(l){if(0!==l.length)return s2(Bt.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:Na((m=h).field),direction:tK(m.dir)};var m})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Tb(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i};var l}function i2(t){let e=XV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(1===r);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){const m=o2(g);return m instanceof Bt&&pb(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(m=>{return new vp(Cd((b=m).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;n.limit&&(a=function(g){let m;return m="object"==typeof g?g.value:g,fp(m)?null:m}(n.limit));let u=null;var g;n.startAt&&(u=new Oa((g=n.startAt).values||[],!!g.before));let l=null;return n.endAt&&(l=function(g){return new Oa(g.values||[],!g.before)}(n.endAt)),yV(e,i,s,o,a,"F",u,l)}function o2(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cd(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cd(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cd(n.unaryFilter.field);return Et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cd(n.unaryFilter.field);return Et.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(t):void 0!==t.fieldFilter?Et.create(Cd((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Bt.create(n.compositeFilter.filters.map(r=>o2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(n.compositeFilter.op))}(t):Ae();var n}function tK(t){return GZ[t]}function nK(t){return WZ[t]}function rK(t){return ZZ[t]}function Na(t){return{fieldPath:t.canonicalString()}}function Cd(t){return hn.fromServerFormat(t.fieldPath)}function s2(t){return t instanceof Et?function(n){if("=="===n.op){if(nV(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NAN"}};if(tV(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(nV(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NAN"}};if(tV(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(n.field),op:nK(n.op),value:n.value}}}(t):t instanceof Bt?function(n){const r=n.getFilters().map(i=>s2(i));return 1===r.length?r[0]:{compositeFilter:{op:rK(n.op),filters:r}}}(t):Ae()}function iK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a2(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class qs{constructor(e,n,r,i,o=Ve.min(),s=Ve.min(),a=ur.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class u2{constructor(e){this.ct=e}}function c2(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:xp(o=t.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:wd(o,s.version.toTimestamp()),createTime:wd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rc(e.version)};else{if(!e.isUnknownDocument())return Ae();r.unknownDocument={path:n.path.toArray(),version:rc(e.version)}}var o,s;return r}function rv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ic(t){const e=new In(t.seconds,t.nanoseconds);return Ve.fromTimestamp(e)}function oc(t,e){const n=(e.baseMutations||[]).map(o=>Pb(t.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Pb(t.ct,o)),i=In.fromMillis(e.localWriteTimeMs);return new Eb(e.batchId,i,n,r)}function Rp(t){const e=ic(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?ic(t.lastLimboFreeSnapshotVersion):Ve.min();let r;return r=void 0!==t.query.documents?(Ne(1===(o=t.query).documents.length),hi(gd(XV(o.documents[0])))):function(o){return hi(i2(o))}(t.query),new qs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ur.fromBase64String(t.resumeToken));var o}function l2(t,e){const n=rc(e.snapshotVersion),r=rc(e.lastLimboFreeSnapshotVersion);let i;i=Ky(e.target)?r2(t.ct,e.target):xb(t.ct,e.target).ut;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ec(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mb(t){const e=i2({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Yy(e,e.limit,"L"):e}function Rb(t,e){return new Cb(e.largestBatchId,Pb(t.ct,e.overlayMutation))}function d2(t,e){const n=e.path.lastSegment();return[t,zr(e.path.popLast()),n]}function h2(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:rc(r.readTime),documentKey:zr(r.documentKey.path),largestBatchId:r.largestBatchId}}class sK{getBundleMetadata(e,n){return f2(e).get(n).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ic(o.createTime),version:o.version};var o})}saveBundleMetadata(e,n){return f2(e).put({bundleId:(i=n).id,createTime:rc(Gn(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return p2(e).get(n).next(r=>{if(r)return{name:(o=r).name,query:Mb(o.bundledQuery),readTime:ic(o.readTime)};var o})}saveNamedQuery(e,n){return p2(e).put({name:(i=n).name,readTime:rc(Gn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function f2(t){return Er(t,"bundles")}function p2(t){return Er(t,"namedQueries")}class iv{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new iv(e,n.uid||"")}getOverlay(e,n){return Op(e).get(d2(this.userId,n)).next(r=>r?Rb(this.serializer,r):null)}getOverlays(e,n){const r=us();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new Cb(n,s);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(zr(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Op(e).H("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,n,r){const i=us(),o=zr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Op(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=Rb(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=us();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Op(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{const g=Rb(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Op(e).put(function(i,o,s){const[a,u,l]=d2(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Mp(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function Op(t){return Er(t,"documentOverlays")}class sc{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Nn(e.integerValue));else if("doubleValue"in e){const r=Nn(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),pp(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),"string"==typeof r?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(js(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?rV(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),_e.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function aK(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function g2(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=aK(255&r[o]);if(i+=s,8!==s)break}return i}(t);return Math.ceil(e/8)}sc.bt=new sc;class uK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=g2(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=g2(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class cK{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class lK{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Np{constructor(){this.Gt=new uK,this.zt=new cK(this.Gt),this.jt=new lK(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class ac{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ac(this.indexId,this.documentKey,this.arrayValue,r)}}function ka(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=m2(t.arrayValue,e.arrayValue),0!==n?n:(n=m2(t.directionalValue,e.directionalValue),0!==n?n:_e.comparator(t.documentKey,e.documentKey)))}function m2(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class _2{constructor(e){this.Yt=new Ht((n,r)=>hn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ne(e.collectionGroup===this.collectionId),this.en)return!1;const n=sb(e);if(void 0!==n&&!this.nn(n))return!1;const r=Qu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new Ht(hn.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new Yu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Yu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Yu(r.field,"asc"===r.dir?0:1)));return new ld(ld.UNKNOWN_ID,this.collectionId,n,dd.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function y2(t){var e,n;if(Ne(t instanceof Et||t instanceof Bt),t instanceof Et){if(t instanceof gV){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(o=>Et.create(t.field,"==",o)))||[];return Bt.create(i,"or")}return t}const r=t.filters.map(i=>y2(i));return Bt.create(r,t.op)}function dK(t){if(0===t.getFilters().length)return[];const e=kb(y2(t));return Ne(v2(e)),Ob(e)||Nb(e)?[e]:e.getFilters()}function Ob(t){return t instanceof Et}function Nb(t){return t instanceof Bt&&pb(t)}function v2(t){return Ob(t)||Nb(t)||function(n){if(n instanceof Bt&&fb(n)){for(const r of n.getFilters())if(!Ob(r)&&!Nb(r))return!1;return!0}return!1}(t)}function kb(t){if(Ne(t instanceof Et||t instanceof Bt),t instanceof Et)return t;if(1===t.filters.length)return kb(t.filters[0]);const e=t.filters.map(r=>kb(r));let n=Bt.create(e,t.op);return n=ov(n),v2(n)?n:(Ne(n instanceof Bt),Ne(pd(n)),Ne(n.filters.length>1),n.filters.reduce((r,i)=>Vb(r,i)))}function Vb(t,e){let n;return Ne(t instanceof Et||t instanceof Bt),Ne(e instanceof Et||e instanceof Bt),n=t instanceof Et?e instanceof Et?Bt.create([t,e],"and"):I2(t,e):e instanceof Et?I2(e,t):function(i,o){if(Ne(i.filters.length>0&&o.filters.length>0),pd(i)&&pd(o))return hV(i,o.getFilters());const s=fb(i)?i:o,a=fb(i)?o:i,u=s.filters.map(l=>Vb(l,a));return Bt.create(u,"or")}(t,e),ov(n)}function I2(t,e){if(pd(e))return hV(e,t.getFilters());{const n=e.filters.map(r=>Vb(t,r));return Bt.create(n,"or")}}function ov(t){if(Ne(t instanceof Et||t instanceof Bt),t instanceof Et)return t;const e=t.getFilters();if(1===e.length)return ov(e[0]);if(lV(t))return t;const n=e.map(i=>ov(i)),r=[];return n.forEach(i=>{i instanceof Et?r.push(i):i instanceof Bt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Bt.create(r,t.op)}class hK{constructor(){this._n=new Fb}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Ki.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Fb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ht(It.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ht(It.comparator)).toArray()}}const sv=new Uint8Array(0);class fK{constructor(e,n){this.databaseId=n,this.an=new Fb,this.un=new zs(r=>ec(r),(r,i)=>Ip(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:r,parent:zr(i)};return E2(e).put(o)}return V.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Fk(n),""],!1,!0);return E2(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(ss(s.parent))}return r})}addFieldIndex(e,n){const r=kp(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(n.indexState){const s=Td(e);return o.next(a=>{s.put(h2(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=kp(e),i=Td(e),o=bd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=kp(e),r=bd(e),i=Td(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return V.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new _2(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=bd(e);let i=!0;const o=new Map;return V.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=nt();const a=[];return V.forEach(o,(u,l)=>{var B;ue("IndexedDbIndexManager",`Using index ${B=u,`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${ec(n)}`);const h=function(B,oe){const pe=sb(oe);if(void 0===pe)return null;for(const ze of Qy(B,pe.fieldPath))switch(ze.op){case"array-contains-any":return ze.value.arrayValue.values||[];case"array-contains":return[ze.value]}return null}(l,u),g=function(B,oe){const pe=new Map;for(const ze of Qu(oe))for(const St of Qy(B,ze.fieldPath))switch(St.op){case"==":case"in":pe.set(ze.fieldPath.canonicalString(),St.value);break;case"not-in":case"!=":return pe.set(ze.fieldPath.canonicalString(),St.value),Array.from(pe.values())}return null}(l,u),m=function(B,oe){const pe=[];let ze=!0;for(const St of Qu(oe)){const Qn=0===St.kind?mV(B,St.fieldPath,B.startAt):_V(B,St.fieldPath,B.startAt);pe.push(Qn.value),ze&&(ze=Qn.inclusive)}return new Oa(pe,ze)}(l,u),y=function(B,oe){const pe=[];let ze=!0;for(const St of Qu(oe)){const Qn=0===St.kind?_V(B,St.fieldPath,B.endAt):mV(B,St.fieldPath,B.endAt);pe.push(Qn.value),ze&&(ze=Qn.inclusive)}return new Oa(pe,ze)}(l,u),b=this.hn(u,l,m),D=this.hn(u,l,y),x=this.Pn(u,l,g),L=this.In(u.indexId,h,b,m.inclusive,D,y.inclusive,x);return V.forEach(L,k=>r.j(k,n.limit).next(B=>{B.forEach(oe=>{const pe=_e.fromSegments(oe.documentKey);s.has(pe)||(s=s.add(pe),a.push(pe))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:dK(Bt.create(e.filters,"and")).map(r=>mb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){const u=(null!=n?n.length:1)*Math.max(r.length,o.length),l=u/(null!=n?n.length:1),h=[];for(let g=0;g<u;++g){const m=n?this.Tn(n[g/l]):sv,y=this.En(e,m,r[g%l],i),b=this.dn(e,m,o[g%l],s),D=a.map(x=>this.En(e,m,x,!0));h.push(...this.createRange(y,b,D))}return h}En(e,n,r,i){const o=new ac(e,_e.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){const o=new ac(e,_e.empty(),n,r);return i?o.Jt():o}ln(e,n){const r=new _2(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.cn(n);return V.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new Ht(hn.comparator),h=!1;for(const g of u.filters)for(const m of g.getFlattenedFilters())m.field.isKeyField()||("array-contains"===m.op||"array-contains-any"===m.op?h=!0:l=l.add(m.field));for(const g of u.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}An(e,n){const r=new Np;for(const i of Qu(e)){const o=n.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);sc.bt.Pt(o,s)}return r.Wt()}Tn(e){const n=new Np;return sc.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Np;return sc.bt.Pt(Xu(this.databaseId,n),r.Ht(function(o){const s=Qu(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(null===r)return[];let i=[];i.push(new Np);let o=0;for(const s of Qu(e)){const a=r[o++];for(const u of i)if(this.Vn(n,s.fieldPath)&&_p(a))i=this.mn(i,s,a);else{const l=u.Ht(s.kind);sc.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Np;u.seed(a.Wt()),sc.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Et&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=kp(e),i=Td(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,g){const m=g?new dd(g.sequenceNumber,new Ki(ic(g.readTime),new _e(ss(g.documentKey)),g.largestBatchId)):dd.empty(),y=h.fields.map(([b,D])=>new Yu(hn.fromServerFormat(b),D));return new ld(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Ze(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=kp(e),o=Td(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,u=>o.put(h2(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,u=>this.pn(e,i,u).next(l=>{const h=this.yn(o,u);return l.isEqual(h)?V.resolve():this.wn(e,o,u,l,h)}))))})}Sn(e,n,r,i){return bd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return bd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=bd(e);let o=new Ht(ka);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new ac(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Ht(ka);const i=this.An(n,e);if(null==i)return r;const o=sb(n);if(null!=o){const s=e.data.field(o.fieldPath);if(_p(s))for(const a of s.arrayValue.values||[])r=r.add(new ac(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new ac(n.indexId,e.key,sv,i));return r}wn(e,n,r,i,o){ue("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,l,h,g,m){const y=u.getIterator(),b=l.getIterator();let D=hd(y),x=hd(b);for(;D||x;){let L=!1,k=!1;if(D&&x){const B=h(D,x);B<0?k=!0:B>0&&(L=!0)}else null!=D?k=!0:L=!0;L?(g(x),x=hd(b)):k?(m(D),D=hd(y)):(D=hd(y),x=hd(b))}}(i,o,ka,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),V.waitFor(s)}gn(e){let n=1;return Td(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>ka(s,a)).filter((s,a,u)=>!a||0!==ka(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=ka(s,e),u=ka(s,n);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,sv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,sv,[]]))}return o}Dn(e,n){return ka(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(w2)}getMinOffset(e,n){return V.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||Ae())).next(w2)}}function E2(t){return Er(t,"collectionParents")}function bd(t){return Er(t,"indexEntries")}function kp(t){return Er(t,"indexConfiguration")}function Td(t){return Er(t,"indexState")}function w2(t){Ne(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;ab(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ki(e.readTime,e.documentKey,n)}const C2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Hr(e,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function b2(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(h,g,m)=>(a++,m.delete()));o.push(u.next(()=>{Ne(1===a)}));const l=[];for(const h of n.mutations){const g=Gk(e,h.key.path,n.batchId);o.push(i.delete(g)),l.push(h.key)}return V.waitFor(o).next(()=>l)}function av(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ae();e=t.noDocument}return JSON.stringify(e).length}Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(41943040,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);class uv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){Ne(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new uv(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Dd(e),s=Va(e);return s.add({}).next(a=>{Ne("number"==typeof a);const u=new Eb(a,n,r,i),l=function(y,b,D){const x=D.baseMutations.map(k=>Mp(y.ct,k)),L=D.mutations.map(k=>Mp(y.ct,k));return{userId:b,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:x,mutations:L}}(this.serializer,this.userId,u),h=[];let g=new Ht((m,y)=>Ze(m.canonicalString(),y.canonicalString()));for(const m of i){const y=Gk(this.userId,m.key.path,a);g=g.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,tZ))}return g.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),V.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return Va(e).get(n).next(r=>r?(Ne(r.userId===this.userId),oc(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?V.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Va(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Ne(a.batchId>=r),o=oc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Va(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Va(e).W("userMutationsIndex",n).next(r=>r.map(i=>oc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=$y(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Dd(e).Y({range:i},(s,a,u)=>{const[l,h,g]=s,m=ss(h);if(l===this.userId&&n.path.isEqual(m))return Va(e).get(g).next(y=>{if(!y)throw Ae();Ne(y.userId===this.userId),o.push(oc(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(Ze);const i=[];return n.forEach(o=>{const s=$y(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Dd(e).Y({range:a},(l,h,g)=>{const[m,y,b]=l,D=ss(y);m===this.userId&&o.path.isEqual(D)?r=r.add(b):g.done()});i.push(u)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=$y(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Ht(Ze);return Dd(e).Y({range:s},(u,l,h)=>{const[g,m,y]=u,b=ss(m);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Va(e).get(o).next(s=>{if(null===s)throw Ae();Ne(s.userId===this.userId),r.push(oc(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return b2(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dd(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=ss(o[1]);i.push(u)}else a.done()}).next(()=>{Ne(0===i.length)})})}containsKey(e,n){return T2(e,this.userId,n)}xn(e){return D2(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function T2(t,e,n){const r=$y(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Dd(t).Y({range:o,J:!0},(a,u,l)=>{const[h,g,m]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function Va(t){return Er(t,"mutations")}function Dd(t){return Er(t,"documentMutations")}function D2(t){return Er(t,"mutationQueues")}class uc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new uc(0)}static Ln(){return new uc(-1)}}class pK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new uc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ve.fromTimestamp(new In(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ad(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ne(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Ad(e).Y((s,a)=>{const u=Rp(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Ad(e).Y((r,i)=>{const o=Rp(i);n(o)})}Bn(e){return A2(e).get("targetGlobalKey").next(n=>(Ne(null!==n),n))}kn(e,n){return A2(e).put("targetGlobalKey",n)}qn(e,n){return Ad(e).put(l2(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ec(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ad(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=Rp(a);Ip(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=Fa(e);return n.forEach(s=>{const a=zr(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,n,r){const i=Fa(e);return V.forEach(n,o=>{const s=zr(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=Fa(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Fa(e);let o=nt();return i.Y({range:r,J:!0},(s,a,u)=>{const l=ss(s[1]),h=new _e(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){const r=zr(n.path),i=IDBKeyRange.bound([r],[Fk(r)],!1,!0);let o=0;return Fa(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return Ad(e).get(n).next(r=>r?Rp(r):null)}}function Ad(t){return Er(t,"targets")}function A2(t){return Er(t,"targetGlobal")}function Fa(t){return Er(t,"targetDocuments")}function S2([t,e],[n,r]){const i=Ze(t,n);return 0===i?Ze(e,r):i}class gK{constructor(e){this.Kn=e,this.buffer=new Ht(S2),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();S2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class P2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Y.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Da(r)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ta(r)}yield n.zn(3e5)}))}}class mK{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return V.resolve(Qi._e);const r=new gK(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(C2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C2):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),ud()<=ns.in.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${g} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class _K{constructor(e,n){this.db=e,this.garbageCollector=function x2(t,e){return new mK(t,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return cv(e,r)}removeReference(e,n,r){return cv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return cv(e,n)}er(e,n){return function(i,o){let s=!1;return D2(i).Z(a=>T2(i,a,o).next(u=>(u&&(s=!0),V.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=n){const u=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ve.min()),Fa(e).delete([0,zr(s.path)])))});i.push(u)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return cv(e,n)}Xn(e,n){const r=Fa(e);let i,o=Qi._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==Qi._e&&n(new _e(ss(i)),o),o=l,i=u):o=Qi._e}).next(()=>{o!==Qi._e&&n(new _e(ss(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cv(t,e){return Fa(t).put((i=t.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:i}));var i}class M2{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return cc(e).put(r)}removeEntry(e,n,r){return cc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],rv(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=fn.newInvalidDocument(n);return cc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vp(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:fn.newInvalidDocument(n)};return cc(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Vp(n))},(i,o)=>{r={document:this.nr(n,o),size:av(o)}}).next(()=>r)}getEntries(e,n){let r=Di();return this.ir(e,n,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Di(),i=new Jt(_e.comparator);return this.ir(e,n,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,av(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return V.resolve();let i=new Ht(k2);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Vp(i.first()),Vp(i.last())),s=i.getIterator();let a=s.getNext();return cc(e).Y({index:"documentKeyIndex",range:o},(u,l,h)=>{const g=_e.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&k2(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.U(Vp(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),rv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cc(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Di();for(const g of l){const m=this.nr(_e.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);m.isFoundDocument()&&(wp(n,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Di();const s=N2(n,r),a=N2(n,Ki.max());return cc(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{const g=this.nr(_e.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new vK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return O2(e).get("remoteDocumentGlobalKey").next(n=>(Ne(!!n),n))}tr(e,n){return O2(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=function oK(t,e){let n;if(e.document)n=n2(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),i=ic(e.noDocument.readTime);n=fn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae();{const r=_e.fromSegments(e.unknownDocument.path),i=ic(e.unknownDocument.version);n=fn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new In(i[0],i[1]);return Ve.fromTimestamp(o)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ve.min()))return r}return fn.newInvalidDocument(e)}}function R2(t){return new yK(t)}class vK extends M2{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new zs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ht((o,s)=>Ze(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=c2(this.ar.serializer,s);i=i.add(o.path.popLast());const l=av(u);r+=l-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=c2(this.ar.serializer,s.convertToNoDocument(Ve.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function O2(t){return Er(t,"remoteDocumentGlobal")}function cc(t){return Er(t,"remoteDocumentsV14")}function Vp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function N2(t,e){const n=e.documentKey.path.toArray();return[t,rv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function k2(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ze(n[o],r[o]),i)return i;return i=Ze(n.length,r.length),i||(i=Ze(n[n.length-2],r[r.length-2]),i||Ze(n[n.length-1],r[r.length-1]))}class IK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class V2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Dp(r.mutation,i,Ti.empty(),In.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,nt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=nt()){const i=us();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Cp();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,nt()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Di();const s=bp(),a=bp();return n.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Hs)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),Dp(h.mutation,l,h.mutation.getFieldMask(),In.now())):s.set(l.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new IK(h,null!==(g=s.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=bp();let i=new Jt((s,a)=>s-a),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(null===l)return;let h=r.get(u)||Ti.empty();h=a.applyToLocalView(l,h),r.set(u,h);const g=(i.get(a.batchId)||nt()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,h=u.value,g=DV();h.forEach(m=>{if(!o.has(m)){const y=kV(n.get(m),r.get(m));null!==y&&g.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return _e.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):_b(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(us());let a=-1,u=o;return s.next(l=>V.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,nt())).next(h=>({batchId:a,changes:TV(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let i=Cp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Cp();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{const l=(g=n,m=u.child(o),new $s(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,m;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,fn.newInvalidDocument(h)))});let a=Cp();return s.forEach((u,l)=>{const h=o.get(u);void 0!==h&&Dp(h.mutation,l,Ti.empty(),In.now()),wp(n,l)&&(a=a.insert(u,l))}),a})}}class EK{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(i=n).id,version:i.version,createTime:Gn(i.createTime)}),V.resolve();var i}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(i=n).name,query:Mb(i.bundledQuery),readTime:Gn(i.readTime)}),V.resolve();var i}}class wK{constructor(){this.overlays=new Jt(_e.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=us();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=us(),o=n.length+1,s=new _e(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Jt((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=us(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=us(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Cb(n,r));let o=this.hr.get(n);void 0===o&&(o=nt(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}class Lb{constructor(){this.Pr=new Ht(wr.Ir),this.Tr=new Ht(wr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new wr(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new wr(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new _e(new It([])),r=new wr(n,e),i=new wr(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new _e(new It([])),r=new wr(n,e),i=new wr(n,e+1);let o=nt();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new wr(e,0),r=this.Pr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class wr{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return _e.comparator(e.key,n.key)||Ze(e.pr,n.pr)}static Er(e,n){return Ze(e.pr,n.pr)||_e.comparator(e.key,n.key)}}class CK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ht(wr.Ir)}checkEmpty(e){return V.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++;const s=new Eb(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new wr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.br(n+1),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wr(n,0),i=new wr(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(Ze);return n.forEach(i=>{const o=new wr(i,0),s=new wr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const s=new wr(new _e(o),0);let a=new Ht(Ze);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),V.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ne(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,i=>{const o=new wr(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new wr(n,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return V.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bK{constructor(e){this.vr=e,this.docs=new Jt(_e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=Di();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Di();const s=n.path,a=new _e(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ab(Uk(h),r)<=0||(i.has(h.key)||wp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ae()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TK(this)}getSize(e){return V.resolve(this.size)}}class TK extends M2{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class DK{constructor(e){this.persistence=e,this.Mr=new zs(n=>ec(n),Ip),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Lb,this.targetCount=0,this.Lr=uc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new uc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}}class Ub{constructor(e,n){this.Br={},this.overlays={},this.kr=new Qi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new DK(this),this.indexManager=new hK,this.remoteDocumentCache=new bK(r=>this.referenceDelegate.Kr(r)),this.serializer=new u2(n),this.$r=new EK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new CK(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const i=new AK(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class AK extends jk{constructor(e){super(),this.currentSequenceNumber=e}}class lv{constructor(e){this.persistence=e,this.zr=new Lb,this.jr=null}static Hr(e){return new lv(e)}get Jr(){if(this.jr)return this.jr;throw Ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{const i=_e.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,Ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class SK{constructor(e){this.serializer=e}N(e,n,r,i){const o=new jy("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qk,{unique:!0}),u.createObjectStore("documentMutations"),F2(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),F2(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").W().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qk,{unique:!0});const g=l.store("mutations"),m=h.map(y=>g.put(y));return V.waitFor(m)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:fZ});l.createIndex("collectionPathOverlayIndex",pZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",gZ,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:nZ});l.createIndex("documentKeyIndex",rZ),l.createIndex("collectionGroupIndex",iZ)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:cZ}).createIndex("sequenceNumberIndex",lZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:dZ}).createIndex("documentKeyIndex",hZ,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=av(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>V.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>V.forEach(a,u=>{Ne(u.userId===o.userId);const l=oc(this.serializer,u);return b2(e,o.userId,l).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new It(s),l=[0,zr(u)];o.push(n.get(l).next(h=>h?V.resolve():n.put({targetId:0,path:zr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>V.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:uZ});const r=n.store("collectionParents"),i=new Fb,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:zr(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new It(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],l)=>{const h=ss(a);return o(h.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Rp(i),s=l2(this.serializer,o);return n.put(s)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=(g=s,g.document?new _e(It.fromString(g.document.name).popFirst(5)):g.noDocument?_e.fromSegments(g.noDocument.path):g.unknownDocument?_e.fromSegments(g.unknownDocument.path):Ae()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>V.waitFor(i))}si(e,n){const r=n.store("mutations"),i=R2(this.serializer),o=new Ub(lv.Hr,this.serializer.ct);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var l;let h=null!==(l=a.get(u.userId))&&void 0!==l?l:nt();oc(this.serializer,u).keys().forEach(g=>h=h.add(g)),a.set(u.userId,h)}),V.forEach(a,(u,l)=>{const h=new Ir(l),g=iv.lt(this.serializer,h),m=o.getIndexManager(h),y=uv.lt(h,this.serializer,m,o.referenceDelegate);return new V2(i,y,g,m).recalculateAndSaveOverlaysForDocumentKeys(new lb(n,Qi._e),u).next()})})}}function F2(t){t.createObjectStore("targetDocuments",{keyPath:sZ}).createIndex("documentTargetsIndex",aZ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oZ,{unique:!0}),t.createObjectStore("targetGlobal")}const Bb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jb{constructor(e,n,r,i,o,s,a,u,l,h,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=h,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=m=>Promise.resolve(),!jb.D())throw new ie(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _K(this,i),this.Ti=n+"main",this.serializer=new u2(u),this.Ei=new Io(this.Ti,this.ui,new SK(this.serializer)),this.Qr=new pK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R2(this.serializer),this.$r=new sK,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(H.FAILED_PRECONDITION,Bb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Qi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var r=(0,Y.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,Y.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Y.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Da(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Fp(e).get("owner").next(n=>V.resolve(this.Si(n)))}bi(e){return hv(e).delete(this.clientId)}Di(){var e=this;return(0,Y.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Er(r,"clientMetadata");return i.W().next(o=>{const s=e.vi(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return V.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of n)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):Fp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new ie(H.FAILED_PRECONDITION,Bb);return!1}}return!(!this.networkEnabled||!this.inForeground)||hv(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ue("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Y.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new lb(n,Qi._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>hv(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return uv.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return iv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",o=15===(u=this.ui)?_Z:14===u?Kk:13===u?Zk:12===u?mZ:11===u?Wk:void Ae();var u;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new lb(a,this.kr?this.kr.next():Qi._e),"readwrite-primary"===n?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ie(H.FAILED_PRECONDITION,Bk);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Fp(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ie(H.FAILED_PRECONDITION,Bb)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fp(e).put("owner",n)}static D(){return Io.D()}yi(e){const n=Fp(e);return n.get("owner").next(r=>this.Si(r)?(ue("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n||e>r&&(qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,At.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fp(t){return Er(t,"owner")}function hv(t){return Er(t,"clientMetadata")}function $b(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class zb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=nt(),i=nt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new zb(e,n.fromCache,r,i)}}class PK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class L2{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,At.G6)()?8:Io.v((0,At.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new PK;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ud()<=ns.in.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",_d(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(ud()<=ns.in.DEBUG&&ue("QueryEngine","Query:",_d(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ud()<=ns.in.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",_d(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):V.resolve())}ji(e,n){if(vV(n))return V.resolve(null);let r=hi(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Yy(n,null,"F"),r=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=nt(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,s,u.readTime)?this.ji(e,Yy(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return vV(n)||i.isEqual(Ve.min())?V.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?V.resolve(null):(ud()<=ns.in.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_d(n)),this.es(e,s,n,Lk(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ht(CV(e));return n.forEach((i,o)=>{wp(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return ud()<=ns.in.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",_d(n)),this.zi.getDocumentsMatchingQuery(e,n,Ki.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class xK{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Jt(Ze),this.rs=new zs(o=>ec(o),Ip),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V2(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function U2(t,e,n,r){return new xK(t,e,n,r)}function B2(t,e){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,Y.Z)(function*(t,e){const n=fe(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=nt();for(const l of i){s.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})}),Hb.apply(this,arguments)}function j2(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function $2(t,e,n){let r=nt(),i=nt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Di();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ve.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function OK(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sd(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new qs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Pd(t,e,n){return qb.apply(this,arguments)}function qb(){return qb=(0,Y.Z)(function*(t,e,n){const r=fe(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Da(s))throw s;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),qb.apply(this,arguments)}function fv(t,e,n){const r=fe(t);let i=Ve.min(),o=nt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){const g=fe(u),m=g.rs.get(h);return void 0!==m?V.resolve(g.ns.get(m)):g.Qr.getTargetData(l,h)}(r,s,hi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:Ve.min(),n?o:nt())).next(a=>(q2(r,wV(e),a),{documents:a,hs:o})))}function z2(t,e){const n=fe(t),r=fe(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function H2(t,e){const n=fe(t),r=n.ss.get(e)||Ve.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Lk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(q2(n,e,i),i))}function q2(t,e,n){let r=t.ss.get(e)||Ve.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function Gb(){return Gb=(0,Y.Z)(function*(t,e,n,r){const i=fe(t);let o=nt(),s=Di();for(const l of n){const h=e.Ps(l.metadata.name);l.document&&(o=o.add(h));const g=e.Is(l);g.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(h,g)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Sd(i,(h=r,hi(gd(It.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>$2(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.cs,h.ls)).next(()=>h.cs)))}),Gb.apply(this,arguments)}function kK(t,e){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,Y.Z)(function*(t,e,n=nt()){const r=yield Sd(t,hi(Mb(e.bundledQuery))),i=fe(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Gn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(ur.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})}),Wb.apply(this,arguments)}function G2(t,e){return`firestore_clients_${t}_${e}`}function W2(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Zb(t,e){return`firestore_targets_${t}_${e}`}class pv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ie(i.error.code,i.error.message))),s?new pv(e,n,i.state,o):(qn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ie(r.error.code,r.error.message))),o?new Lp(e,r.state,i):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vb();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=zk(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new gv(e,o):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Kb{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Kb(n.clientId,n.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qb{constructor(){this.activeTargetIds=vb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yb{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Jt(Ze),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=G2(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Qb),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Vs)continue;const o=e.getItem(G2(e.persistenceKey,i));if(o){const s=gv.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Zb(this.persistenceKey,e));if(r){const i=Lp.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zb(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ue("SharedClientState","READ",e,n),n}setItem(e,n){ue("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Y.Z)(function*(){if(n.started){if(null!==r.key)if(n.bs.test(r.key)){if(null==r.newValue){const i=n.$s(r.key);return n.Us(i,null)}{const i=n.Ws(r.key,r.newValue);if(i)return n.Us(i.clientId,i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.Gs(r.key,r.newValue);if(i)return n.zs(i)}}else if(n.Cs.test(r.key)){if(null!==r.newValue){const i=n.js(r.key,r.newValue);if(i)return n.Hs(i)}}else if(r.key===n.vs){if(null!==r.newValue){const i=n.xs(r.newValue);if(i)return n.Os(i)}}else if(r.key===n.Ss){const i=function(s){let a=Qi._e;if(null!=s)try{const u=JSON.parse(s);Ne("number"==typeof u),a=u}catch(u){qn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Qi._e&&n.sequenceNumberHandler(i)}else if(r.key===n.Fs){const i=n.Js(r.newValue);yield Promise.all(i.map(o=>n.syncEngine.Ys(o)))}}else n.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new pv(this.currentUser,e,n,r),o=W2(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const n=W2(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,r){const i=Zb(this.persistenceKey,e),o=new Lp(e,n,r);this.setItem(i,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return gv.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return pv.Es(new Ir(void 0!==r[2]?r[2]:null),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return Lp.Es(i,n)}xs(e){return Kb.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,Y.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=vb();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Z2{constructor(){this.no=new Qb,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Qb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VK{io(e){}shutdown(){}}class K2{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mv=null;function Jb(){return null===mv?mv=268435456+Math.round(2147483648*Math.random()):mv++,"0x"+mv.toString(16)}const FK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LK{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const qr="WebChannelConnection";class UK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){const a=Jb(),u=this.bo(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(n,u,l,i).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw bi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+ad,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){return`${this.fo}/v1/${r}:${FK[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=Jb();return new Promise((s,a)=>{const u=new V7;u.setWithCredentials(!0),u.listenOnce(N7.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ib.NO_ERROR:const h=u.getResponseJson();ue(qr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ib.TIMEOUT:ue(qr,`RPC '${e}' ${o} timed out`),a(new ie(H.DEADLINE_EXCEEDED,"Request time out"));break;case ib.HTTP_ERROR:const g=u.getStatus();if(ue(qr,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m?.error;if(y&&y.status&&y.message){const b=function(x){const L=x.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(L)>=0?L:H.UNKNOWN}(y.status);a(new ie(b,y.message))}else a(new ie(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ie(H.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ue(qr,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ue(qr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Fo(e,n,r){const i=Jb(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=R7(),a=O7(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");ue(qr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=s.createWebChannel(h,u);let m=!1,y=!1;const b=new LK({lo:x=>{y?ue(qr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(ue(qr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ue(qr,`RPC '${e}' stream ${i} sending:`,x),g.send(x))},ho:()=>g.close()}),D=(x,L,k)=>{x.listen(L,B=>{try{k(B)}catch(oe){setTimeout(()=>{throw oe},0)}})};return D(g,By.EventType.OPEN,()=>{y||ue(qr,`RPC '${e}' stream ${i} transport opened.`)}),D(g,By.EventType.CLOSE,()=>{y||(y=!0,ue(qr,`RPC '${e}' stream ${i} transport closed`),b.Vo())}),D(g,By.EventType.ERROR,x=>{y||(y=!0,bi(qr,`RPC '${e}' stream ${i} transport errored:`,x),b.Vo(new ie(H.UNAVAILABLE,"The operation could not be completed")))}),D(g,By.EventType.MESSAGE,x=>{var L;if(!y){const k=x.data[0];Ne(!!k);const oe=k.error||(null===(L=k[0])||void 0===L?void 0:L.error);if(oe){ue(qr,`RPC '${e}' stream ${i} received error:`,oe);const pe=oe.status;let ze=function(hg){const o0=Kn[hg];if(void 0!==o0)return jV(o0)}(pe),St=oe.message;void 0===ze&&(ze=H.INTERNAL,St="Unknown error status: "+pe+" with message "+oe.message),y=!0,b.Vo(new ie(ze,St)),g.close()}else ue(qr,`RPC '${e}' stream ${i} received:`,k),b.mo(k)}}),D(a,k7.STAT_EVENT,x=>{x.stat===Rk.PROXY?ue(qr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Rk.NOPROXY&&ue(qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.Ro()},0),b}}function Q2(){return typeof window<"u"?window:null}function _v(){return typeof document<"u"?document:null}function Up(t){return new KZ(t,!0)}class Xb{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Y2{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Xb(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,Y.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,Y.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var r=this;return(0,Y.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(qn(n.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):n&&n.code===H.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new ie(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,Y.Z)(function*(){e.state=0,e.start()}))}__(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BK extends Y2{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function JZ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Ae(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ne(void 0===h||"string"==typeof h),ur.fromBase64String(h||"")):(Ne(void 0===h||h instanceof Uint8Array),ur.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?H.UNKNOWN:jV(l.code);return new ie(h,l.message||"")}(s);n=new GV(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=cs(t,r.document.name),o=Gn(r.document.updateTime),s=r.document.createTime?Gn(r.document.createTime):Ve.min(),a=new Pr({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,o,s,a);n=new nv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=cs(t,r.document),o=r.readTime?Gn(r.readTime):Ve.min(),s=fn.newNoDocument(i,o);n=new nv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=cs(t,r.document);n=new nv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ae();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new zZ(i,o);n=new qV(r.targetId,s)}}var l;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ve.min():s.readTime?Gn(s.readTime):Ve.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=Sb(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Ky(u)?{documents:r2(o,u)}:{query:xb(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=QV(o,s.resumeToken);const l=Tb(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ve.min())>0){a.readTime=wd(o,s.snapshotVersion.toTimestamp());const l=Tb(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function eK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=Sb(this.serializer),n.removeTarget=e,this.t_(n)}}class jK extends Y2{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function XZ(t,e){return t&&t.length>0?(Ne(void 0!==e),t.map(n=>function(i,o){let s=Gn(i.updateTime?i.updateTime:o);return s.isEqual(Ve.min())&&(s=Gn(o)),new UZ(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.T_(r,n)}return Ne(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Sb(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Mp(this.serializer,r))};this.t_(n)}}class $K extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ie(H.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Ab(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(H.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,Ab(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(H.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class HK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(qn(n),this.g_=!1):ue("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class qK{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget((0,Y.Z)(function*(){var u;La(s)&&(ue("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Y.Z)(function*(h){const g=fe(h);g.v_.add(4),yield xd(g),g.x_.set("Unknown"),g.v_.delete(4),yield Bp(g)}),function l(h){return u.apply(this,arguments)})(s))}))}),this.x_=new HK(r,i)}}function Bp(t){return tT.apply(this,arguments)}function tT(){return tT=(0,Y.Z)(function*(t){if(La(t))for(const e of t.F_)yield e(!0)}),tT.apply(this,arguments)}function xd(t){return nT.apply(this,arguments)}function nT(){return nT=(0,Y.Z)(function*(t){for(const e of t.F_)yield e(!1)}),nT.apply(this,arguments)}function yv(t,e){const n=fe(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),oT(n)?iT(n):Od(n).Jo()&&rT(n,e))}function Md(t,e){const n=fe(t),r=Od(n);n.C_.delete(e),r.Jo()&&J2(n,e),0===n.C_.size&&(r.Jo()?r.Xo():La(n)&&n.x_.set("Unknown"))}function rT(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Od(t).c_(e)}function J2(t,e){t.O_.Oe(e),Od(t).l_(e)}function iT(t){t.O_=new qZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Od(t).start(),t.x_.p_()}function oT(t){return La(t)&&!Od(t).Ho()&&t.C_.size>0}function La(t){return 0===fe(t).v_.size}function X2(t){t.O_=void 0}function GK(t){return sT.apply(this,arguments)}function sT(){return sT=(0,Y.Z)(function*(t){t.C_.forEach((e,n)=>{rT(t,e)})}),sT.apply(this,arguments)}function WK(t,e){return aT.apply(this,arguments)}function aT(){return aT=(0,Y.Z)(function*(t,e){X2(t),oT(t)?(t.x_.S_(e),iT(t)):t.x_.set("Unknown")}),aT.apply(this,arguments)}function ZK(t,e,n){return uT.apply(this,arguments)}function uT(){return uT=(0,Y.Z)(function*(t,e,n){if(t.x_.set("Online"),e instanceof GV&&2===e.state&&e.cause)try{yield(r=(0,Y.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.C_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.C_.delete(u),o.O_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vv(t,r)}else if(e instanceof nv?t.O_.$e(e):e instanceof qV?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ve.min()))try{const r=yield j2(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.C_.get(l);h&&o.C_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const h=o.C_.get(u);if(!h)return;o.C_.set(u,h.withResumeToken(ur.EMPTY_BYTE_STRING,h.snapshotVersion)),J2(o,u);const g=new qs(h.target,u,l,h.sequenceNumber);rT(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),yield vv(t,r)}var r}),uT.apply(this,arguments)}function vv(t,e,n){return cT.apply(this,arguments)}function cT(){return cT=(0,Y.Z)(function*(t,e,n){if(!Da(e))throw e;t.v_.add(1),yield xd(t),t.x_.set("Offline"),n||(n=()=>j2(t.localStore)),t.asyncQueue.enqueueRetryable((0,Y.Z)(function*(){ue("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Bp(t)}))}),cT.apply(this,arguments)}function eF(t,e){return e().catch(n=>vv(t,n,e))}function Rd(t){return lT.apply(this,arguments)}function lT(){return lT=(0,Y.Z)(function*(t){const e=fe(t),n=Ua(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;KK(e);)try{const i=yield OK(e.localStore,r);if(null===i){0===e.D_.length&&n.Xo();break}r=i.batchId,QK(e,i)}catch(i){yield vv(e,i)}tF(e)&&nF(e)}),lT.apply(this,arguments)}function KK(t){return La(t)&&t.D_.length<10}function QK(t,e){t.D_.push(e);const n=Ua(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function tF(t){return La(t)&&!Ua(t).Ho()&&t.D_.length>0}function nF(t){Ua(t).start()}function YK(t){return dT.apply(this,arguments)}function dT(){return dT=(0,Y.Z)(function*(t){Ua(t).d_()}),dT.apply(this,arguments)}function JK(t){return hT.apply(this,arguments)}function hT(){return hT=(0,Y.Z)(function*(t){const e=Ua(t);for(const n of t.D_)e.I_(n.mutations)}),hT.apply(this,arguments)}function XK(t,e,n){return fT.apply(this,arguments)}function fT(){return fT=(0,Y.Z)(function*(t,e,n){const r=t.D_.shift(),i=wb.from(r,e,n);yield eF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Rd(t)}),fT.apply(this,arguments)}function eQ(t,e){return pT.apply(this,arguments)}function pT(){return pT=(0,Y.Z)(function*(t,e){var n;e&&Ua(t).P_&&(yield(n=(0,Y.Z)(function*(i,o){if(BV(a=o.code)&&a!==H.ABORTED){const s=i.D_.shift();Ua(i).Zo(),yield eF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Rd(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),tF(t)&&nF(t)}),pT.apply(this,arguments)}function rF(t,e){return gT.apply(this,arguments)}function gT(){return gT=(0,Y.Z)(function*(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=La(n);n.v_.add(3),yield xd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Bp(n)}),gT.apply(this,arguments)}function mT(t,e){return _T.apply(this,arguments)}function _T(){return _T=(0,Y.Z)(function*(t,e){const n=fe(t);e?(n.v_.delete(2),yield Bp(n)):e||(n.v_.add(2),yield xd(n),n.x_.set("Unknown"))}),_T.apply(this,arguments)}function Od(t){return t.N_||(t.N_=function(n,r,i){const o=fe(n);return o.R_(),new BK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:GK.bind(null,t),To:WK.bind(null,t),u_:ZK.bind(null,t)}),t.F_.push(function(){var e=(0,Y.Z)(function*(n){n?(t.N_.Zo(),oT(t)?iT(t):t.x_.set("Unknown")):(yield t.N_.stop(),X2(t))});return function(n){return e.apply(this,arguments)}}())),t.N_}function Ua(t){return t.L_||(t.L_=function(n,r,i){const o=fe(n);return o.R_(),new jK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:YK.bind(null,t),To:eQ.bind(null,t),E_:JK.bind(null,t),T_:XK.bind(null,t)}),t.F_.push(function(){var e=(0,Y.Z)(function*(n){n?(t.L_.Zo(),yield Rd(t)):(yield t.L_.stop(),t.D_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))});return function(n){return e.apply(this,arguments)}}())),t.L_}class yT{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new yT(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ie(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(t,e){if(qn("AsyncQueue",`${e}: ${t}`),Da(t))return new ie(H.UNAVAILABLE,`${e}: ${t}`);throw t}class kd{constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=Cp(),this.sortedSet=new Jt(this.comparator)}static emptySet(e){return new kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new kd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class iF{constructor(){this.B_=new Jt(_e.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ae():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vd{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Vd(e,n,kd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class tQ{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class nQ{constructor(){this.queries=new zs(e=>EV(e),Ep),this.onlineState="Unknown",this.W_=new Set}}function vT(t,e){return IT.apply(this,arguments)}function IT(){return IT=(0,Y.Z)(function*(t,e){const n=fe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new tQ,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Nd(s,`Initialization of query '${_d(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&CT(n)}),IT.apply(this,arguments)}function ET(t,e){return wT.apply(this,arguments)}function wT(){return wT=(0,Y.Z)(function*(t,e){const n=fe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),0===o.Q_.length?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}),wT.apply(this,arguments)}function rQ(t,e){const n=fe(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&CT(n)}function iQ(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function CT(t){t.W_.forEach(e=>{e.next()})}var bT,oF;(oF=bT||(bT={})).j_="default",oF.Cache="cache";class TT{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Vd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=Vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==bT.Cache}}class oQ{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class sF{constructor(e){this.serializer=e}Ps(e){return cs(this.serializer,e)}Is(e){return e.metadata.exists?n2(this.serializer,e.document,!1):fn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Gn(e)}}class sQ{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aF(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const r=It.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,r=new sF(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||nt()).add(o);n.set(s,a)}}return n}complete(){var e=this;return(0,Y.Z)(function*(){const n=yield function NK(t,e,n,r){return Gb.apply(this,arguments)}(e.localStore,new sF(e.serializer),e.documents,e.ia.id),r=e.oa(e.documents);for(const i of e.queries)yield kK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function aF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class uF{constructor(e){this.key=e}}class cF{constructor(e){this.key=e}}class lF{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=nt(),this.mutatedKeys=nt(),this.ha=CV(e),this.Pa=new kd(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new iF,i=n?n.Pa:this.Pa;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const m=i.get(h),y=wp(this.query,g)?g:null,b=!!m&&this.mutatedKeys.has(m.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?b!==D&&(r.track({type:3,doc:y}),x=!0):this.da(m,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.ha(y,u)>0||l&&this.ha(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=D?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort((h,g)=>function(y,b){const D=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return D(y)-D(b)}(h.type,g.type)||this.ha(h.doc,g.doc)),this.Aa(r),i=null!=i&&i;const a=n&&!i?this.Ra():[],u=0===this.la.size&&this.current&&!i?1:0,l=u!==this.ca;return this.ca=u,0!==s.length||l?{snapshot:new Vd(this.query,e.Pa,o,s,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new iF,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=nt(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new cF(r))}),this.la.forEach(r=>{e.has(r)||n.push(new uF(r))}),n}fa(e){this.ua=e.hs,this.la=nt();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Vd.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class aQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uQ{constructor(e){this.key=e,this.pa=!1}}class cQ{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new zs(a=>EV(a),Ep),this.Sa=new Map,this.ba=new Set,this.Da=new Jt(_e.comparator),this.Ca=new Map,this.va=new Lb,this.Fa={},this.Ma=new Map,this.xa=uc.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function lQ(t,e){return DT.apply(this,arguments)}function DT(){return DT=(0,Y.Z)(function*(t,e,n=!0){const r=Iv(t);let i;const o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield dF(r,e,n,!0),i}),DT.apply(this,arguments)}function dQ(t,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Y.Z)(function*(t,e){const n=Iv(t);yield dF(n,e,!0,!1)}),AT.apply(this,arguments)}function dF(t,e,n,r){return ST.apply(this,arguments)}function ST(){return ST=(0,Y.Z)(function*(t,e,n,r){const i=yield Sd(t.localStore,hi(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield PT(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&yv(t.remoteStore,i),a}),ST.apply(this,arguments)}function PT(t,e,n,r,i){return xT.apply(this,arguments)}function xT(){return xT=(0,Y.Z)(function*(t,e,n,r,i){t.Na=(g,m,y)=>{return(b=(0,Y.Z)(function*(x,L,k,B){let oe=L.view.Ta(k);oe.Xi&&(oe=yield fv(x.localStore,L.query,!1).then(({documents:Qn})=>L.view.Ta(Qn,oe)));const pe=B&&B.targetChanges.get(L.targetId),ze=B&&null!=B.targetMismatches.get(L.targetId),St=L.view.applyChanges(oe,x.isPrimaryClient,pe,ze);return jT(x,L.targetId,St.Va),St.snapshot}),function D(x,L,k,B){return b.apply(this,arguments)})(t,g,m,y);var b};const o=yield fv(t.localStore,e,!0),s=new lF(e,o.hs),a=s.Ta(o.documents),u=Pp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=s.applyChanges(a,t.isPrimaryClient,u);jT(t,n,l.Va);const h=new aQ(e,n,s);return t.wa.set(e,h),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot}),xT.apply(this,arguments)}function hQ(t,e,n){return MT.apply(this,arguments)}function MT(){return MT=(0,Y.Z)(function*(t,e,n){const r=fe(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Ep(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Pd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Md(r.remoteStore,i.targetId),Fd(r,i.targetId)}).catch(Ta))):(Fd(r,i.targetId),yield Pd(r.localStore,i.targetId,!0))}),MT.apply(this,arguments)}function fQ(t,e){return RT.apply(this,arguments)}function RT(){return RT=(0,Y.Z)(function*(t,e){const n=fe(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Md(n.remoteStore,r.targetId))}),RT.apply(this,arguments)}function OT(){return OT=(0,Y.Z)(function*(t,e,n){const r=JT(t);try{const i=yield function(s,a){const u=fe(s),l=In.now(),h=a.reduce((y,b)=>y.add(b.key),nt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Di(),D=nt();return u.os.getEntries(y,h).next(x=>{b=x,b.forEach((L,k)=>{k.isValidDocument()||(D=D.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(x=>{g=x;const L=[];for(const k of a){const B=jZ(k,g.get(k.key).overlayedDocument);null!=B&&L.push(new Hs(k.key,B,sV(B.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(x=>{m=x;const L=x.applyToLocalDocumentSet(g,D);return u.documentOverlayCache.saveOverlays(y,x.batchId,L)})}).then(()=>({batchId:m.batchId,changes:TV(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Fa[s.currentUser.toKey()];l||(l=new Jt(Ze)),l=l.insert(a,u),s.Fa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Gs(r,i.changes),yield Rd(r.remoteStore)}catch(i){const o=Nd(i,"Failed to persist write");n.reject(o)}}),OT.apply(this,arguments)}function hF(t,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Y.Z)(function*(t,e){const n=fe(t);try{const r=yield function RK(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,g)=>{const m=i.get(g);if(!m)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,g)));let y=m.withSequenceNumber(o.currentSequenceNumber);var D,x,L;null!==e.targetMismatches.get(g)?y=y.withResumeToken(ur.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(g,y),x=y,L=h,(0===(D=m).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0)&&a.push(n.Qr.updateTargetData(o,y))});let u=Di(),l=nt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($2(o,s,e.documentUpdates).next(h=>{u=h.cs,l=h.ls})),!r.isEqual(Ve.min())){const h=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ns=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Ca.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?Ne(s.pa):i.removedDocuments.size>0&&(Ne(s.pa),s.pa=!1))}),yield Gs(n,r,e)}catch(r){yield Ta(r)}}),NT.apply(this,arguments)}function fF(t,e,n){const r=fe(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wa.forEach((o,s)=>{const a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=fe(s);u.onlineState=a;let l=!1;u.queries.forEach((h,g)=>{for(const m of g.Q_)m.G_(a)&&(l=!0)}),l&&CT(u)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gQ(t,e,n){return kT.apply(this,arguments)}function kT(){return kT=(0,Y.Z)(function*(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),o=i&&i.key;if(o){let s=new Jt(_e.comparator);s=s.insert(o,fn.newNoDocument(o,Ve.min()));const a=nt().add(o),u=new Sp(Ve.min(),new Map,new Jt(Ze),s,a);yield hF(r,u),r.Da=r.Da.remove(o),r.Ca.delete(e),$T(r)}else yield Pd(r.localStore,e,!1).then(()=>Fd(r,e,n)).catch(Ta)}),kT.apply(this,arguments)}function mQ(t,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Y.Z)(function*(t,e){const n=fe(t),r=e.batch.batchId;try{const i=yield function MK(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){const g=l.batch,m=g.keys();let y=V.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(D=>{const x=l.docVersions.get(b);Ne(null!==x),D.version.compareTo(x)<0&&(g.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),h.addEntry(D)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=nt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);BT(n,r,null),UT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Gs(n,i)}catch(i){yield Ta(i)}}),VT.apply(this,arguments)}function _Q(t,e,n){return FT.apply(this,arguments)}function FT(){return FT=(0,Y.Z)(function*(t,e,n){const r=fe(t);try{const i=yield function(s,a){const u=fe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ne(null!==g),h=g.keys(),u.mutationQueue.removeMutationBatch(l,g))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);BT(r,e,n),UT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Gs(r,i)}catch(i){yield Ta(i)}}),FT.apply(this,arguments)}function LT(){return LT=(0,Y.Z)(function*(t,e){const n=fe(t);La(n.remoteStore)||ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=fe(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){const i=Nd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),LT.apply(this,arguments)}function UT(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function BT(t,e,n){const r=fe(t);let i=r.Fa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||pF(t,r)})}function pF(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(Md(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),$T(t))}function jT(t,e,n){for(const r of n)r instanceof uF?(t.va.addReference(r.key,e),vQ(t,r)):r instanceof cF?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||pF(t,r.key)):Ae()}function vQ(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.ba.add(r),$T(t))}function $T(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new _e(It.fromString(e)),r=t.xa.next();t.Ca.set(r,new uQ(n)),t.Da=t.Da.insert(n,r),yv(t.remoteStore,new qs(hi(gd(n.path)),r,"TargetPurposeLimboResolution",Qi._e))}}function Gs(t,e,n){return zT.apply(this,arguments)}function zT(){return zT=(0,Y.Z)(function*(t,e,n){const r=fe(t),i=[],o=[],s=[];var a;r.wa.isEmpty()||(r.wa.forEach((a,u)=>{s.push(r.Na(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const h=zb.Ki(u.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.ya.u_(i),yield(a=(0,Y.Z)(function*(l,h){const g=fe(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,y=>V.forEach(y.qi,b=>g.persistence.referenceDelegate.addReference(m,y.targetId,b)).next(()=>V.forEach(y.Qi,b=>g.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))}catch(m){if(!Da(m))throw m;ue("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const b=g.ns.get(y),x=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);g.ns=g.ns.insert(y,x)}}}),function u(l,h){return a.apply(this,arguments)})(r.localStore,o))}),zT.apply(this,arguments)}function IQ(t,e){return HT.apply(this,arguments)}function HT(){return HT=(0,Y.Z)(function*(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=yield B2(n.localStore,e);n.currentUser=e,(o=n).Ma.forEach(a=>{a.forEach(u=>{u.reject(new ie(H.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ma.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gs(n,r.us)}var o}),HT.apply(this,arguments)}function EQ(t,e){const n=fe(t),r=n.Ca.get(e);if(r&&r.pa)return nt().add(r.key);{let i=nt();const o=n.Sa.get(e);if(!o)return i;for(const s of o){const a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function wQ(t,e){return qT.apply(this,arguments)}function qT(){return qT=(0,Y.Z)(function*(t,e){const n=fe(t),r=yield fv(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&jT(n,e.targetId,i.Va),i}),qT.apply(this,arguments)}function CQ(t,e){return GT.apply(this,arguments)}function GT(){return GT=(0,Y.Z)(function*(t,e){const n=fe(t);return H2(n.localStore,e).then(r=>Gs(n,r))}),GT.apply(this,arguments)}function bQ(t,e,n,r){return WT.apply(this,arguments)}function WT(){return WT=(0,Y.Z)(function*(t,e,n,r){const i=fe(t),o=yield function(a,u){const l=fe(a),h=fe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.vn(g,u).next(m=>m?l.localDocuments.getDocuments(g,m):V.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===n?yield Rd(i.remoteStore):"acknowledged"===n||"rejected"===n?(BT(i,e,r||null),UT(i,e),u=e,fe(fe(i.localStore).mutationQueue).Mn(u)):Ae(),yield Gs(i,o)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),WT.apply(this,arguments)}function ZT(){return ZT=(0,Y.Z)(function*(t,e){const n=fe(t);if(Iv(n),JT(n),!0===e&&!0!==n.Oa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield gF(n,r.toArray());n.Oa=!0,yield mT(n.remoteStore,!0);for(const o of i)yv(n.remoteStore,o)}else if(!1===e&&!1!==n.Oa){const r=[];let i=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Fd(n,s),Pd(n.localStore,s,!0))),Md(n.remoteStore,s)}),yield i,yield gF(n,r),function(s){const a=fe(s);a.Ca.forEach((u,l)=>{Md(a.remoteStore,l)}),a.va.mr(),a.Ca=new Map,a.Da=new Jt(_e.comparator)}(n),n.Oa=!1,yield mT(n.remoteStore,!1)}}),ZT.apply(this,arguments)}function gF(t,e,n){return KT.apply(this,arguments)}function KT(){return KT=(0,Y.Z)(function*(t,e,n){const r=fe(t),i=[],o=[];for(const s of e){let a;const u=r.Sa.get(s);if(u&&0!==u.length){a=yield Sd(r.localStore,hi(u[0]));for(const l of u){const h=r.wa.get(l),g=yield wQ(r,h);g.snapshot&&o.push(g.snapshot)}}else{const l=yield z2(r.localStore,s);a=yield Sd(r.localStore,l),yield PT(r,mF(l),s,!1,a.resumeToken)}i.push(a)}return r.ya.u_(o),i}),KT.apply(this,arguments)}function mF(t){return yV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DQ(t){return n=fe(t).localStore,fe(fe(n).persistence).Bi();var n}function AQ(t,e,n,r){return QT.apply(this,arguments)}function QT(){return QT=(0,Y.Z)(function*(t,e,n,r){const i=fe(t);if(i.Oa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=yield H2(i.localStore,wV(o[0])),a=Sp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ur.EMPTY_BYTE_STRING);yield Gs(i,s,a);break}case"rejected":yield Pd(i.localStore,e,!0),Fd(i,e,r);break;default:Ae()}}),QT.apply(this,arguments)}function SQ(t,e,n){return YT.apply(this,arguments)}function YT(){return YT=(0,Y.Z)(function*(t,e,n){const r=Iv(t);if(r.Oa){for(const i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue("SyncEngine","Adding an already active target "+i);continue}const o=yield z2(r.localStore,i),s=yield Sd(r.localStore,o);yield PT(r,mF(o),s.targetId,!1,s.resumeToken),yv(r.remoteStore,s)}for(const i of n)r.Sa.has(i)&&(yield Pd(r.localStore,i,!1).then(()=>{Md(r.remoteStore,i),Fd(r,i)}).catch(Ta))}}),YT.apply(this,arguments)}function Iv(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gQ.bind(null,e),e.ya.u_=rQ.bind(null,e.eventManager),e.ya.La=iQ.bind(null,e.eventManager),e}function JT(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_Q.bind(null,e),e}class jp{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Y.Z)(function*(){n.serializer=Up(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return U2(this.persistence,new L2,e.initialUser,this.serializer)}createPersistence(e){return new Ub(lv.Hr,this.serializer)}createSharedClientState(e){return new Z2}terminate(){var e=this;return(0,Y.Z)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XT extends jp{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield n().call(r,e),yield r.ka.initialize(r,e),yield JT(r.ka.syncEngine),yield Rd(r.ka.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return U2(this.persistence,new L2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new P2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new X7(n,this.persistence);return new J7(e.asyncQueue,r)}createPersistence(e){const n=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new jb(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Q2(),_v(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Z2}}class _F extends XT{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield n().call(r,e);const i=r.ka.syncEngine;r.sharedClientState instanceof Yb&&(r.sharedClientState.syncEngine={Zs:bQ.bind(null,i),Xs:AQ.bind(null,i),eo:SQ.bind(null,i),Bi:DQ.bind(null,i),Ys:CQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,Y.Z)(function*(s){yield function TQ(t,e){return ZT.apply(this,arguments)}(r.ka.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Q2();if(!Yb.D(n))throw new ie(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$b(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yb(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ld{initialize(e,n){var r=this;return(0,Y.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>fF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IQ.bind(null,r.syncEngine),yield mT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new nQ}createDatastore(e){const n=Up(e.databaseInfo.databaseId),r=new UK(e.databaseInfo);return new $K(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=n=>fF(this.syncEngine,n,0),a=K2.D()?new K2:new VK,new qK(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){const g=new cQ(i,o,s,a,u,l);return h&&(g.Oa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,Y.Z)(function*(){var n,r;yield(r=(0,Y.Z)(function*(o){const s=fe(o);ue("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield xd(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function yF(t,e=10240){let n=0;return{read:()=>(0,Y.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Y.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class MQ{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new ar,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,Y.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,Y.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,Y.Z)(function*(){const n=yield e.Wa();if(null===n)return null;const r=e.$a.decode(n),i=Number(r);isNaN(i)&&e.Ga(`length string (${r}) is not valid number`);const o=yield e.za(i);return new oQ(JSON.parse(o),n.length+i)})()}ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Wa(){var e=this;return(0,Y.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}za(e){var n=this;return(0,Y.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const r=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,Y.Z)(function*(){const n=yield e.Ka.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class RQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Y.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new ie(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,Y.Z)(function*(s,a){const u=fe(s),l={documents:a.map(y=>xp(u.serializer,y))},h=yield u.vo("BatchGetDocuments",u.serializer.databaseId,It.emptyPath(),l,a.length),g=new Map;h.forEach(y=>{const b=function YZ(t,e){return"found"in e?function(r,i){Ne(!!i.found);const o=cs(r,i.found.name),s=Gn(i.found.updateTime),a=i.found.createTime?Gn(i.found.createTime):Ve.min(),u=new Pr({mapValue:{fields:i.found.fields}});return fn.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Ne(!!i.missing),Ne(!!i.readTime);const o=cs(r,i.missing),s=Gn(i.readTime);return fn.newNoDocument(o,s)}(t,e):Ae()}(u.serializer,y);g.set(b.key.toString(),b)});const m=[];return a.forEach(y=>{const b=g.get(y.toString());Ne(!!b),m.push(b)}),m}),function o(s,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ed(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const o=_e.fromPath(i);e.mutations.push(new Ib(o,e.precondition(o)))}),yield(r=(0,Y.Z)(function*(o,s){const a=fe(o),u={writes:s.map(l=>Mp(a.serializer,l))};yield a.So("Commit",a.serializer.databaseId,It.emptyPath(),u)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ae();n=Ve.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ie(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ve.min())?En.exists(!1):En.updateTime(n):En.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ve.min()))throw new ie(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return En.updateTime(n)}return En.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class OQ{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Ja=r.maxAttempts,this.jo=new Xb(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,Y.Z)(function*(){const n=new RQ(e.datastore),r=e.Xa(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.eu(o)}))}).catch(i=>{e.eu(i)})}))}Xa(e){try{const n=this.updateFunction(e);return!fp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!BV(n)}return!1}}class NQ{constructor(e,n,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ir.UNAUTHENTICATED,this.clientId=Vk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,Y.Z)(function*(a){ue("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Nd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function wv(t,e){return eD.apply(this,arguments)}function eD(){return eD=(0,Y.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Y.Z)(function*(o){r.isEqual(o)||(yield B2(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),eD.apply(this,arguments)}function tD(t,e){return nD.apply(this,arguments)}function nD(){return nD=(0,Y.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield rD(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rF(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rF(e.remoteStore,i)),t._onlineComponents=e}),nD.apply(this,arguments)}function vF(t){return"FirebaseError"===t.name?t.code===H.FAILED_PRECONDITION||t.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function rD(t){return iD.apply(this,arguments)}function iD(){return iD=(0,Y.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vF(n))throw n;bi("Error using user provided cache. Falling back to memory cache: "+n),yield wv(t,new jp)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),yield wv(t,new jp);return t._offlineComponents}),iD.apply(this,arguments)}function Cv(t){return oD.apply(this,arguments)}function oD(){return oD=(0,Y.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield tD(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),yield tD(t,new Ld))),t._onlineComponents}),oD.apply(this,arguments)}function IF(t){return rD(t).then(e=>e.persistence)}function Ud(t){return rD(t).then(e=>e.localStore)}function EF(t){return Cv(t).then(e=>e.remoteStore)}function sD(t){return Cv(t).then(e=>e.syncEngine)}function Bd(t){return aD.apply(this,arguments)}function aD(){return aD=(0,Y.Z)(function*(t){const e=yield Cv(t),n=e.eventManager;return n.onListen=lQ.bind(null,e.syncEngine),n.onUnlisten=hQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fQ.bind(null,e.syncEngine),n}),aD.apply(this,arguments)}function CF(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(o,s,a,u,l){const h=new Ev({next:m=>{s.enqueueAndForget(()=>ET(o,g));const y=m.docs.has(a);!y&&m.fromCache?l.reject(new ie(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&"server"===u.source?l.reject(new ie(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new TT(gd(a.path),h,{includeMetadataChanges:!0,ta:!0});return vT(o,g)}(yield Bd(t),t.asyncQueue,e,n,r)})),r.promise}function bF(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(o,s,a,u,l){const h=new Ev({next:m=>{s.enqueueAndForget(()=>ET(o,g)),m.fromCache&&"server"===u.source?l.reject(new ie(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),g=new TT(a,h,{includeMetadataChanges:!0,ta:!0});return vT(o,g)}(yield Bd(t),t.asyncQueue,e,n,r)})),r.promise}function TF(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const DF=new Map;function uD(t,e,n){if(!n)throw new ie(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AF(t,e,n,r){if(!0===e&&!0===r)throw new ie(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SF(t){if(!_e.isDocumentKey(t))throw new ie(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PF(t){if(_e.isDocumentKey(t))throw new ie(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Ae()}function pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bv(t);throw new ie(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xF(t,e){if(e<=0)throw new ie(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class MF{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ie(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ie(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=TF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $p{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ie(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new B7;switch(r.type){case"firstParty":return new H7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=DF.get(n);r&&(ue("ComponentProvider","Removing Datastore"),DF.delete(n),r.terminate())}(this),Promise.resolve()}}function RF(t,e,n,r={}){var i;const o=(t=pt(t,$p))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Ir.MOCK_USER;else{a=(0,At.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ie(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ir(l)}t._authCredentials=new j7(new Nk(a,u))}}class xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class ls extends xr{constructor(e,n,r){super(e,n,gd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new _e(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function OF(t,e,...n){if(t=(0,At.m9)(t),uD("collection","path",e),t instanceof $p){const r=It.fromString(e,...n);return PF(r),new ls(t,null,r)}{if(!(t instanceof pn||t instanceof ls))throw new ie(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return PF(r),new ls(t.firestore,null,r)}}function Tv(t,e,...n){if(t=(0,At.m9)(t),1===arguments.length&&(e=Vk.newId()),uD("doc","path",e),t instanceof $p){const r=It.fromString(e,...n);return SF(r),new pn(t,null,new _e(r))}{if(!(t instanceof pn||t instanceof ls))throw new ie(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return SF(r),new pn(t.firestore,t instanceof ls?t.converter:null,new _e(r))}}function NF(t,e){return t=(0,At.m9)(t),e=(0,At.m9)(e),(t instanceof pn||t instanceof ls)&&(e instanceof pn||e instanceof ls)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function cD(t,e){return t=(0,At.m9)(t),e=(0,At.m9)(e),t instanceof xr&&e instanceof xr&&t.firestore===e.firestore&&Ep(t._query,e._query)&&t.converter===e.converter}class GQ{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Xb(this,"async_queue_retry"),this.cu=()=>{const n=_v();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=_v();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=_v();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ar;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,Y.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!Da(n))throw n;ue("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{throw this.ou=r,this._u=!1,qn("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=yT.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&Ae()}verifyOperationInProgress(){}Tu(){var e=this;return(0,Y.Z)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function lD(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class WQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xt extends $p{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new GQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||kF(this),this._firestoreClient.terminate()}}function KQ(t,e){const n="object"==typeof t?t:(0,Br.getApp)(),r="string"==typeof t?t:e||"(default)",i=(0,Br._getProvider)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,At.P0)("firestore");o&&RF(i,...o)}return i}function kn(t){return t._firestoreClient||kF(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kF(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new IZ(t._databaseId,u,t._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TF(h.experimentalLongPollingOptions),h.useFetchStreams));var u,h;t._firestoreClient=new NQ(t._authCredentials,t._appCheckCredentials,t._queue,o),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function VF(t,e,n){const r=new ar;return t.asyncQueue.enqueue((0,Y.Z)(function*(){try{yield wv(t,n),yield tD(t,e),r.resolve()}catch(i){const o=i;if(!vF(o))throw o;bi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function FF(t){if(t._initialized||t._terminated)throw new ie(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(ur.fromBase64String(e))}catch(n){throw new ie(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ds(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ws{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ie(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lc{constructor(e){this._methodName=e}}class Dv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}const oY=/^__.*__$/;class sY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Id(e,this.data,n,this.fieldTransforms)}}class LF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Av{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Av(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return xv(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(UF(this.Vu)&&oY.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class aY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Up(e)}Cu(e,n,r,i=!1){return new Av({Vu:e,methodName:n,Du:r,path:hn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(t){const e=t._freezeSettings(),n=Up(t._databaseId);return new aY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sv(t,e,n,r,i,o={}){const s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);_D("Data must be an object, but it was:",s,r);const a=$F(r,s);let u,l;if(o.merge)u=new Ti(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const m=qp(e,g,n);if(!s.contains(m))throw new ie(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);HF(h,m)||h.push(m)}u=new Ti(h),l=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,l=s.fieldTransforms;return new sY(new Pr(a),u,l)}class Hp extends lc{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function BF(t,e,n){return new Av({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dD extends lc{_toFieldTransform(e){return new Tp(e.path,new yd)}isEqual(e){return e instanceof dD}}class hD extends lc{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=BF(this,e,!0),r=this.vu.map(o=>hc(o,n)),i=new tc(r);return new Tp(e.path,i)}isEqual(e){return e instanceof hD&&(0,At.vZ)(this.vu,e.vu)}}class fD extends lc{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=BF(this,e,!0),r=this.vu.map(o=>hc(o,n)),i=new nc(r);return new Tp(e.path,i)}isEqual(e){return e instanceof fD&&(0,At.vZ)(this.vu,e.vu)}}class pD extends lc{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new vd(e.serializer,PV(e.serializer,this.Fu));return new Tp(e.path,n)}isEqual(e){return e instanceof pD&&this.Fu===e.Fu}}function gD(t,e,n,r){const i=t.Cu(1,e,n);_D("Data must be an object, but it was:",i,r);const o=[],s=Pr.empty();Aa(r,(u,l)=>{const h=Pv(e,u,n);l=(0,At.m9)(l);const g=i.yu(h);if(l instanceof Hp)o.push(h);else{const m=hc(l,g);null!=m&&(o.push(h),s.set(h,m))}});const a=new Ti(o);return new LF(s,a,i.fieldTransforms)}function mD(t,e,n,r,i,o){const s=t.Cu(1,e,n),a=[qp(e,r,n)],u=[i];if(o.length%2!=0)throw new ie(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(qp(e,o[m])),u.push(o[m+1]);const l=[],h=Pr.empty();for(let m=a.length-1;m>=0;--m)if(!HF(l,a[m])){const y=a[m];let b=u[m];b=(0,At.m9)(b);const D=s.yu(y);if(b instanceof Hp)l.push(y);else{const x=hc(b,D);null!=x&&(l.push(y),h.set(y,x))}}const g=new Ti(l);return new LF(h,g,s.fieldTransforms)}function jF(t,e,n,r=!1){return hc(n,t.Cu(r?4:3,e))}function hc(t,e){if(zF(t=(0,At.m9)(t)))return _D("Unsupported field value:",e,t),$F(t,e);if(t instanceof lc)return function(r,i){if(!UF(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=hc(a,i.wu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=(0,At.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return PV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=In.fromDate(r);return{timestampValue:wd(i.serializer,o)}}if(r instanceof In){const o=new In(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wd(i.serializer,o)}}if(r instanceof Dv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ds)return{bytesValue:QV(i.serializer,r._byteString)};if(r instanceof pn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Db(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${bv(r)}`)}(t,e)}function $F(t,e){const n={};return Yk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(t,(r,i)=>{const o=hc(i,e.fu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function zF(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof In||t instanceof Dv||t instanceof ds||t instanceof pn||t instanceof lc)}function _D(t,e,n){if(!zF(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=bv(n);throw e.Su("an object"===r?t+" a custom object":t+" "+r)}var i}function qp(t,e,n){if((e=(0,At.m9)(e))instanceof Ws)return e._internalPath;if("string"==typeof e)return Pv(t,e);throw xv("Field path arguments must be of type string or ",t,!1,void 0,n)}const uY=new RegExp("[~\\*/\\[\\]]");function Pv(t,e,n){if(e.search(uY)>=0)throw xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ws(...e.split("."))._internalPath}catch{throw xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ie(H.INVALID_ARGUMENT,a+t+u)}function HF(t,e){return t.some(n=>n.isEqual(e))}class Gp{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class cY extends Gp{data(){return super.data()}}function Mv(t,e){return"string"==typeof e?Pv(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}function qF(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ie(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yD{}class Wp extends yD{}function Ba(t,e,...n){let r=[];e instanceof yD&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof jd).length,a=o.filter(u=>u instanceof Zp).length;if(s>1||s>0&&a>0)throw new ie(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zp extends Wp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zp(e,n,r)}_apply(e){const n=this._parse(e);return KF(e._query,n),new xr(e.firestore,e.converter,yb(e._query,n))}_parse(e){const n=dc(e.firestore);return function(o,s,a,u,l,h,g){let m;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ie(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){ZF(g,h);const y=[];for(const b of g)y.push(WF(u,o,b));m={arrayValue:{values:y}}}else m=WF(u,o,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||ZF(g,h),m=jF(a,"where",g,"in"===h||"not-in"===h);return Et.create(l,h,m)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class jd extends yD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)KF(s,u),s=yb(s,u)}(e._query,n),new xr(e.firestore,e.converter,yb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class vD extends Wp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vD(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new ie(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ie(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vp(o,s)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new $s(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Rv extends Wp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Rv(e,n,r)}_apply(e){return new xr(e.firestore,e.converter,Yy(e._query,this._limit,this._limitType))}}class Ov extends Wp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ov(e,n,r)}_apply(e){const n=GF(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(o=n,new $s((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class Nv extends Wp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Nv(e,n,r)}_apply(e){const n=GF(e,this.type,this._docOrFields,this._inclusive);return new xr(e.firestore,e.converter,(o=n,new $s((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function GF(t,e,n,r){if(n[0]=(0,At.m9)(n[0]),n[0]instanceof Gp)return function(o,s,a,u,l){if(!u)throw new ie(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of md(o))if(g.field.isKeyField())h.push(Xu(s,u.key));else{const m=u.data.field(g.field);if(Hy(m))throw new ie(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===m){const y=g.field.canonicalString();throw new ie(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Oa(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=dc(t.firestore);return function(s,a,u,l,h,g){const m=s.explicitOrderBy;if(h.length>m.length)throw new ie(H.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<h.length;b++){const D=h[b];if(m[b].field.isKeyField()){if("string"!=typeof D)throw new ie(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!_b(s)&&-1!==D.indexOf("/"))throw new ie(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);const x=s.path.child(It.fromString(D));if(!_e.isDocumentKey(x))throw new ie(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const L=new _e(x);y.push(Xu(a,L))}else{const x=jF(u,l,D);y.push(x)}}return new Oa(y,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function WF(t,e,n){if("string"==typeof(n=(0,At.m9)(n))){if(""===n)throw new ie(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_b(e)&&-1!==n.indexOf("/"))throw new ie(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(It.fromString(n));if(!_e.isDocumentKey(r))throw new ie(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xu(t,new _e(r))}if(n instanceof pn)return Xu(t,n._key);throw new ie(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bv(n)}.`)}function ZF(t,e){if(!Array.isArray(t)||0===t.length)throw new ie(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KF(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ie(H.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ID{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Aa(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Dv(Nn(e.latitude),Nn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qy(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gp(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new In(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);Ne(a2(r));const i=new Pa(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return i.isEqual(n)||qn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function kv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class yY extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}class fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends Gp{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kp extends Zs{data(e={}){return super.data(e)}}class ja{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kp(this._firestore,this._userDataWriter,r.key,r,new fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new Kp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:IY(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}function YF(t,e){return t instanceof Zs&&e instanceof Zs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ja&&e instanceof ja&&t._firestore===e._firestore&&cD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class $a extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function JF(t,e,n){t=pt(t,pn);const r=pt(t.firestore,Xt),i=kv(t.converter,e,n);return $d(r,[Sv(dc(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,En.none())])}function XF(t,e,n,...r){t=pt(t,pn);const i=pt(t.firestore,Xt),o=dc(i);let s;return s="string"==typeof(e=(0,At.m9)(e))||e instanceof Ws?mD(o,"updateDoc",t._key,e,n,r):gD(o,"updateDoc",t._key,e),$d(i,[s.toMutation(t._key,En.exists(!0))])}function eL(t,...e){var n,r,i;t=(0,At.m9)(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||lD(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lD(e[s])){const g=e[s];e[s]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let u,l,h;if(t instanceof pn)l=pt(t.firestore,Xt),h=gd(t._key.path),u={next:g=>{e[s]&&e[s](ED(l,t,g))},error:e[s+1],complete:e[s+2]};else{const g=pt(t,xr);l=pt(g.firestore,Xt),h=g._query;const m=new $a(l);u={next:y=>{e[s]&&e[s](new ja(l,m,g,y))},error:e[s+1],complete:e[s+2]},qF(t._query)}return function(m,y,b,D){const x=new Ev(D),L=new TT(y,x,b);return m.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return vT(yield Bd(m),L)})),()=>{x.Qa(),m.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return ET(yield Bd(m),L)}))}}(kn(l),h,a,u)}function $d(t,e){return function(r,i){const o=new ar;return r.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function pQ(t,e,n){return OT.apply(this,arguments)}(yield sD(r),i,o)})),o.promise}(kn(t),e)}function ED(t,e,n){const r=n.docs.get(e._key),i=new $a(t);return new Zs(t,i,e._key,r,new fc(n.hasPendingWrites,n.fromCache),e.converter)}const LY={maxAttempts:5};class tL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,n,r){this._verifyNotCommitted();const i=za(e,this._firestore),o=kv(i.converter,n,r),s=Sv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,En.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=za(e,this._firestore);let s;return s="string"==typeof(n=(0,At.m9)(n))||n instanceof Ws?mD(this._dataReader,"WriteBatch.update",o._key,n,r,i):gD(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=za(e,this._firestore);return this._mutations=this._mutations.concat(new Ed(n._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function za(t,e){if((t=(0,At.m9)(t)).firestore!==e)throw new ie(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class UY extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=dc(n)}get(n){const r=za(n,this._firestore),i=new yY(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Ae();const s=o[0];if(s.isFoundDocument())return new Gp(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gp(this._firestore,i,r._key,null,r.converter);throw Ae()})}set(n,r,i){const o=za(n,this._firestore),s=kv(o.converter,r,i),a=Sv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=za(n,this._firestore);let a;return a="string"==typeof(r=(0,At.m9)(r))||r instanceof Ws?mD(this._dataReader,"Transaction.update",s._key,r,i,o):gD(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=za(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=za(e,this._firestore),r=new $a(this._firestore);return super.get(e).then(i=>new Zs(this._firestore,r,n._key,i._document,new fc(!1,!1),n.converter))}}function CD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ie("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function oL(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function sL(){if(!function yZ(){return typeof atob<"u"}())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ad=Br.SDK_VERSION,(0,Br._registerComponent)(new gN.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Xt(new $7(r.getProvider("auth-internal")),new q7(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ie(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Br.registerVersion)(Ok,"4.5.0",e),(0,Br.registerVersion)(Ok,"4.5.0","esm2017")}();class Qp{constructor(e){this._delegate=e}static fromBase64String(e){return sL(),new Qp(ds.fromBase64String(e))}static fromUint8Array(e){return oL(),new Qp(ds.fromUint8Array(e))}toBase64(){return sL(),this._delegate.toBase64()}toUint8Array(){return oL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bD(t){return function KY(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class QY{enableIndexedDbPersistence(e,n){return function QQ(t,e){FF(t=pt(t,Xt));const n=kn(t);if(n._uninitializedComponentsProvider)throw new ie(H.FAILED_PRECONDITION,"SDK cache is already specified.");bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Ld;return VF(n,i,new XT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function YQ(t){FF(t=pt(t,Xt));const e=kn(t);if(e._uninitializedComponentsProvider)throw new ie(H.FAILED_PRECONDITION,"SDK cache is already specified.");bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Ld;return VF(e,r,new _F(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JQ(t){if(t._initialized&&!t._terminated)throw new ie(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ar;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{yield(n=(0,Y.Z)(function*(i){if(!Io.D())return Promise.resolve();const o=i+"main";yield Io.delete(o)}),function r(i){return n.apply(this,arguments)})($b(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class aL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){RF(this._delegate,e,n,r)}enableNetwork(){return function eY(t){return function kQ(t){return t.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield IF(t),n=yield EF(t);return e.setNetworkEnabled(!0),function(i){const o=fe(i);return o.v_.delete(0),Bp(o)}(n)}))}(kn(t=pt(t,Xt)))}(this._delegate)}disableNetwork(){return function tY(t){return function VQ(t){return t.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield IF(t),n=yield EF(t);return e.setNetworkEnabled(!1),(r=(0,Y.Z)(function*(o){const s=fe(o);s.v_.add(0),yield xd(s),s.x_.set("Offline")}),function i(o){return r.apply(this,arguments)})(n);var r}))}(kn(t=pt(t,Xt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function XQ(t){return function(n){const r=new ar;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function yQ(t,e){return LT.apply(this,arguments)}(yield sD(n),r)})),r.promise}(kn(t=pt(t,Xt)))}(this._delegate)}onSnapshotsInSync(e){return function PY(t,e){return function UQ(t,e){const n=new Ev(e);return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return i=yield Bd(t),o=n,fe(i).W_.add(o),void o.next();var i,o})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return i=yield Bd(t),o=n,void fe(i).W_.delete(o);var i,o}))}}(kn(t=pt(t,Xt)),lD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zd(this,OF(this._delegate,e))}catch(n){throw fi(n,"collection()","Firestore.collection()")}}doc(e){try{return new Eo(this,Tv(this._delegate,e))}catch(n){throw fi(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pi(this,function qQ(t,e){if(t=pt(t,$p),uD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(t,null,(r=e,new $s(It.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw fi(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function BY(t,e,n){t=pt(t,Xt);const r=Object.assign(Object.assign({},LY),n);return function(o){if(o.maxAttempts<1)throw new ie(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new ar;return o.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){const l=yield function wF(t){return Cv(t).then(e=>e.datastore)}(o);new OQ(o.asyncQueue,l,a,s,u).Ya()})),u.promise}(kn(t),i=>e(new UY(t,i)),r)}(this._delegate,n=>e(new uL(this,n)))}batch(){return kn(this._delegate),new cL(new tL(this._delegate,e=>$d(this._delegate,e)))}loadBundle(e){return function nY(t,e){const n=kn(t=pt(t,Xt)),r=new WQ;return function BQ(t,e,n,r){const i=function(s,a){let u;return u="string"==typeof s?$V().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return yF(h,g);if(h instanceof ArrayBuffer)return yF(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new MQ(h,a);var h}(n,Up(e));t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){!function PQ(t,e,n){const r=fe(t);var i;(i=(0,Y.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(b,D){const x=fe(b),L=Gn(D.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",k=>x.$r.getBundleMetadata(k,D.id)).then(k=>!!k&&k.createTime.compareTo(L)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(b=l).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);u._updateProgress(aF(l));const h=new sQ(l,s.localStore,a.serializer);let g=yield a.Ba();for(;g;){const y=yield h.sa(g);y&&u._updateProgress(y),g=yield a.Ba()}const m=yield h.complete();return yield Gs(s,m.aa,void 0),yield function(b,D){const x=fe(b);return x.persistence.runTransaction("Save bundle","readwrite",L=>x.$r.saveBundleMetadata(L,D))}(s.localStore,l),u._completeWith(m.progress),Promise.resolve(m._a)}catch(l){return bi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var b}),function o(s,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield sD(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rY(t,e){return function jQ(t,e){return t.asyncQueue.enqueue((0,Y.Z)(function*(){return function(r,i){const o=fe(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Ud(t),e)}))}(kn(t=pt(t,Xt)),e).then(n=>n?new xr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new pi(this,n):null)}}class Fv extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qp(new ds(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Eo.forKey(n,this.firestore,null)}}class uL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Fv(e)}get(e){const n=gc(e);return this._delegate.get(n).then(r=>new Yp(this._firestore,new Zs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=gc(e);return r?(CD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=gc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=gc(e);return this._delegate.delete(n),this}}class cL{constructor(e){this._delegate=e}set(e,n,r){const i=gc(e);return r?(CD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=gc(e);return 2===arguments.length?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=gc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class pc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Kp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=pc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new pc(e,new Fv(e),n),i.set(n,o)),o}}pc.INSTANCES=new WeakMap;class Eo{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fv(e)}static forPath(e,n,r){if(e.length%2!=0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Eo(n,new pn(n._delegate,r,new _e(e)))}static forKey(e,n,r){return new Eo(n,new pn(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zd(this.firestore,OF(this._delegate,e))}catch(n){throw fi(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,At.m9)(e))instanceof pn&&NF(this._delegate,e)}set(e,n){n=CD("DocumentReference.set",n);try{return n?JF(this._delegate,e,n):JF(this._delegate,e)}catch(r){throw fi(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?XF(this._delegate,e):XF(this._delegate,e,n,...r)}catch(i){throw fi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function AY(t){return $d(pt(t.firestore,Xt),[new Ed(t._key,En.none())])}(this._delegate)}onSnapshot(...e){const n=lL(e),r=dL(e,i=>new Yp(this.firestore,new Zs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return eL(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function wY(t){t=pt(t,pn);const e=pt(t.firestore,Xt),n=kn(e),r=new $a(e);return function FQ(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(o,s,a){try{const u=yield function(h,g){const m=fe(h);return m.persistence.runTransaction("read document","readonly",y=>m.localDocuments.getDocument(y,g))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ie(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Nd(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Ud(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Zs(e,r,t._key,i,new fc(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function CY(t){t=pt(t,pn);const e=pt(t.firestore,Xt);return CF(kn(e),t._key,{source:"server"}).then(n=>ED(e,t,n))}(this._delegate):function EY(t){t=pt(t,pn);const e=pt(t.firestore,Xt);return CF(kn(e),t._key).then(n=>ED(e,t,n))}(this._delegate),n.then(r=>new Yp(this.firestore,new Zs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Eo(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}function fi(t,e,n){return t.message=t.message.replace(e,n),t}function lL(t){for(const e of t)if("object"==typeof e&&!bD(e))return e;return{}}function dL(t,e){var n,r;let i;return i=bD(t[0])?t[0]:bD(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Yp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return YF(this._delegate,e._delegate)}}class Jp extends Yp{data(e){const n=this._delegate.data(e);return this._delegate._converter||function U7(t,e){t||Ae()}(void 0!==n),n}}class pi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fv(e)}where(e,n,r){try{return new pi(this.firestore,Ba(this._delegate,function lY(t,e,n){const r=e,i=Mv("where",t);return Zp._create(i,r,n)}(e,n,r)))}catch(i){throw fi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new pi(this.firestore,Ba(this._delegate,function dY(t,e="asc"){const n=e,r=Mv("orderBy",t);return vD._create(r,n)}(e,n)))}catch(r){throw fi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pi(this.firestore,Ba(this._delegate,function hY(t){return xF("limit",t),Rv._create("limit",t,"F")}(e)))}catch(n){throw fi(n,"limit()","Query.limit()")}}limitToLast(e){try{return new pi(this.firestore,Ba(this._delegate,function fY(t){return xF("limitToLast",t),Rv._create("limitToLast",t,"L")}(e)))}catch(n){throw fi(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pi(this.firestore,Ba(this._delegate,function pY(...t){return Ov._create("startAt",t,!0)}(...e)))}catch(n){throw fi(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pi(this.firestore,Ba(this._delegate,function gY(...t){return Ov._create("startAfter",t,!1)}(...e)))}catch(n){throw fi(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pi(this.firestore,Ba(this._delegate,function mY(...t){return Nv._create("endBefore",t,!1)}(...e)))}catch(n){throw fi(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pi(this.firestore,Ba(this._delegate,function _Y(...t){return Nv._create("endAt",t,!0)}(...e)))}catch(n){throw fi(n,"endAt()","Query.endAt()")}}isEqual(e){return cD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function TY(t){t=pt(t,xr);const e=pt(t.firestore,Xt),n=kn(e),r=new $a(e);return function LQ(t,e){const n=new ar;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(o,s,a){try{const u=yield fv(o,s,!0),l=new lF(s,u.hs),h=l.Ta(u.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(u){const l=Nd(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Ud(t),e,n);var r})),n.promise}(n,t._query).then(i=>new ja(e,r,t,i))}(this._delegate):"server"===e?.source?function DY(t){t=pt(t,xr);const e=pt(t.firestore,Xt),n=kn(e),r=new $a(e);return bF(n,t._query,{source:"server"}).then(i=>new ja(e,r,t,i))}(this._delegate):function bY(t){t=pt(t,xr);const e=pt(t.firestore,Xt),n=kn(e),r=new $a(e);return qF(t._query),bF(n,t._query).then(i=>new ja(e,r,t,i))}(this._delegate),n.then(r=>new TD(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=lL(e),r=dL(e,i=>new TD(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return eL(this._delegate,n,r)}withConverter(e){return new pi(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}class JY{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Jp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TD{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new JY(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Jp(this._firestore,r))})}isEqual(e){return YF(this._delegate,e._delegate)}}class zd extends pi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Eo(this.firestore,e):null}doc(e){try{return new Eo(this.firestore,void 0===e?Tv(this._delegate):Tv(this._delegate,e))}catch(n){throw fi(n,"doc()","CollectionReference.doc()")}}add(e){return function SY(t,e){const n=pt(t.firestore,Xt),r=Tv(t),i=kv(t.converter,e);return $d(n,[Sv(dc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Eo(this.firestore,n))}isEqual(e){return NF(this._delegate,e._delegate)}withConverter(e){return new zd(this.firestore,this._delegate.withConverter(e?pc.getInstance(this.firestore,e):null))}}function gc(t){return pt(t,pn)}class DD{constructor(...e){this._delegate=new Ws(...e)}static documentId(){return new DD(hn.keyField().canonicalString())}isEqual(e){return(e=(0,At.m9)(e))instanceof Ws&&this._delegate._internalPath.isEqual(e._internalPath)}}class mc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $Y(){return new dD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mc(e)}static delete(){const e=function jY(){return new Hp("deleteField")}();return e._methodName="FieldValue.delete",new mc(e)}static arrayUnion(...e){const n=function zY(...t){return new hD("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new mc(n)}static arrayRemove(...e){const n=function HY(...t){return new fD("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new mc(n)}static increment(e){const n=function qY(t){return new pD("increment",t)}(e);return n._methodName="FieldValue.increment",new mc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const XY={Firestore:aL,GeoPoint:Dv,Timestamp:In,Blob:Qp,Transaction:uL,WriteBatch:cL,DocumentReference:Eo,DocumentSnapshot:Yp,Query:pi,QueryDocumentSnapshot:Jp,QuerySnapshot:TD,CollectionReference:zd,FieldPath:DD,FieldValue:mc,setLogLevel:function YY(t){!function L7(t){ba.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function hL(t,e){return function nJ(t,e=eN){return new We(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function AD(t,e){return hL(t,e).pipe(he(n=>({payload:n,type:"query"})))}!function tJ(t){(function eJ(t,e){t.INTERNAL.registerComponent(new gN.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},XY)))})(t,(e,n)=>new aL(e,n,new QY)),t.registerVersion("@firebase/firestore-compat","0.3.27")}(qu.Z);class fL{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:o}=_L(r,n);return new mL(i,o,this.afs)}snapshotChanges(){return function rJ(t,e){return hL(t,e).pipe(G_(void 0),mC(),he(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wi)}valueChanges(e={}){return this.snapshotChanges().pipe(he(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return I(this.ref.get(e)).pipe(Wi)}}function Lv(t,e){return AD(t,e).pipe(G_(void 0),mC(),he(n=>{const[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function pL(t,e,n){return Lv(t,n).pipe(Z_((r,i)=>function iJ(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function oJ(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return SD(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return SD(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SD(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(o=>o.payload),e),[]),je(),he(r=>r.map(i=>({type:i.type,payload:i}))))}function SD(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function gL(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class mL{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Lv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(he(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(G_(void 0),mC(),yo(([r,i])=>i.length>0||!r),he(([,r])=>r),Wi)}auditTrail(e){return this.stateChanges(e).pipe(Z_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=gL(e);return pL(this.query,n,this.afs.schedulers.outsideAngular).pipe(Wi)}valueChanges(e={}){return AD(this.query,this.afs.schedulers.outsideAngular).pipe(he(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Wi)}get(e){return I(this.query.get(e)).pipe(Wi)}add(e){return this.ref.add(e)}doc(e){return new fL(this.ref.doc(e),this.afs)}}class sJ{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Lv(this.query,this.afs.schedulers.outsideAngular).pipe(he(n=>n.filter(r=>e.indexOf(r.type)>-1)),yo(n=>n.length>0),Wi):Lv(this.query,this.afs.schedulers.outsideAngular).pipe(Wi)}auditTrail(e){return this.stateChanges(e).pipe(Z_((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=gL(e);return pL(this.query,n,this.afs.schedulers.outsideAngular).pipe(Wi)}valueChanges(e={}){return AD(this.query,this.afs.schedulers.outsideAngular).pipe(he(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Wi)}get(e){return I(this.query.get(e)).pipe(Wi)}}const aJ=new de("angularfire2.enableFirestorePersistence"),uJ=new de("angularfire2.firestore.persistenceSettings"),cJ=new de("angularfire2.firestore.settings"),lJ=new de("angularfire2.firestore.use-emulator");function _L(t,e=(n=>n)){return{query:e(t),ref:t}}let PD=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,h,g,m,y,b,D,x,L,k){this.schedulers=u;const B=pC(n,a,r),oe=h;g&&pN(B,a,m,b,D,x,y,L),[this.firestore,this.persistenceEnabled$]=iN(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{const pe=a.runOutsideAngular(()=>B.firestore());if(o&&pe.settings(o),oe&&pe.useEmulator(...oe),i&&!j_(s)){const ze=()=>{try{return I(pe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(St){return typeof console<"u"&&console.warn(St),A(!1)}};return[pe,a.runOutsideAngular(ze)]}return[pe,A(!1)]},[o,oe,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:o,query:s}=_L(i,r),a=this.schedulers.ngZone.run(()=>o);return new mL(a,s,this)}collectionGroup(n,r){const i=r||(s=>s),o=this.firestore.collectionGroup(n);return new sJ(i(o),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new fL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(ce(fy),ce(py,8),ce(aJ,8),ce(cJ,8),ce(Ao),ce(Dt),ce($f),ce(uJ,8),ce(lJ,8),ce(gC,8),ce(uN,8),ce(cN,8),ce(lN,8),ce(dN,8),ce(hN,8),ce(fN,8),ce(hy,8))};static \u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),wo=(()=>{class t{get isLogged(){return!!this.user}constructor(n,r,i){this.firestore=n,this.auth=r,this.router=i,this.user$$=new v(this.retrieveUserFromSessionStorage()),this.user$=this.user$$.asObservable(),this.USER_KEY="[user]",this.ADMIN_ID="23Be0yFzRXaXxW8NWWam0dwZ80k1",this.subscription=this.user$.subscribe(o=>{this.user=o})}retrieveUserFromSessionStorage(){const n=sessionStorage.getItem("user");return n?JSON.parse(n):void 0}isAdmin(){return this.user?.id===this.ADMIN_ID}login(n,r){var i=this;return(0,Y.Z)(function*(){try{const s=(yield i.auth.signInWithEmailAndPassword(n,r)).user?.uid;if(s){const u=yield i.firestore.collection("users").doc(s).get().toPromise();if(u&&u.exists){const l=u.data();l.id=s,i.user$$.next(l),sessionStorage.setItem("user",JSON.stringify(l))}}}catch(o){throw window.alert("Incorrect Email or Password"),o}})()}register(n,r,i,o,s){return new We(a=>{this.auth.fetchSignInMethodsForEmail(r).then(u=>{0===u.length?this.auth.createUserWithEmailAndPassword(r,o).then(l=>{const h=l?.user?.uid;if(h){const g={username:n,email:r,tel:i,password:o,rePassword:s};this.firestore.collection("users").doc(h).set(g).then(()=>{a.next(),a.complete()}).catch(m=>{a.error(m)})}}).catch(l=>{a.error(l)}):a.error("An account with this email already exists.")}).catch(u=>{a.error(u)})})}logout(){return I(this.auth.signOut()).pipe(_r(()=>{sessionStorage.removeItem("user"),this.user$$.next(void 0)}))}updateProfile(n,r,i){return this.auth.authState.pipe(Te(o=>{if(o){const s=o.uid,a={username:n,email:r,tel:i};return I(this.firestore.collection("users").doc(s).update(a))}throw new Error("No authenticated user")}),Gi(o=>{throw console.error("Error updating profile:",o),o}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)(ce(PD),ce(gC),ce(vn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dJ(t,e){1&t&&(Su(),function mm(){!function K0(){Be.lFrame.currentNamespace=null}()}(),S(0,"div")(1,"p",11),U(2,"If you want to use additional discounts, you can log in or register."),O(),S(3,"div",12)(4,"button",13),U(5,"Login"),O(),S(6,"button",14),U(7,"Register"),O()()())}let hJ=(()=>{class t{constructor(n){this.userService=n}get isLogged(){return this.userService.isLogged}static#e=this.\u0275fac=function(r){return new(r||t)(Q(wo))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-home"]],decls:18,vars:1,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"all"],[1,"video-background"],["muted","true","loop","","autoplay","","src","assets/video1.mp4","type","video/mp4"],[1,"hero-section"],[1,"container"],[1,"wrapper"],["x","50%","y","50%","dy",".35em","text-anchor","middle"],[4,"ngIf"],[1,"hero-subheading"],[1,"buttons"],["routerLink","/login","type","button",1,"glow-on-hover"],["routerLink","/register","type","button",1,"glow-on-hover"]],template:function(r,i){1&r&&(S(0,"html",0)(1,"head"),Ce(2,"meta",1)(3,"meta",2),S(4,"title"),U(5,"Dimensional Nutritions"),O()(),S(6,"body")(7,"div",3)(8,"div",4)(9,"video",5),U(10," Your browser does not support the video tag. "),O()(),S(11,"section",6)(12,"div",7)(13,"div",8),Su(),S(14,"svg")(15,"text",9),U(16," Dimensional Nutrition "),O()()(),xe(17,dJ,8,0,"div",10),O()()()()()),2&r&&(X(17),me("ngIf",!i.isLogged))},dependencies:[qi,No],styles:['@import"https://fonts.googleapis.com/css2?family=Risque&display=swap";body[_ngcontent-%COMP%]{color:#fff;text-align:center;font-family:Arial,sans-serif;margin-right:7em}.hero-section[_ngcontent-%COMP%]{margin-top:15%;margin-left:10%;justify-content:center}.hero-heading[_ngcontent-%COMP%]{font-size:4em;margin-bottom:20px}.hero-subheading[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:40px;animation:_ngcontent-%COMP%_myAnim 2s ease 0s 1 normal forwards}.buttons[_ngcontent-%COMP%]{margin-right:40px}@keyframes _ngcontent-%COMP%_myAnim{0%{animation-timing-function:ease-in;opacity:0;transform:translateY(-250px)}38%{animation-timing-function:ease-out;opacity:1;transform:translateY(0)}55%{animation-timing-function:ease-in;transform:translateY(-65px)}72%{animation-timing-function:ease-out;transform:translateY(0)}81%{animation-timing-function:ease-in;transform:translateY(-28px)}90%{animation-timing-function:ease-out;transform:translateY(0)}95%{animation-timing-function:ease-in;transform:translateY(-8px)}to{animation-timing-function:ease-out;transform:translateY(0)}}.video-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;overflow:hidden;z-index:-2}.video-background[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-width:100%;min-height:100%}.video-background[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{opacity:.8}.glow-on-hover[_ngcontent-%COMP%]{width:160px;height:35px;border:none;outline:none;cursor:pointer;position:relative;z-index:0;border-radius:10px}.glow-on-hover[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(45deg,#ff0000,#ff7300,#fffb00,#48ff00,#00ffd5,#002bff,#7a00ff,#ff00c8,#ff0000);position:absolute;top:-2px;left:-2px;background-size:400%;z-index:-1;filter:blur(5px);width:calc(100% + 4px);height:calc(100% + 4px);animation:_ngcontent-%COMP%_glowing 20s linear infinite;opacity:0;transition:opacity .3s ease-in-out;border-radius:10px}.glow-on-hover[_ngcontent-%COMP%]:active{color:#000}.glow-on-hover[_ngcontent-%COMP%]:active:after{background:transparent}.glow-on-hover[_ngcontent-%COMP%]:hover:before{opacity:1}.glow-on-hover[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;width:100%;height:100%;opacity:.3;left:0;top:0;border-radius:10px}.glow-on-hover[_ngcontent-%COMP%]{margin-left:20px}@keyframes _ngcontent-%COMP%_glowing{0%{background-position:0 0}50%{background-position:400% 0}to{background-position:0 0}}svg[_ngcontent-%COMP%]{font-family:Risque,sans-serif;width:100%;height:100%}svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_stroke 5s infinite alternate;stroke-width:2;stroke:#000;font-size:100px}@keyframes _ngcontent-%COMP%_stroke{0%{fill:#22405f00;stroke:#000;stroke-dashoffset:25%;stroke-dasharray:0 50%;stroke-width:2}70%{fill:#22405f00;stroke:#000}80%{fill:#22405f00;stroke:#000;stroke-width:3}to{fill:#22405f;stroke:#0000;stroke-dashoffset:-25%;stroke-dasharray:50% 0;stroke-width:0}}@media (max-width: 1024px){body[_ngcontent-%COMP%]{margin:0 auto}.hero-section[_ngcontent-%COMP%]{margin-top:20%;margin-left:auto;margin-right:auto}.hero-subheading[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:20px;justify-content:center;text-align:center}.glow-on-hover[_ngcontent-%COMP%]{width:140px;height:35px;font-size:1em;margin:10px}.wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-size:70px}}@media (max-width: 767px){.hero-section[_ngcontent-%COMP%]{margin-top:30%;margin-left:auto;margin-right:auto}.hero-subheading[_ngcontent-%COMP%]{font-size:1em;margin:10px}.glow-on-hover[_ngcontent-%COMP%]{width:120px;height:35px;font-size:.9em;margin:10px}.wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-size:40px}.video-background[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{min-width:200%}}']})}return t})(),Xp=(()=>{class t{constructor(n){this.firestore=n}getData(){return this.firestore.collection("products ").valueChanges()}getProductByName(n){return this.firestore.collection("products ",r=>r.where("name","==",n)).valueChanges().pipe(he(r=>{if(r.length>0)return r[0];throw new Error("Product not found")}))}updateProduct(n,r){return new We(i=>{this.firestore.collection("products ",o=>o.where("name","==",n)).get().toPromise().then(o=>{if(console.log("Snapshot:",o),o&&!o.empty){const s=o.docs[0];return console.log("Updating document ID:",s.id),s.ref.update(r)}return console.error("Product not found in snapshot."),void i.error(new Error("Product not found for update"))}).then(()=>{i.next(),i.complete()}).catch(o=>{console.error("Error during update:",o),i.error(o)})})}deleteProduct(n){return new We(r=>{this.firestore.collection("products ",i=>i.where("name","==",n)).get().toPromise().then(i=>{if(i&&!i.empty)return i.docs[0].ref.delete();r.error(new Error("Product not found for deletion"))}).then(()=>{r.next(),r.complete()}).catch(i=>{r.error(i)})})}getDiscountUser(){return this.firestore.doc("discount/disc").valueChanges()}getDiscountGuest(){return this.firestore.doc("discount/disc_guest").valueChanges()}getComments(){return this.firestore.collection("comments").valueChanges()}postComment(n){return I(this.firestore.collection("comments").add(n)).pipe(he(i=>i.id),Gi(i=>(console.error("Error adding comment: ",i),ju(i))))}deleteComment(n){return I(this.firestore.doc(`comments/${n}`).delete()).pipe(Gi(i=>(console.error("Error deleting comment: ",i),ju(i))))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(PD))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yL=(()=>{class t{toggleLike(n){const r=n.target;r&&r.classList.toggle("liked")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-like-btn"]],decls:4,vars:0,consts:[[1,"button-like",3,"click"],[1,"fa","fa-heart"]],template:function(r,i){1&r&&(S(0,"button",0),Ft("click",function(s){return i.toggleLike(s)}),Ce(1,"i",1),S(2,"span"),U(3,"Like"),O()())},styles:[".button-like[_ngcontent-%COMP%]{border:2px solid #8a8a8a;background-color:transparent;text-decoration:none;padding:.7em;position:relative;vertical-align:middle;text-align:center;display:inline-block;border-radius:3rem;color:#8a8a8a;transition:all ease .4s}.button-like.liked[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{border-color:#cc4b37}.button-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .button-like[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:all ease .4s}.button-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#8a8a8a}.button-like[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8a8a8a;margin:1em}.button-like.liked[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .button-like.liked[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#cc4b37}"]})}return t})(),fJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(r,i){1&r&&Ce(0,"div",0)},styles:['.loader[_ngcontent-%COMP%]{height:15px;aspect-ratio:4;display:grid}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;--_g: no-repeat radial-gradient(farthest-side,#000 94%,#0000);background:var(--_g) left,var(--_g) right;background-size:25% 100%;animation:_ngcontent-%COMP%_l34 1s infinite;transform:translate(var(--d,0)) rotate(0)}.loader[_ngcontent-%COMP%]:after{--d: 37.5%;animation-delay:.5s}@keyframes _ngcontent-%COMP%_l34{50%,to{transform:translate(var(--d,0)) rotate(.5turn)}}']})}return t})(),vL=(()=>{class t{transform(n,r=5){return`${n.substring(0,r)}${n.length>r?"...":""}`}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=Xn({name:"slice",type:t,pure:!0})}return t})();function pJ(t,e){1&t&&(S(0,"div"),Ce(1,"app-loader"),O())}function gJ(t,e){if(1&t&&(S(0,"p",20),U(1),O()),2&t){const n=et().$implicit;X(1),yn(n.description)}}function mJ(t,e){1&t&&(S(0,"div",21),Ce(1,"app-like-btn"),O())}const _J=function(t){return["/product",t]};function yJ(t,e){if(1&t&&(S(0,"div",6)(1,"div",7)(2,"div",8),Ce(3,"img",9),O(),S(4,"div",10)(5,"h1"),U(6),O(),S(7,"h2"),U(8),O(),S(9,"div",11),Ce(10,"i",12)(11,"i",12)(12,"i",12)(13,"i",12)(14,"i",13),S(15,"span"),U(16),O()(),S(17,"div",14)(18,"span",15),U(19),O(),S(20,"span",15),U(21),O(),S(22,"span",15),U(23),O()(),S(24,"h2"),U(25,"Description:"),O(),S(26,"p",16),U(27),kE(28,"slice"),S(29,"span"),U(30,"..."),O()(),S(31,"button",17),U(32),O(),xe(33,gJ,2,1,"p",18),S(34,"h2"),U(35),O(),xe(36,mJ,2,0,"div",19),O()()()),2&t){const n=e.$implicit,r=et();X(3),af("src",n.img,Hh),X(3),yn(n.name),X(2),yn(n.posted),X(8),yn(n.rating),X(3),yn(n.tag1),X(2),yn(n.tag2),X(2),yn(n.tag3),X(4),yn(VE(28,13,n.description,30)),X(4),me("routerLink",NE(16,_J,n.name)),X(1),yn(r.showFullDescription?"Show Less":"Show More"),X(1),me("ngIf",r.showFullDescription),X(2),ai("Price: ",n.price," lv"),X(1),me("ngIf",r.isLogged&&!r.isAdmin)}}const IL='@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}body[_ngcontent-%COMP%]{background:rgb(243,243,243);background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);display:flex;align-items:center;justify-content:center;min-height:100vh}h1[_ngcontent-%COMP%]{font-family:Georgia,Times New Roman,Times,serif;text-align:center;font-size:50px;margin-top:30px}.wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding:20px;display:flex;align-content:center;justify-content:center;gap:24px;flex-wrap:wrap}.card[_ngcontent-%COMP%]{position:relative;width:325px;height:450px;background:#000;border-radius:18px;overflow:hidden;box-shadow:0 5px 10px #0003}.poster[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;height:100%;overflow:hidden}.poster[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-45%;left:0;width:100%;height:100%;z-index:1;transition:.3s}.card[_ngcontent-%COMP%]:hover   .poster[_ngcontent-%COMP%]:before{bottom:0}.poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;transition:.3s}.card[_ngcontent-%COMP%]:hover   .poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.1)}.details[_ngcontent-%COMP%]{position:absolute;bottom:-100%;left:0;width:100%;height:auto;padding:1.5em 1.5em 2em;background:#000a;-webkit-backdrop-filter:blur(16px) saturate(120%);backdrop-filter:blur(16px) saturate(120%);transition:.3s;color:#fff;z-index:2}.card[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]{bottom:0}.details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;font-size:1em;margin-bottom:10px;opacity:.6}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{position:relative;margin-bottom:15px;display:flex;gap:.25em}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e3c414}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.25em}.details[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;gap:.375em;margin-bottom:.875em;font-size:.85em}.details[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.35rem .65rem;color:#fff;border:1.5px solid rgba(255 255 255 / .4);border-radius:50px}.details[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#fff;opacity:.8;line-height:1.5;margin-bottom:1em}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5em}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;gap:.625rem;width:100%}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;width:55px;height:55px;border-radius:50%;overflow:hidden;border:1.5px solid #fff}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.view-more[_ngcontent-%COMP%]{padding:5px;margin-bottom:10px;font-size:12px;background:#dc5130;border:0px;color:#fff;border-radius:5px}@media (max-width: 1024px){.wrapper[_ngcontent-%COMP%]{flex-direction:column}.card[_ngcontent-%COMP%]{width:90%;margin-bottom:20px}}@media (max-width: 767px){.card[_ngcontent-%COMP%]{width:95%}}';let vJ=(()=>{class t{toggleDescription(){this.showFullDescription=!this.showFullDescription}constructor(n,r,i){this.apiService=n,this.router=r,this.userService=i,this.products=[],this.isLoading=!0,this.showFullDescription=!1}get isLogged(){return this.userService.isLogged}get isAdmin(){return this.userService.isAdmin()}ngOnInit(){this.apiService.getData().subscribe(n=>{console.log(n),this.products=n,this.isLoading=!1},n=>{this.isLoading=!1,console.error(`Error: ${n}`)})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Xp),Q(vn),Q(wo))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-products"]],decls:10,vars:2,consts:[["lang","en"],["charset","UTF-8"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/hint.css/2.7.0/hint.min.css"],[4,"ngIf"],["class","wrapper",4,"ngFor","ngForOf"],[1,"wrapper"],[1,"card"],[1,"poster"],["alt","Location Unknown",3,"src"],[1,"details"],[1,"rating"],[1,"fas","fa-star"],[1,"far","fa-star"],[1,"tags"],[1,"tag"],[1,"desc"],[1,"view-more",3,"routerLink"],["class","full-desc",4,"ngIf"],["class","like-btn",4,"ngIf"],[1,"full-desc"],[1,"like-btn"]],template:function(r,i){1&r&&(S(0,"html",0)(1,"head"),Ce(2,"meta",1),S(3,"title"),U(4,"CodePen - Movie Poster Interaction"),O(),Ce(5,"link",2)(6,"link",3),O(),S(7,"body"),xe(8,pJ,2,0,"div",4),xe(9,yJ,37,18,"div",5),O()()),2&r&&(X(8),me("ngIf",i.isLoading),X(1),me("ngForOf",i.products))},dependencies:[bw,qi,No,yL,fJ,vL],styles:[IL,IL]})}return t})();function IJ(t,e){1&t&&Ce(0,"span")}function EJ(t,e){if(1&t&&(S(0,"p",9),U(1),kE(2,"slice"),xe(3,IJ,1,0,"span",5),O()),2&t){const n=et();X(1),ai(" ",VE(2,2,n.description,55)," "),X(2),me("ngIf",n.description.length>40)}}function wJ(t,e){if(1&t&&(S(0,"p",9),U(1),O()),2&t){const n=et();X(1),ai(" ",n.description," ")}}function CJ(t,e){if(1&t){const n=Yo();S(0,"a")(1,"button",10),Ft("click",function(){return br(n),si(et().toggleDescription())}),U(2),O()()}if(2&t){const n=et();X(2),ai(" ",n.isReadMore?"View Less":"View More"," ")}}let bJ=(()=>{class t{constructor(){this.description="With our products, we keep our athletes in good shape. We offer high quality products available to all athletes who want to have a stunning body. Anyone can order a variety of products available on our site.",this.isReadMore=!1}toggleDescription(){this.isReadMore=!this.isReadMore}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-about"]],decls:13,vars:3,consts:[[1,"responsive-container-block","bigContainer"],[1,"responsive-container-block","Container","bottomContainer"],[1,"allText","bottomText"],[1,"text-blk","subHeadingText"],["class","text-blk description",4,"ngIf"],[4,"ngIf"],["behavior","","direction",""],[1,"videoContainer"],["allowfullscreen","allowfullscreen","controls","controls","src","/assets/video.mp4","muted","true",1,"mainVideo"],[1,"text-blk","description"],[1,"explore",3,"click"]],template:function(r,i){1&r&&(S(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"p",3),U(5," The Dimensional Nutritions family "),O(),xe(6,EJ,4,5,"p",4),xe(7,wJ,2,1,"p",4),xe(8,CJ,3,1,"a",5),S(9,"marquee",6),U(10," You can view more about our products, if you make you account. "),O()(),S(11,"div",7),Ce(12,"iframe",8),O()()()()),2&r&&(X(6),me("ngIf",!i.isReadMore),X(1),me("ngIf",i.isReadMore),X(1),me("ngIf",i.description.length>40))},dependencies:[qi,vL],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;600;700;800&amp;display=swap";*[_ngcontent-%COMP%]{font-family:Nunito,sans-serif}body[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%)}.responsive-container-block[_ngcontent-%COMP%]{min-height:75px;height:-moz-fit-content;height:fit-content;width:100%;padding:0;display:flex;flex-wrap:wrap;margin:0 auto;justify-content:flex-start}.text-blk[_ngcontent-%COMP%]{margin:0;padding:10px;line-height:25px}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center;padding:10px 50px}.text-blk.headingText[_ngcontent-%COMP%]{font-size:23px;font-weight:700;line-height:28px;color:#0087b1;margin:0 0 10px;padding:0 10px 0 0}.allText[_ngcontent-%COMP%]{padding:0;width:50%;margin:0}.text-blk.subHeadingText[_ngcontent-%COMP%]{color:#666;font-size:32px;line-height:40px;font-weight:700;margin:0 0 15px;padding:0 10px 0 0}.text-blk.description[_ngcontent-%COMP%]{font-size:18px;line-height:28px;color:#999;padding:0 10px 0 0;margin:0 0 40px}.explore[_ngcontent-%COMP%]{font-size:18px;line-height:28px;color:#fff;background-color:#3a66d6;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-top-style:outset;border-right-style:outset;border-bottom-style:outset;border-left-style:outset;border-top-color:#3a66d6;border-right-color:#3a66d6;border-bottom-color:#3a66d6;border-left-color:#3a66d6;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;cursor:pointer;box-shadow:#f4989240 0 10px 20px;border-radius:10px;padding:9px 45px}.explore[_ngcontent-%COMP%]:hover{background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#00f}.responsive-container-block.Container[_ngcontent-%COMP%]{margin:80px auto 50px;justify-content:center;align-items:center;max-width:1320px;padding:10px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{flex-direction:row;margin:50px auto}.allText.aboveText[_ngcontent-%COMP%]{margin:0 0 0 40px}.allText.bottomText[_ngcontent-%COMP%]{margin:0 40px 25px 0;border:2px solid #fff;border-radius:50px;display:block;text-align:center;padding:50px;box-shadow:-26px 13px 22px 6px #2a7d98d6;-webkit-box-shadow:-26px 13px 22px 6px rgba(42,125,152,.84);-moz-box-shadow:-26px 13px 22px 6px rgba(42,125,152,.84)}marquee[_ngcontent-%COMP%]{margin-top:20px;color:#439852}.mainVideo[_ngcontent-%COMP%]{width:85%;height:288px;margin:-30px 0 0;border-radius:10px;box-shadow:14px 15px 22px 6px #2a7d98d6;-webkit-box-shadow:14px 15px 22px 6px rgba(42,125,152,.84);-moz-box-shadow:14px 15px 22px 6px rgba(42,125,152,.84)}.videoContainer[_ngcontent-%COMP%]{width:46%;height:600px;display:flex;justify-content:flex-start;align-items:center;position:relative;padding:0 0 0 10px}.mainVideo[_ngcontent-%COMP%]{z-index:10}.dotsImg[_ngcontent-%COMP%]{position:absolute;width:80%;height:600px;top:0;right:0;object-fit:cover}@media (max-width: 1024px){.responsive-container-block.Container[_ngcontent-%COMP%]{max-width:850px}.text-blk.description[_ngcontent-%COMP%]{font-size:18px}.allText[_ngcontent-%COMP%]{width:40%;margin:0 0 0 20px}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px}.text-blk.subHeadingText[_ngcontent-%COMP%]{font-size:30px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{margin:80px auto 50px}.responsive-container-block.Container[_ngcontent-%COMP%]{max-width:830px}.allText.aboveText[_ngcontent-%COMP%]{margin:30px 0 0 40px}.allText.bottomText[_ngcontent-%COMP%]{margin:30px 40px 0 0}.allText.bottomText[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:30px 0}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{flex-direction:column}.text-blk.headingText[_ngcontent-%COMP%]{text-align:center;font-size:22px}.text-blk.subHeadingText[_ngcontent-%COMP%], .text-blk.description[_ngcontent-%COMP%]{text-align:center}.explore[_ngcontent-%COMP%], #inc0s[_ngcontent-%COMP%]{margin:0 auto}.dotsImg[_ngcontent-%COMP%]{width:50%;left:50%;transform:translate(-50%)}.videoContainer[_ngcontent-%COMP%]{width:100%;padding:0}.mainVideo[_ngcontent-%COMP%]{width:100%}.allText.bottomText[_ngcontent-%COMP%]{margin:30px 0 60px}.text-blk.description[_ngcontent-%COMP%], .text-blk.headingText[_ngcontent-%COMP%], .text-blk.subHeadingText[_ngcontent-%COMP%]{padding:0}.mainVideo[_ngcontent-%COMP%]{margin:0}}@media (max-width: 768px){.allText[_ngcontent-%COMP%]{width:100%;margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0}.responsive-container-block.Container[_ngcontent-%COMP%]{flex-direction:column;height:auto}.text-blk.headingText[_ngcontent-%COMP%]{text-align:center}.text-blk.subHeadingText[_ngcontent-%COMP%]{text-align:center;font-size:28px;line-height:38px}.text-blk.description[_ngcontent-%COMP%]{text-align:center;font-size:18px;line-height:27px}.allText[_ngcontent-%COMP%], .allText.aboveText[_ngcontent-%COMP%]{margin:40px 0 0}.responsive-container-block.Container[_ngcontent-%COMP%]{margin:80px auto 50px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{margin:50px auto;padding:0 0 0 10px}.allText.bottomText[_ngcontent-%COMP%]{margin:40px 0 0;border-radius:25px solid transparent;border-color:#f0f8ff}.allText.bottomText[_ngcontent-%COMP%]{margin:40px 0 60px}.mainVideo[_ngcontent-%COMP%]{height:400px}.videoContainer[_ngcontent-%COMP%]{height:550px}.explore[_ngcontent-%COMP%]{font-size:16px;padding:8px 10px}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:0 50px}}@media (max-width: 500px){.responsive-container-block.Container[_ngcontent-%COMP%]{padding:10px 0;width:100%;max-width:100%}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px 25px}.allText[_ngcontent-%COMP%]{padding:0;width:100%}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px 20px}.explore[_ngcontent-%COMP%]{font-size:16px;line-height:25px;padding:8px 15px}.dotsImg[_ngcontent-%COMP%]{width:80%;height:100%}.mainVideo[_ngcontent-%COMP%]{height:260px}.videoContainer[_ngcontent-%COMP%]{height:320px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{padding:0}.text-blk.description[_ngcontent-%COMP%]{font-size:16px;line-height:23px;margin:0 0 30px}.text-blk.subHeadingText[_ngcontent-%COMP%]{font-size:24px}}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0}.wk-desk-1[_ngcontent-%COMP%]{width:8.333333%}.wk-desk-2[_ngcontent-%COMP%]{width:16.666667%}.wk-desk-3[_ngcontent-%COMP%]{width:25%}.wk-desk-4[_ngcontent-%COMP%]{width:33.333333%}.wk-desk-5[_ngcontent-%COMP%]{width:41.666667%}.wk-desk-6[_ngcontent-%COMP%]{width:50%}.wk-desk-7[_ngcontent-%COMP%]{width:58.333333%}.wk-desk-8[_ngcontent-%COMP%]{width:66.666667%}.wk-desk-9[_ngcontent-%COMP%]{width:75%}.wk-desk-10[_ngcontent-%COMP%]{width:83.333333%}.wk-desk-11[_ngcontent-%COMP%]{width:91.666667%}.wk-desk-12[_ngcontent-%COMP%]{width:100%}@media (max-width: 1024px){.wk-ipadp-1[_ngcontent-%COMP%]{width:8.333333%}.wk-ipadp-2[_ngcontent-%COMP%]{width:16.666667%}.wk-ipadp-3[_ngcontent-%COMP%]{width:25%}.wk-ipadp-4[_ngcontent-%COMP%]{width:33.333333%}.wk-ipadp-5[_ngcontent-%COMP%]{width:41.666667%}.wk-ipadp-6[_ngcontent-%COMP%]{width:50%}.wk-ipadp-7[_ngcontent-%COMP%]{width:58.333333%}.wk-ipadp-8[_ngcontent-%COMP%]{width:66.666667%}.wk-ipadp-9[_ngcontent-%COMP%]{width:75%}.wk-ipadp-10[_ngcontent-%COMP%]{width:83.333333%}.wk-ipadp-11[_ngcontent-%COMP%]{width:91.666667%}.wk-ipadp-12[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.wk-tab-1[_ngcontent-%COMP%]{width:8.333333%}.wk-tab-2[_ngcontent-%COMP%]{width:16.666667%}.wk-tab-3[_ngcontent-%COMP%]{width:25%}.wk-tab-4[_ngcontent-%COMP%]{width:33.333333%}.wk-tab-5[_ngcontent-%COMP%]{width:41.666667%}.wk-tab-6[_ngcontent-%COMP%]{width:50%}.wk-tab-7[_ngcontent-%COMP%]{width:58.333333%}.wk-tab-8[_ngcontent-%COMP%]{width:66.666667%}.wk-tab-9[_ngcontent-%COMP%]{width:75%}.wk-tab-10[_ngcontent-%COMP%]{width:83.333333%}.wk-tab-11[_ngcontent-%COMP%]{width:91.666667%}.wk-tab-12[_ngcontent-%COMP%]{width:100%}}@media (max-width: 500px){.wk-mobile-1[_ngcontent-%COMP%]{width:8.333333%}.wk-mobile-2[_ngcontent-%COMP%]{width:16.666667%}.wk-mobile-3[_ngcontent-%COMP%]{width:25%}.wk-mobile-4[_ngcontent-%COMP%]{width:33.333333%}.wk-mobile-5[_ngcontent-%COMP%]{width:41.666667%}.wk-mobile-6[_ngcontent-%COMP%]{width:50%}.wk-mobile-7[_ngcontent-%COMP%]{width:58.333333%}.wk-mobile-8[_ngcontent-%COMP%]{width:66.666667%}.wk-mobile-9[_ngcontent-%COMP%]{width:75%}.wk-mobile-10[_ngcontent-%COMP%]{width:83.333333%}.wk-mobile-11[_ngcontent-%COMP%]{width:91.666667%}.wk-mobile-12[_ngcontent-%COMP%]{width:100%}}[_ngcontent-%COMP%]:root{--rich-black-fogra-29_50: hsl(210, 26%, 11%, .5);--rich-black-fogra-29-1: hsl(210, 26%, 11%);--rich-black-fogra-29-2: hsl(210, 50%, 4%);--silver-metallic: hsl(212, 9%, 67%);--coquelicot_20: hsla(12, 98%, 52%, .2);--coquelicot_10: hsla(12, 98%, 52%, .1);--sonic-silver: hsl(0, 0%, 47%);--cadet-gray: hsl(214, 15%, 62%);--light-gray: hsl(0, 0%, 80%);--coquelicot: hsl(12, 98%, 52%);--gainsboro: hsl(0, 0%, 88%);--white_20: hsl(0, 0%, 100%, .2);--white_10: hsl(0, 0%, 100%, .1);--black_10: hsl(0, 0%, 0%, .1);--white: hsl(0, 0%, 100%);--ff-catamaran: "Catamaran", sans-serif;--ff-rubik: "Rubik", sans-serif;--fs-1: 3.8rem;--fs-2: 3rem;--fs-3: 2.5rem;--fs-4: 2rem;--fs-5: 1.8rem;--fs-6: 1.5rem;--fw-900: 900;--fw-800: 800;--fw-700: 700;--fw-500: 500;--section-padding: 80px;--shadow-1: 0 0 20px var(--black_10);--shadow-2: 0px 10px 24px var(--coquelicot_20);--radius-10: 10px;--radius-8: 8px;--radius-5: 5px;--transition-1: .25s ease;--transition-2: .5s ease;--cubic-in: cubic-bezier(.51, .03, .64, .28);--cubic-out: cubic-bezier(.33, .85, .4, .96)}button[_ngcontent-%COMP%]{width:220px;height:50px;border:none;outline:none;color:#fff;cursor:pointer;position:relative;z-index:0;border-radius:10px}button[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(45deg,#ff0000,#ff7300,#fffb00,#48ff00,#00ffd5,#002bff,#7a00ff,#ff00c8,#ff0000);position:absolute;top:-2px;left:-2px;background-size:400%;z-index:-1;filter:blur(5px);width:calc(100% + 4px);height:calc(100% + 4px);animation:glowing 20s linear infinite;opacity:0;transition:opacity .3s ease-in-out;border-radius:10px}button[_ngcontent-%COMP%]:active{color:#000}button[_ngcontent-%COMP%]:active:after{background:transparent}button[_ngcontent-%COMP%]:hover:before{opacity:1}button[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;width:100%;height:100%;opacity:.3;left:0;top:0;border-radius:10px}button[_ngcontent-%COMP%]{margin-left:20px}']})}return t})(),TJ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-error"]],decls:18,vars:0,consts:[["lang","en"],["charset","utf-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1"],["href","https://fonts.googleapis.com/css?family=Montserrat:700,900","rel","stylesheet"],["id","notfound"],[1,"notfound"],[1,"notfound-404"],["routerLink","/"]],template:function(r,i){1&r&&(S(0,"html",0)(1,"head"),Ce(2,"meta",1)(3,"meta",2)(4,"meta",3),S(5,"title"),U(6,"404 HTML Template by Colorlib"),O(),Ce(7,"link",4),O(),S(8,"body")(9,"div",5)(10,"div",6)(11,"div",7)(12,"h1"),U(13,"404"),O(),S(14,"h2"),U(15,"Page not found"),O()(),S(16,"a",8),U(17,"Homepage"),O()()()()())},dependencies:[No],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{padding:0;margin:0}#notfound[_ngcontent-%COMP%]{position:relative;height:100vh;background:#030005}#notfound[_ngcontent-%COMP%]   .notfound[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.notfound[_ngcontent-%COMP%]{max-width:767px;width:100%;line-height:1.4;text-align:center}.notfound[_ngcontent-%COMP%]   .notfound-404[_ngcontent-%COMP%]{position:relative;height:180px;margin-bottom:20px;z-index:-1}.notfound[_ngcontent-%COMP%]   .notfound-404[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:224px;font-weight:900;margin-top:0;margin-bottom:0;margin-left:-12px;color:#030005;text-transform:uppercase;text-shadow:-1px -1px 0px #8400ff,1px 1px 0px #ff005a;letter-spacing:-20px}.notfound[_ngcontent-%COMP%]   .notfound-404[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;position:absolute;left:0;right:0;top:110px;font-size:42px;font-weight:700;color:#fff;text-transform:uppercase;text-shadow:0px 2px 0px #8400ff;letter-spacing:13px;margin:0}.notfound[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;display:inline-block;text-transform:uppercase;color:#ff005a;text-decoration:none;border:2px solid;background:transparent;padding:10px 40px;font-size:14px;font-weight:700;transition:.2s all}.notfound[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#8400ff}@media only screen and (max-width: 767px){.notfound[_ngcontent-%COMP%]   .notfound-404[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}@media only screen and (max-width: 480px){.notfound[_ngcontent-%COMP%]   .notfound-404[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:182px}}"]})}return t})();const DJ=[" "];let EL=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Ss),Q(ji))};static#t=this.\u0275dir=Ue({type:t})}return t})(),_c=(()=>{class t extends EL{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,features:[Vt]})}return t})();const hs=new de("NgValueAccessor"),PJ={provide:hs,useExisting:F(()=>Ks),multi:!0},MJ=new de("CompositionEventMode");let Ks=(()=>{class t extends EL{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xJ(){const t=ma()?ma().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Ss),Q(ji),Q(MJ,8))};static#t=this.\u0275dir=Ue({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ft("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Qt([PJ]),Vt]})}return t})();function Ha(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function CL(t){return null!=t&&"number"==typeof t.length}const Mr=new de("NgValidators"),qa=new de("NgAsyncValidators"),RJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wt{static min(e){return bL(e)}static max(e){return TL(e)}static required(e){return DL(e)}static requiredTrue(e){return function AL(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function SL(t){return Ha(t.value)||RJ.test(t.value)?null:{email:!0}}(e)}static minLength(e){return PL(e)}static maxLength(e){return function xL(t){return e=>CL(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function ML(t){if(!t)return Uv;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Ha(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return FL(e)}static composeAsync(e){return LL(e)}}function bL(t){return e=>{if(Ha(e.value)||Ha(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function TL(t){return e=>{if(Ha(e.value)||Ha(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function DL(t){return Ha(t.value)?{required:!0}:null}function PL(t){return e=>Ha(e.value)||!CL(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Uv(t){return null}function RL(t){return null!=t}function OL(t){return sf(t)?I(t):t}function NL(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function kL(t,e){return e.map(n=>n(t))}function VL(t){return t.map(e=>function OJ(t){return!t.validate}(e)?e:n=>e.validate(n))}function FL(t){if(!t)return null;const e=t.filter(RL);return 0==e.length?null:function(n){return NL(kL(n,e))}}function xD(t){return null!=t?FL(VL(t)):null}function LL(t){if(!t)return null;const e=t.filter(RL);return 0==e.length?null:function(n){return function AJ(...t){const e=ro(t),{args:n,keys:r}=HR(t),i=new We(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let h=0;h<s;h++){let g=!1;_t(n[h]).subscribe(ge(o,m=>{g||(g=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!g)&&(l||o.next(r?GR(r,a):a),o.complete())}))}});return e?i.pipe(qR(e)):i}(kL(n,e).map(OL)).pipe(he(NL))}}function MD(t){return null!=t?LL(VL(t)):null}function UL(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function BL(t){return t._rawValidators}function jL(t){return t._rawAsyncValidators}function RD(t){return t?Array.isArray(t)?t:[t]:[]}function Bv(t,e){return Array.isArray(t)?t.includes(e):t===e}function $L(t,e){const n=RD(e);return RD(t).forEach(i=>{Bv(n,i)||n.push(i)}),n}function zL(t,e){return RD(e).filter(n=>!Bv(t,n))}class HL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=MD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class gi extends HL{get formDirective(){return null}get path(){return null}}class Ga extends HL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yc=(()=>{class t extends qL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Ga,2))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&uf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Vt]})}return t})(),Wa=(()=>{class t extends qL{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(gi,10))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&uf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Vt]})}return t})();const eg="VALID",$v="INVALID",Hd="PENDING",tg="DISABLED";function kD(t){return(zv(t)?t.validators:t)||null}function VD(t,e){return(zv(e)?e.asyncValidators:t)||null}function zv(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function WL(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function ZL(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new G(1002,"")})}class Hv{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===eg}get invalid(){return this.status===$v}get pending(){return this.status==Hd}get disabled(){return this.status===tg}get enabled(){return this.status!==tg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($L(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($L(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zL(e,this._rawAsyncValidators))}hasValidator(e){return Bv(this._rawValidators,e)}hasAsyncValidator(e){return Bv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=tg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=eg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===eg||this.status===Hd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tg:eg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hd,this._hasOwnPendingAsyncValidator=!0;const n=OL(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?tg:this.errors?$v:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hd)?Hd:this._anyControlsHaveStatus($v)?$v:eg}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function FJ(t){return Array.isArray(t)?xD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function LJ(t){return Array.isArray(t)?MD(t):t||null}(this._rawAsyncValidators)}}class ng extends Hv{constructor(e,n,r){super(kD(n),VD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ZL(this,0,e),Object.keys(e).forEach(r=>{WL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class KL extends ng{}const vc=new de("CallSetDisabledState",{providedIn:"root",factory:()=>rg}),rg="always";function qv(t,e){return[...e.path,t]}function ig(t,e,n=rg){FD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function BJ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&QL(t,e)})}(t,e),function $J(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function jJ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&QL(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function UJ(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Gv(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Zv(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Wv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function FD(t,e){const n=BL(t);null!==e.validator?t.setValidators(UL(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=jL(t);null!==e.asyncValidator?t.setAsyncValidators(UL(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Wv(e._rawValidators,i),Wv(e._rawAsyncValidators,i)}function Zv(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=BL(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=jL(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return Wv(e._rawValidators,r),Wv(e._rawAsyncValidators,r),n}function QL(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function YL(t,e){FD(t,e)}function UD(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function JL(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BD(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Ks?n=o:function qJ(t){return Object.getPrototypeOf(t.constructor)===_c}(o)?r=o:i=o}),i||r||n||null}const WJ={provide:gi,useExisting:F(()=>sg)},og=(()=>Promise.resolve())();let sg=(()=>{class t extends gi{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mn,this.form=new ng({},xD(n),MD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){og.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),ig(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){og.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){og.then(()=>{const r=this._findContainer(n.path),i=new ng({});YL(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){og.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){og.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,JL(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Mr,10),Q(qa,10),Q(vc,8))};static#t=this.\u0275dir=Ue({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ft("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qt([WJ]),Vt]})}return t})();function XL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function eU(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const ag=class extends Hv{constructor(e=null,n,r){super(kD(n),VD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=eU(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){eU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let tU=(()=>{class t extends gi{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return qv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,features:[Vt]})}return t})();const QJ={provide:Ga,useExisting:F(()=>jD)},rU=(()=>Promise.resolve())();let jD=(()=>{class t extends Ga{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ag,this._registered=!1,this.name="",this.update=new Mn,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BD(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),UD(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ig(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){rU.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Ul(r);rU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?qv(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(Q(gi,9),Q(Mr,10),Q(qa,10),Q(hs,10),Q(T_,8),Q(vc,8))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qt([QJ]),Vt,ii]})}return t})(),Za=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ue({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const YJ={provide:hs,useExisting:F(()=>Kv),multi:!0};let Kv=(()=>{class t extends _c{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&Ft("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Qt([YJ]),Vt]})}return t})(),iU=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({})}return t})();const $D=new de("NgModelWithFormControlWarning"),nX={provide:gi,useExisting:F(()=>Ka)};let Ka=(()=>{class t extends gi{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Mn,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return ig(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Gv(n.control||null,n,!1),function GJ(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,JL(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(Gv(r||null,n),(t=>t instanceof ag)(i)&&(ig(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);YL(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function zJ(t,e){return Zv(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FD(this.form,this),this._oldForm&&Zv(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Mr,10),Q(qa,10),Q(vc,8))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Ft("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qt([nX]),Vt,ii]})}return t})();const rX={provide:gi,useExisting:F(()=>Qv)};let Qv=(()=>{class t extends tU{constructor(n,r,i){super(),this.name=null,this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){uU(this._parent)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(gi,13),Q(Mr,10),Q(qa,10))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[Qt([rX]),Vt]})}return t})();const iX={provide:gi,useExisting:F(()=>zD)};let zD=(()=>{class t extends gi{constructor(n,r,i){super(),this.name=null,this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return qv(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){uU(this._parent)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(gi,13),Q(Mr,10),Q(qa,10))};static#t=this.\u0275dir=Ue({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[Qt([iX]),Vt]})}return t})();function uU(t){return!(t instanceof Qv||t instanceof Ka||t instanceof zD)}const oX={provide:Ga,useExisting:F(()=>Ic)};let Ic=(()=>{class t extends Ga{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Mn,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BD(0,o)}ngOnChanges(n){this._added||this._setUpControl(),UD(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return qv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||t)(Q(gi,13),Q(Mr,10),Q(qa,10),Q(hs,10),Q($D,8))};static#n=this.\u0275dir=Ue({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Qt([oX]),Vt,ii]})}return t})();function hU(t){return"number"==typeof t?t:parseFloat(t)}let Ec=(()=>{class t{constructor(){this._validator=Uv}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Uv,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ue({type:t,features:[ii]})}return t})();const hX={provide:Mr,useExisting:F(()=>Yv),multi:!0};let Yv=(()=>{class t extends Ec{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=n=>hU(n),this.createValidator=n=>TL(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Qt([hX]),Vt]})}return t})();const fX={provide:Mr,useExisting:F(()=>Jv),multi:!0};let Jv=(()=>{class t extends Ec{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>hU(n),this.createValidator=n=>bL(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Qt([fX]),Vt]})}return t})();const pX={provide:Mr,useExisting:F(()=>Xv),multi:!0};let Xv=(()=>{class t extends Ec{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ul,this.createValidator=n=>DL}enabled(n){return n}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("required",i._enabled?"":null)},inputs:{required:"required"},features:[Qt([pX]),Vt]})}return t})();const _X={provide:Mr,useExisting:F(()=>GD),multi:!0};let GD=(()=>{class t extends Ec{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=n=>function dU(t){return"number"==typeof t?t:parseInt(t,10)}(n),this.createValidator=n=>PL(n)}static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=zn(t)))(i||t)}}();static#t=this.\u0275dir=Ue({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Qo("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[Qt([_X]),Vt]})}return t})(),_U=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[iU]})}return t})();class yU extends Hv{constructor(e,n,r){super(kD(n),VD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){ZL(this,0,e),e.forEach((r,i)=>{WL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vU(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let ug=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return vU(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ng(i,o)}record(n,r=null){const i=this._reduceControls(n);return new KL(i,r)}control(n,r,i){let o={};return this.useNonNullable?(vU(r)?o=r:(o.validators=r,o.asyncValidators=i),new ag(n,{...o,nonNullable:!0})):new ag(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new yU(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof ag||n instanceof Hv?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),IU=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:vc,useValue:n.callSetDisabledState??rg}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[_U]})}return t})(),EU=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:$D,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:vc,useValue:n.callSetDisabledState??rg}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[_U]})}return t})();function WD(){const t=new RegExp("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$");return e=>(t.test(e.value),""===e.value||t.test(e.value)?null:{appEmailValidator:!0})}let IX=(()=>{class t{constructor(){this.appEmail=[],this.validator=()=>null}validate(n){return this.validator(n)}ngOnChanges(n){n.appEmail&&(this.validator=WD())}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=Ue({type:t,selectors:[["","appEmail",""]],inputs:{appEmail:"appEmail"},features:[Qt([{provide:Mr,useExisting:t,multi:!0}]),ii]})}return t})();function EX(t,e){1&t&&(S(0,"p",20),U(1,"Email is required!"),O())}function wX(t,e){1&t&&(S(0,"p",20),U(1,"Invalid email!"),O())}function CX(t,e){if(1&t&&(ir(0),xe(1,EX,2,0,"p",19),xe(2,wX,2,0,"p",19),or()),2&t){et();const n=fa(15);X(1),me("ngIf",null==n.errors?null:n.errors.required),X(1),me("ngIf",null==n.errors?null:n.errors.appEmailValidator)}}function bX(t,e){1&t&&(S(0,"p",20),U(1,"Password is required!"),O())}function TX(t,e){if(1&t&&(S(0,"p",20),U(1),O()),2&t){et(2);const n=fa(22);X(1),ai("Password must be at least ",null==n.errors?null:n.errors.minlength.requiredLength," characters!")}}function DX(t,e){if(1&t&&(ir(0),xe(1,bX,2,0,"p",19),xe(2,TX,2,1,"p",19),or()),2&t){et();const n=fa(22);X(1),me("ngIf",null==n.errors?null:n.errors.required),X(1),me("ngIf",null==n.errors?null:n.errors.minlength)}}const wU="*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f1f1f1}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background:url(https://www.primalsa.co.za/wordpress/wp-content/uploads/2017/08/Basics-of-supplements-Feature-image-and-what-to-take-1200x600.jpg) no-repeat;background-position:center;background-size:cover;border-radius:20px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px)}.login-box[_ngcontent-%COMP%]{position:relative;width:400px;height:450px;background:transparent;border:2px solid rgba(255,255,255,.5);border-radius:20px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]   div.input-box[_ngcontent-%COMP%]{position:relative;margin:30px 0;width:310px;border-bottom:2px solid #413a3a}.input-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);color:#fff;font-size:1em;pointer-events:none;transition:.5s}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:50px;background:transparent;border:none;outline:none;font-size:1em;padding:0 35px 0 5px;color:#fff}input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{top:-5px}input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-5px}.error[_ngcontent-%COMP%]{color:red;font-size:14px}.btn[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:40px;background:#fff;border:none;outline:none;cursor:pointer;font-size:10px;font-weight:600}.signup-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0 15px;font-size:.9em;color:#fff}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;color:#fff;font-size:1.2em;top:20px}";let CU=(()=>{class t{constructor(n,r){this.userService=n,this.router=r,this.appEmailDomains=DJ}login(n){if(n.invalid)return;const{email:r,password:i}=n.value;this.userService.login(r,i).then(()=>{this.router.navigate(["/products"])}).catch(o=>{console.error("Login failed:",o),this.errorMessage="Incorrect email or password."})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(wo),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-login"]],decls:31,vars:5,consts:[["lang","en"],["charset","UTF-8"],["rel","shortcut icon","href","logo.jpg","type","image/x-icon"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"],[1,"container"],[1,"login-box"],[1,"login",3,"ngSubmit"],["form","ngForm"],[1,"input-box"],[1,"fa-solid","fa-envelope"],["type","email","name","email","ngModel","","required","",3,"appEmail"],["inputEmail","ngModel"],[4,"ngIf"],[1,"fa-solid","fa-lock"],["type","password","name","password","ngModel","","required","",3,"minlength"],["inputPassword","ngModel"],[1,"btn",3,"disabled"],[1,"signup-link"],["routerLink","/register",1,"btn"],["class","error",4,"ngIf"],[1,"error"]],template:function(r,i){if(1&r){const o=Yo();S(0,"html",0)(1,"head"),Ce(2,"meta",1),S(3,"title"),U(4,"Login in your profile"),O(),Ce(5,"link",2)(6,"link",3),O(),S(7,"body")(8,"div",4)(9,"div",5)(10,"form",6,7),Ft("ngSubmit",function(){br(o);const a=fa(11);return si(i.login(a))}),S(12,"div",8),Ce(13,"i",9)(14,"input",10,11),S(16,"label"),U(17,"Email"),O()(),xe(18,CX,3,2,"ng-container",12),S(19,"div",8),Ce(20,"i",13)(21,"input",14,15),S(23,"label"),U(24,"Password"),O()(),xe(25,DX,3,2,"ng-container",12),S(26,"button",16),U(27,"Login"),O(),S(28,"div",17)(29,"button",18),U(30,"Sign up"),O()()()()()()()}if(2&r){const o=fa(11),s=fa(15),a=fa(22);X(14),me("appEmail",i.appEmailDomains),X(4),me("ngIf",s.touched),X(3),me("minlength",6),X(4),me("ngIf",a.touched),X(1),me("disabled",o.invalid)}},dependencies:[qi,No,Za,Ks,yc,Wa,Xv,GD,jD,sg,IX],styles:[wU,wU]})}return t})();function AX(t,e){return n=>{const r=n,i=r.get(t),o=r.get(e);return i?.value===o?.value?null:{matchPasswordsValidator:!0}}}function SX(t,e){1&t&&(S(0,"p",15),U(1," Username is required! "),O())}function PX(t,e){1&t&&(S(0,"p",15),U(1," Username's length should not be less than 5! "),O())}function xX(t,e){if(1&t&&(ir(0),xe(1,SX,2,0,"p",14),xe(2,PX,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("username"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("username"))||null==i.errors?null:i.errors.minlength)}}function MX(t,e){1&t&&(S(0,"p",15),U(1," Email is required! "),O())}function RX(t,e){1&t&&(S(0,"p",15),U(1," Email is not valid! "),O())}function OX(t,e){if(1&t&&(ir(0),xe(1,MX,2,0,"p",14),xe(2,RX,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("email"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("email"))||null==i.errors?null:i.errors.appEmailValidator)}}function NX(t,e){1&t&&(S(0,"p",15),U(1," Password is required! "),O())}function kX(t,e){if(1&t&&(S(0,"p",15),U(1),O()),2&t){const n=et(2);let r,i;X(1),ai(" Password must be at least ",null==(r=n.form.get("passGroup"))||null==(i=r.get("password"))||null==i.errors||null==i.errors.minlength?null:i.errors.minlength.requiredLength," characters! ")}}function VX(t,e){if(1&t&&(ir(0),xe(1,NX,2,0,"p",14),xe(2,kX,2,1,"p",14),or()),2&t){const n=et();let r,i,o,s;X(1),me("ngIf",null==(r=n.form.get("passGroup"))||null==(i=r.get("password"))||null==i.errors?null:i.errors.required),X(1),me("ngIf",null==(o=n.form.get("passGroup"))||null==(s=o.get("password"))||null==s.errors?null:s.errors.minlength)}}function FX(t,e){1&t&&(S(0,"p",15),U(1," Repeat Password does not match password! "),O())}function LX(t,e){if(1&t&&(ir(0),xe(1,FX,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",(null==(r=n.form.get("passGroup"))||null==r.errors?null:r.errors.matchPasswordsValidator)||(null==(r=n.form.get("passGroup"))||null==(i=r.get("rePassword"))||null==i.errors?null:i.errors.required))}}let bU=(()=>{class t{constructor(n,r,i){this.userService=n,this.router=r,this.fb=i,this.form=this.fb.group({username:["",[Wt.required,Wt.minLength(5)]],email:["",[Wt.required,WD()]],tel:[""],passGroup:this.fb.group({password:["",[Wt.required,Wt.minLength(6)]],rePassword:["",[Wt.required]]},{validators:[AX("password","rePassword")]})})}register(){if(this.form.invalid)return;const{username:n,tel:r,email:i,passGroup:{password:o,rePassword:s}={}}=this.form.value;n&&i&&r&&o&&s&&(console.log("Data to be sent to Firebase Authentication:",{username:n,email:i,tel:r,password:o,rePassword:s}),this.userService.register(n,i,r,o,s).subscribe(()=>{window.alert("Registration Successful"),this.router.navigate(["/login"])},u=>{window.alert(u)}))}static#e=this.\u0275fac=function(r){return new(r||t)(Q(wo),Q(vn),Q(ug))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-register"]],decls:34,vars:6,consts:[[1,"container"],[1,"login-box"],[1,"register",3,"formGroup","ngSubmit"],[1,"input-box"],["type","text","name","username","id","username","formControlName","username",1,"input-error"],[4,"ngIf"],["type","text","name","tel","id","tel","formControlName","tel"],["type","email","type","email","name","email","id","email","formControlName","email"],["formGroupName","passGroup"],["type","password","type","password","name","password","id","password","formControlName","password"],["type","password","type","password","name","rePassword","id","rePassword","formControlName","rePassword"],[1,"btn",3,"disabled"],[1,"signup-link"],["routerLink","/login",1,"btn"],["class","error",4,"ngIf"],[1,"error"]],template:function(r,i){if(1&r&&(S(0,"body")(1,"div",0)(2,"div",1)(3,"form",2),Ft("ngSubmit",function(){return i.register()}),S(4,"div",3),Ce(5,"input",4),xe(6,xX,3,2,"ng-container",5),S(7,"label"),U(8,"Username"),O()(),S(9,"div",3),Ce(10,"input",6),S(11,"label"),U(12,"Phone Number"),O()(),S(13,"div",3),Ce(14,"input",7),xe(15,OX,3,2,"ng-container",5),S(16,"label"),U(17,"Email"),O()(),ir(18,8),S(19,"div",3),Ce(20,"input",9),xe(21,VX,3,2,"ng-container",5),S(22,"label"),U(23,"Password"),O()(),S(24,"div",3),Ce(25,"input",10),xe(26,LX,2,1,"ng-container",5),S(27,"label"),U(28,"Conifirm Password"),O()(),or(),S(29,"button",11),U(30,"Register"),O(),S(31,"div",12)(32,"button",13),U(33,"Login"),O()()()()()()),2&r){let o,s,a,u,l,h;X(3),me("formGroup",i.form),X(3),me("ngIf",null==(o=i.form.get("username"))?null:o.touched),X(9),me("ngIf",null==(s=i.form.get("email"))?null:s.touched),X(6),me("ngIf",null==(a=i.form.get("passGroup"))||null==(u=a.get("password"))?null:u.touched),X(5),me("ngIf",null==(l=i.form.get("passGroup"))||null==(h=l.get("rePassword"))?null:h.touched),X(3),me("disabled",i.form.invalid)}},dependencies:[qi,No,Za,Ks,yc,Wa,Ka,Ic,Qv],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f1f1f1}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background:url(https://ananditnutrition.com/cdn/shop/files/banner6_copy_1500x.webp?v=1686536963) no-repeat;background-position:center;background-size:cover;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px)}.login-box[_ngcontent-%COMP%]{position:relative;width:450px;height:650px;background:transparent;border:2px solid rgba(255,255,255,.5);border-radius:20px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]   div.input-box[_ngcontent-%COMP%]{position:relative;margin:30px 0;width:310px;border-bottom:2px solid #413a3a}.input-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);color:#fff;font-size:1em;pointer-events:none;transition:.5s}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:50px;background:transparent;border:none;outline:none;font-size:1em;padding:0 35px 0 5px;color:#fff}input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{top:-5px}input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-5px}.error[_ngcontent-%COMP%]{color:red;font-size:14px}.btn[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:40px;background:#fff;border:none;outline:none;cursor:pointer;font-size:10px;font-weight:600}.signup-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0 15px;font-size:.9em;color:#fff}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;color:#fff;font-size:1.2em;top:20px}"]})}return t})();function UX(t,e){if(1&t){const n=Yo();ir(0),S(1,"div",2)(2,"div",3),Ce(3,"img",4),O(),S(4,"div",5)(5,"div",6)(6,"p",7),U(7,"Username:"),O(),S(8,"p",8),U(9),O()(),S(10,"div",6)(11,"p",7),U(12,"Email:"),O(),S(13,"p",8),U(14),O()(),S(15,"div",6)(16,"p",7),U(17,"Phone:"),O(),S(18,"p",8),U(19),O()()(),S(20,"div",9)(21,"a",10),Ft("click",function(){return br(n),si(et().toggleEditMode())}),U(22,"Edit"),O(),S(23,"a",10),Ft("click",function(){return br(n),si(et().logout())}),U(24,"Logout"),O()()(),or()}if(2&t){const n=et();X(9),yn(n.profileDetails.username),X(5),yn(n.profileDetails.email),X(5),yn(n.profileDetails.tel)}}function BX(t,e){1&t&&(S(0,"p",15),U(1," Username is required! "),O())}function jX(t,e){1&t&&(S(0,"p",15),U(1," Username's length should not be less than 5! "),O())}function $X(t,e){if(1&t&&(ir(0),xe(1,BX,2,0,"p",14),xe(2,jX,2,0,"p",14),or()),2&t){const n=et(2);let r,i;X(1),me("ngIf",null==(r=n.form.get("username"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("username"))||null==i.errors?null:i.errors.minlength)}}function zX(t,e){if(1&t){const n=Yo();ir(0),S(1,"form",11),Ft("ngSubmit",function(){return br(n),si(et().saveProfileHandler())}),S(2,"div",2)(3,"div",3),Ce(4,"img",4),O(),S(5,"div",5)(6,"div",6)(7,"p"),U(8,"Username:"),O(),Ce(9,"input",12),O(),xe(10,$X,3,2,"ng-container",1),S(11,"div",6)(12,"p"),U(13,"Phone:"),O(),Ce(14,"input",13),O()(),S(15,"div",9)(16,"a",10),Ft("click",function(){return br(n),si(et().toggleEditMode())}),U(17,"Cancel"),O(),S(18,"a",10),Ft("click",function(){return br(n),si(et().saveProfileHandler())}),U(19,"Save"),O()()()(),or()}if(2&t){const n=et();let r;X(1),me("formGroup",n.form),X(9),me("ngIf",null==(r=n.form.get("username"))?null:r.touched)}}let TU=(()=>{class t{constructor(n,r,i){this.fb=n,this.userService=r,this.router=i,this.isEditMode=!1,this.profileDetails={username:"",email:"",tel:""},this.form=this.fb.group({username:["",[Wt.required,Wt.minLength(5)]],email:["",[Wt.required,WD]],tel:[""]})}ngOnInit(){const n=JSON.parse(sessionStorage.getItem("user")||"{}"),{username:r,email:i,tel:o}=n;this.profileDetails={username:r,email:i,tel:o},this.form.setValue({username:r,email:i,tel:o})}logout(){this.userService.logout().subscribe(()=>{this.router.navigate(["/"])})}toggleEditMode(){this.isEditMode=!this.isEditMode}saveProfileHandler(){if(this.form.invalid)return;this.profileDetails={...this.form.value};const{username:n,email:r,tel:i}=this.profileDetails;this.userService.updateProfile(n,r,i).subscribe(()=>{sessionStorage.setItem("user",JSON.stringify(this.profileDetails)),this.toggleEditMode()})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(ug),Q(wo),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-profile"]],decls:3,vars:2,consts:[[1,"main"],[4,"ngIf"],[1,"profile-card"],[1,"image"],["src","https://media.istockphoto.com/id/1495088043/vector/user-profile-icon-avatar-or-person-icon-profile-picture-portrait-symbol-default-portrait.jpg?s=612x612&w=0&k=20&c=dhV2p1JwmloBTOaGAtaA3AW1KSnjsdMt7-U_3EZElZ0=","alt","",1,"profile-pic"],[1,"data"],[1,"flex"],[1,"label"],[1,"value"],[1,"buttons"],[1,"btn",3,"click"],[3,"formGroup","ngSubmit"],["type","text","id","username","formControlName","username",1,"input"],["type","text","id","tel","formControlName","tel",1,"input"],["class","error",4,"ngIf"],[1,"error"]],template:function(r,i){1&r&&(S(0,"section",0),xe(1,UX,25,3,"ng-container",1),xe(2,zX,20,2,"ng-container",1),O()),2&r&&(X(1),me("ngIf",!i.isEditMode),X(1),me("ngIf",i.isEditMode))},dependencies:[qi,Za,Ks,yc,Wa,Ka,Ic],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/originals/96/6a/7b/966a7b0fa51a0e145aa6b2fe8cd56923.jpg);background-size:cover;background-position:center}.main[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background-position:center;background-size:cover}.profile-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:400px;width:100%;border-radius:25px;padding:30px;border:1px solid #ffffff40;box-shadow:0 5px 20px #0006}.image[_ngcontent-%COMP%]{position:relative;height:150px;width:150px}.image[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;box-shadow:0 5px 20px #0006}.data[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:15px}.data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:33px;font-weight:600}.row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:30px}.row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;padding:0 20px}.buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:30px}.buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 20px;padding:8px 25px;border-radius:25px;font-size:18px;white-space:nowrap;background:linear-gradient(to left,#33ccff 0%,#ff99cc 100%)}.buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{box-shadow:inset 0 5px 20px #0006}.input[_ngcontent-%COMP%]{padding:10px 5px;border:solid 1px;border-color:#333;border-radius:50px}.flex[_ngcontent-%COMP%]{display:flex}.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:15px}.flex[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px}p[_ngcontent-%COMP%]{margin-top:15px}p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:10px}.data[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:space-between;background-color:#e3e0e0;box-shadow:0 0 10px #0000001a;padding:15px 110px;border-radius:50px}.label[_ngcontent-%COMP%]{width:100px;font-weight:700;color:#555}.value[_ngcontent-%COMP%]{flex-grow:1;color:#333}.icon[_ngcontent-%COMP%]{margin-right:10px;font-size:1.2em;color:#888}.btn-edit[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;transition:background-color .3s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#2980b9}']})}return t})();const DU='@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.container[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);padding:2rem;display:flex;align-items:center;justify-content:center;overflow:hidden}.form[_ngcontent-%COMP%]{width:100%;max-width:820px;background-color:#fff;border-radius:10px;box-shadow:0 0 20px 1px #0000001a;z-index:1000;overflow:hidden;display:grid;grid-template-columns:repeat(2,1fr)}.contact-form[_ngcontent-%COMP%]{background-color:#1a70bc;position:relative}.circle[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(135deg,transparent 20%,#146a92);border-radius:50%}.circle.one[_ngcontent-%COMP%]{width:130px;height:130px;top:130px;right:-20px}.circle.two[_ngcontent-%COMP%]{width:80px;height:80px;top:10px;right:30px}.contact-form[_ngcontent-%COMP%]:before{content:"";position:absolute;width:26px;height:26px;background-color:#1a70bc;top:50px;left:-12px;transform:rotate(45deg)}form[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;position:relative}.title[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:1.5rem;margin-bottom:.7rem}.input-container[_ngcontent-%COMP%]{position:relative;margin:1rem 0}.input[_ngcontent-%COMP%]{width:100%;outline:none;border:2px solid #fafafa;background:none;padding:.6rem 1.2rem;color:#fff;font-weight:500;font-size:.95rem;letter-spacing:1px;border-radius:25px;transition:.3s}textarea.input[_ngcontent-%COMP%]{padding:.8rem 1.2rem;min-height:150px;border-radius:22px;resize:none;overflow-y:auto}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:15px;transform:translateY(-50%);padding:0 .4rem;font-weight:400;pointer-events:none;z-index:1000;transition:.3s;color:#fafafa}.input-container.textarea[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{top:1rem;transform:translateY(0)}.btn[_ngcontent-%COMP%]{padding:.6rem 1.3rem;background-color:#fff;border:2px solid #fafafa;font-size:.95rem;line-height:1;border-radius:25px;color:#1a70bc;font-weight:600;cursor:pointer;transition:.3s;margin:0;outline:none}.btn[_ngcontent-%COMP%]:hover{background-color:transparent;color:#fff}.contact-info[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;position:relative}.contact-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#1a70bc}.text[_ngcontent-%COMP%]{color:#333;margin:1.5rem 0 2rem}.information[_ngcontent-%COMP%]{display:flex;color:#555;margin:.7rem 0;font-size:.95rem;align-items:center}.icon[_ngcontent-%COMP%]{font-size:30px;color:#1a70bc;margin-right:.7rem}.social-media[_ngcontent-%COMP%]{padding:2rem 0 0}.social-media[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333}.social-icons[_ngcontent-%COMP%]{display:flex;margin-top:.5rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:5px;background:linear-gradient(45deg,#1a70bc,#144b92);text-align:center;color:#fff;line-height:35px;margin-right:.5rem;transition:.4s}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.09)}.contact-info[_ngcontent-%COMP%]:before{content:"";position:absolute;width:110px;height:110px;border:22px solid #1a70bc;border-radius:50%;bottom:-77px;right:50px;opacity:.3}.big-circle[_ngcontent-%COMP%]{position:absolute;width:500px;height:500px;border:80px solid #1a70bc;border-radius:50%;bottom:50%;right:50%;transform:translate(-40%,38%)}.input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;left:25px;transform:translateY(-50%);font-size:.8rem;padding:0 .4rem;color:transparent;pointer-events:none;z-index:500}.input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10%;height:5px;background-color:#1a70bc;opacity:0;top:50%;transform:translateY(-50%)}.input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{left:50%}.input-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{right:50%}.input-container.focus[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{top:0;transform:translateY(-50%);left:25px;font-size:.8rem}.input-container.focus[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .input-container.focus[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{width:50%;opacity:1}@media (max-width: 850px){.form[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-info[_ngcontent-%COMP%]:before{bottom:initial;top:-72px;right:65px;transform:scale(.95)}.contact-form[_ngcontent-%COMP%]:before{top:-12px;left:initial;right:70px}.big-circle[_ngcontent-%COMP%]{bottom:75%;transform:scale(.9) translate(-40%,30%);right:50%}.text[_ngcontent-%COMP%]{margin:1rem 0 1.5rem}.social-media[_ngcontent-%COMP%]{padding:1.5rem 0 0}}@media (max-width: 480px){.container[_ngcontent-%COMP%]{padding:1.5rem}.contact-info[_ngcontent-%COMP%]:before{display:none}.big-circle[_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%], .contact-info[_ngcontent-%COMP%]{padding:1.7rem 1.6rem}.text[_ngcontent-%COMP%], .information[_ngcontent-%COMP%], .social-media[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.title[_ngcontent-%COMP%]{font-size:1.15rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.icon[_ngcontent-%COMP%]{font-size:25px}.input[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:.45rem 1.2rem}}';let HX=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-contact"]],decls:72,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"],[1,"container"],[1,"form"],[1,"contact-info"],[1,"title"],[1,"text"],[1,"info"],[1,"information"],[1,"fa-solid","fa-map-location-dot","icon"],[1,"fa-solid","fa-envelope","icon"],[1,"fa-solid","fa-phone-volume","icon"],[1,"social-media"],[1,"social-icons"],["href","#"],[1,"fab","fa-facebook-f"],[1,"fab","fa-instagram"],[1,"fab","fa-twitter"],[1,"fab","fa-linkedin-in"],[1,"contact-form"],[1,"circle","one"],[1,"circle","two"],["action","#","autocomplete","off"],[1,"input-container"],["type","text","name","name",1,"input"],["for",""],["type","email","name","email",1,"input"],["type","tel","name","phone",1,"input"],[1,"input-container","textarea"],["name","message",1,"input"],["type","submit","value","Send",1,"btn"]],template:function(r,i){1&r&&(S(0,"html",0)(1,"head"),Ce(2,"meta",1)(3,"meta",2)(4,"meta",3),S(5,"title"),U(6,"Contact with us"),O(),Ce(7,"link",4),O(),S(8,"body")(9,"div",5)(10,"div",6)(11,"div",7)(12,"h3",8),U(13,"Let's get in touch"),O(),S(14,"p",9),U(15," You can contact us and ask your questions. Below are our coordinates: "),O(),S(16,"div",10)(17,"div",11),Ce(18,"i",12),S(19,"p"),U(20,"Varna, Bulgaria 9000"),O()(),S(21,"div",11),Ce(22,"i",13),S(23,"p"),U(24,"contactus@dimensional.bg"),O()(),S(25,"div",11),Ce(26,"i",14),S(27,"p"),U(28,"0897654321"),O()()(),S(29,"div",15)(30,"p"),U(31,"Connect with Us"),O(),S(32,"div",16)(33,"a",17),Ce(34,"i",18),O(),S(35,"a",17),Ce(36,"i",19),O(),S(37,"a",17),Ce(38,"i",20),O(),S(39,"a",17),Ce(40,"i",21),O()()()(),S(41,"div",22),Ce(42,"div",23)(43,"div",24),S(44,"form",25)(45,"h3",8),U(46,"Contact Us"),O(),S(47,"div",26),Ce(48,"input",27),S(49,"label",28),U(50,"Name"),O(),S(51,"span"),U(52,"Name"),O()(),S(53,"div",26),Ce(54,"input",29),S(55,"label",28),U(56,"Email"),O(),S(57,"span"),U(58,"Email"),O()(),S(59,"div",26),Ce(60,"input",30),S(61,"label",28),U(62,"Phone"),O(),S(63,"span"),U(64,"Phone"),O()(),S(65,"div",31),Ce(66,"textarea",32),S(67,"label",28),U(68,"Message"),O(),S(69,"span"),U(70,"Message"),O()(),Ce(71,"input",33),O()()()()()())},dependencies:[Za,Wa,sg],styles:[DU,DU]})}return t})();function qX(t,e){if(1&t&&(S(0,"div",3)(1,"p",4),U(2," APRIL DISCOUNT "),O(),S(3,"p",5),U(4),O(),S(5,"div",6)(6,"button",7),U(7," Login "),O(),S(8,"button",8),U(9," Register "),O()(),S(10,"marquee",9),U(11,"You can view more about our products, if you make you account."),O()()),2&t){const n=et();X(4),ai(" We have ",null==n.discountGuest?null:n.discountGuest.guest_discount,"% discount for our products for April.If you want additional discount, you need to sign up or login. ")}}function GX(t,e){if(1&t&&(S(0,"div",3)(1,"p",4),U(2," APRIL DISCOUNT "),O(),S(3,"p",5),U(4),O(),S(5,"p"),U(6,"Show this promocode in our shop to get your discount!"),O(),S(7,"p"),U(8),O(),S(9,"marquee",9),U(10,"You can view more about our products, if you make you account."),O()()),2&t){const n=et();X(4),ai(" Congratulations! You have ",null==n.discountUser?null:n.discountUser.percent,"% discount for our products for April."),X(4),ai("Promocode : ",null==n.discountUser?null:n.discountUser.promocode,"")}}let WX=(()=>{class t{constructor(n,r){this.userService=n,this.apiService=r}get isLogged(){return this.userService.isLogged}ngOnInit(){this.loadDiscountUser(),this.loadDiscountGuest()}loadDiscountUser(){this.apiService.getDiscountUser().subscribe(n=>{console.log(n),this.discountUser=n})}loadDiscountGuest(){this.apiService.getDiscountGuest().subscribe(n=>{console.log(n),this.discountGuest=n})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(wo),Q(Xp))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-discount"]],decls:5,vars:2,consts:[[1,"responsive-container-block","bigContainer"],[1,"responsive-container-block","Container","bottomContainer"],["class","allText bottomText",4,"ngIf"],[1,"allText","bottomText"],[1,"text-blk","subHeadingText"],[1,"text-blk","description"],[1,"buttons"],["routerLink","/login",1,"explore"],["routerLink","/register",1,"explore"],["behavior","","direction",""]],template:function(r,i){1&r&&(S(0,"body")(1,"div",0)(2,"div",1),xe(3,qX,12,1,"div",2),xe(4,GX,11,2,"div",2),O()()()),2&r&&(X(3),me("ngIf",!i.isLogged),X(1),me("ngIf",i.isLogged))},dependencies:[qi,No],styles:['@import"https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;600;700;800&amp;display=swap";*[_ngcontent-%COMP%]{font-family:Nunito,sans-serif}body[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%)}.responsive-container-block[_ngcontent-%COMP%]{min-height:75px;height:-moz-fit-content;height:fit-content;width:100%;padding:0;display:flex;flex-wrap:wrap;margin:0 auto;justify-content:flex-start}.text-blk[_ngcontent-%COMP%]{margin:0;padding:10px;line-height:25px}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center;padding:10px 50px}.text-blk.headingText[_ngcontent-%COMP%]{font-size:23px;font-weight:700;line-height:28px;color:#0087b1;margin:0 0 10px;padding:0 10px 0 0}.allText[_ngcontent-%COMP%]{padding:0;width:50%;margin:0}.text-blk.subHeadingText[_ngcontent-%COMP%]{color:#666;font-size:32px;line-height:40px;font-weight:700;margin:0 0 15px;padding:0 10px 0 0}.text-blk.description[_ngcontent-%COMP%]{font-size:18px;line-height:28px;color:#999;padding:0 10px 0 0;margin:0 0 40px}.explore[_ngcontent-%COMP%]{background-color:#3a66d6;font-size:18px;line-height:28px;color:#fff;border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-top-style:outset;border-right-style:outset;border-bottom-style:outset;border-left-style:outset;border-top-color:#3a66d6;border-right-color:#3a66d6;border-bottom-color:#3a66d6;border-left-color:#3a66d6;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;cursor:pointer;box-shadow:#f4989240 0 10px 20px;border-radius:10px;padding:9px 45px}.explore[_ngcontent-%COMP%]:hover{background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:#ffebea;color:#f49892}.responsive-container-block.Container[_ngcontent-%COMP%]{margin:80px auto 50px;justify-content:center;align-items:center;max-width:1320px;padding:10px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{flex-direction:row;margin:50px auto}.allText.aboveText[_ngcontent-%COMP%]{margin:0 0 0 40px}.allText.bottomText[_ngcontent-%COMP%]{margin:0 40px 25px 0;border:2px solid #fff;border-radius:50px;display:block;text-align:center;padding:50px;box-shadow:-26px 13px 22px 6px #2a7d98d6;-webkit-box-shadow:-26px 13px 22px 6px rgba(42,125,152,.84);-moz-box-shadow:-26px 13px 22px 6px rgba(42,125,152,.84)}marquee[_ngcontent-%COMP%]{margin-top:20px;color:#439852}.mainVideo[_ngcontent-%COMP%]{width:85%;height:288px;margin:-30px 0 0;border-radius:10px;box-shadow:14px 15px 22px 6px #2a7d98d6;-webkit-box-shadow:14px 15px 22px 6px rgba(42,125,152,.84);-moz-box-shadow:14px 15px 22px 6px rgba(42,125,152,.84)}.videoContainer[_ngcontent-%COMP%]{width:46%;height:600px;display:flex;justify-content:flex-start;align-items:center;position:relative;padding:0 0 0 10px}.mainVideo[_ngcontent-%COMP%]{z-index:10}.dotsImg[_ngcontent-%COMP%]{position:absolute;width:80%;height:600px;top:0;right:0;object-fit:cover}@media (max-width: 1024px){.responsive-container-block.Container[_ngcontent-%COMP%]{max-width:850px}.text-blk.description[_ngcontent-%COMP%]{font-size:18px}.allText[_ngcontent-%COMP%]{width:40%;margin:0 0 0 20px}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px}.text-blk.subHeadingText[_ngcontent-%COMP%]{font-size:30px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{margin:80px auto 50px}.responsive-container-block.Container[_ngcontent-%COMP%]{max-width:830px}.allText.aboveText[_ngcontent-%COMP%]{margin:30px 0 0 40px}.allText.bottomText[_ngcontent-%COMP%]{margin:30px 40px 0 0}.allText.bottomText[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:30px 0}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{flex-direction:column}.text-blk.headingText[_ngcontent-%COMP%]{text-align:center;font-size:22px}.text-blk.subHeadingText[_ngcontent-%COMP%], .text-blk.description[_ngcontent-%COMP%]{text-align:center}.explore[_ngcontent-%COMP%], #inc0s[_ngcontent-%COMP%]{margin:0 auto}.dotsImg[_ngcontent-%COMP%]{width:50%;left:50%;transform:translate(-50%)}.videoContainer[_ngcontent-%COMP%]{width:100%;padding:0}.mainVideo[_ngcontent-%COMP%]{width:100%}.allText.bottomText[_ngcontent-%COMP%]{margin:30px 0 60px}.text-blk.description[_ngcontent-%COMP%], .text-blk.headingText[_ngcontent-%COMP%], .text-blk.subHeadingText[_ngcontent-%COMP%]{padding:0}.mainVideo[_ngcontent-%COMP%]{margin:0}}@media (max-width: 768px){.allText[_ngcontent-%COMP%]{width:100%;margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0}.responsive-container-block.Container[_ngcontent-%COMP%]{flex-direction:column;height:auto}.text-blk.headingText[_ngcontent-%COMP%]{text-align:center}.text-blk.subHeadingText[_ngcontent-%COMP%]{text-align:center;font-size:28px;line-height:38px}.text-blk.description[_ngcontent-%COMP%]{text-align:center;font-size:18px;line-height:27px}.allText[_ngcontent-%COMP%], .allText.aboveText[_ngcontent-%COMP%]{margin:40px 0 0}.responsive-container-block.Container[_ngcontent-%COMP%]{margin:80px auto 50px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{margin:50px auto;padding:0 0 0 10px}.allText.bottomText[_ngcontent-%COMP%]{margin:40px 0 0;border-radius:25px solid transparent;border-color:#f0f8ff}.allText.bottomText[_ngcontent-%COMP%]{margin:40px 0 60px}.mainVideo[_ngcontent-%COMP%]{height:400px}.videoContainer[_ngcontent-%COMP%]{height:550px}.explore[_ngcontent-%COMP%]{font-size:16px;padding:6px 10px!important}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:0 50px}}@media (max-width: 500px){.responsive-container-block.Container[_ngcontent-%COMP%]{padding:10px 0;width:100%;max-width:100%}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px 25px}.allText[_ngcontent-%COMP%]{padding:0;width:100%}.responsive-container-block.bigContainer[_ngcontent-%COMP%]{padding:10px 20px}.explore[_ngcontent-%COMP%]{font-size:16px;line-height:25px;padding:8px 35px}.dotsImg[_ngcontent-%COMP%]{width:80%;height:100%}.mainVideo[_ngcontent-%COMP%]{height:260px}.videoContainer[_ngcontent-%COMP%]{height:320px}.responsive-container-block.Container.bottomContainer[_ngcontent-%COMP%]{padding:0}.text-blk.description[_ngcontent-%COMP%]{font-size:16px;line-height:23px;margin:0 0 30px}.text-blk.subHeadingText[_ngcontent-%COMP%]{font-size:24px}}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0}.wk-desk-1[_ngcontent-%COMP%]{width:8.333333%}.wk-desk-2[_ngcontent-%COMP%]{width:16.666667%}.wk-desk-3[_ngcontent-%COMP%]{width:25%}.wk-desk-4[_ngcontent-%COMP%]{width:33.333333%}.wk-desk-5[_ngcontent-%COMP%]{width:41.666667%}.wk-desk-6[_ngcontent-%COMP%]{width:50%}.wk-desk-7[_ngcontent-%COMP%]{width:58.333333%}.wk-desk-8[_ngcontent-%COMP%]{width:66.666667%}.wk-desk-9[_ngcontent-%COMP%]{width:75%}.wk-desk-10[_ngcontent-%COMP%]{width:83.333333%}.wk-desk-11[_ngcontent-%COMP%]{width:91.666667%}.wk-desk-12[_ngcontent-%COMP%]{width:100%}@media (max-width: 1024px){.wk-ipadp-1[_ngcontent-%COMP%]{width:8.333333%}.wk-ipadp-2[_ngcontent-%COMP%]{width:16.666667%}.wk-ipadp-3[_ngcontent-%COMP%]{width:25%}.wk-ipadp-4[_ngcontent-%COMP%]{width:33.333333%}.wk-ipadp-5[_ngcontent-%COMP%]{width:41.666667%}.wk-ipadp-6[_ngcontent-%COMP%]{width:50%}.wk-ipadp-7[_ngcontent-%COMP%]{width:58.333333%}.wk-ipadp-8[_ngcontent-%COMP%]{width:66.666667%}.wk-ipadp-9[_ngcontent-%COMP%]{width:75%}.wk-ipadp-10[_ngcontent-%COMP%]{width:83.333333%}.wk-ipadp-11[_ngcontent-%COMP%]{width:91.666667%}.wk-ipadp-12[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.wk-tab-1[_ngcontent-%COMP%]{width:8.333333%}.wk-tab-2[_ngcontent-%COMP%]{width:16.666667%}.wk-tab-3[_ngcontent-%COMP%]{width:25%}.wk-tab-4[_ngcontent-%COMP%]{width:33.333333%}.wk-tab-5[_ngcontent-%COMP%]{width:41.666667%}.wk-tab-6[_ngcontent-%COMP%]{width:50%}.wk-tab-7[_ngcontent-%COMP%]{width:58.333333%}.wk-tab-8[_ngcontent-%COMP%]{width:66.666667%}.wk-tab-9[_ngcontent-%COMP%]{width:75%}.wk-tab-10[_ngcontent-%COMP%]{width:83.333333%}.wk-tab-11[_ngcontent-%COMP%]{width:91.666667%}.wk-tab-12[_ngcontent-%COMP%]{width:100%}}@media (max-width: 500px){.wk-mobile-1[_ngcontent-%COMP%]{width:8.333333%}.wk-mobile-2[_ngcontent-%COMP%]{width:16.666667%}.wk-mobile-3[_ngcontent-%COMP%]{width:25%}.wk-mobile-4[_ngcontent-%COMP%]{width:33.333333%}.wk-mobile-5[_ngcontent-%COMP%]{width:41.666667%}.wk-mobile-6[_ngcontent-%COMP%]{width:50%}.wk-mobile-7[_ngcontent-%COMP%]{width:58.333333%}.wk-mobile-8[_ngcontent-%COMP%]{width:66.666667%}.wk-mobile-9[_ngcontent-%COMP%]{width:75%}.wk-mobile-10[_ngcontent-%COMP%]{width:83.333333%}.wk-mobile-11[_ngcontent-%COMP%]{width:91.666667%}.wk-mobile-12[_ngcontent-%COMP%]{width:100%}}[_ngcontent-%COMP%]:root{--rich-black-fogra-29_50: hsl(210, 26%, 11%, .5);--rich-black-fogra-29-1: hsl(210, 26%, 11%);--rich-black-fogra-29-2: hsl(210, 50%, 4%);--silver-metallic: hsl(212, 9%, 67%);--coquelicot_20: hsla(12, 98%, 52%, .2);--coquelicot_10: hsla(12, 98%, 52%, .1);--sonic-silver: hsl(0, 0%, 47%);--cadet-gray: hsl(214, 15%, 62%);--light-gray: hsl(0, 0%, 80%);--coquelicot: hsl(12, 98%, 52%);--gainsboro: hsl(0, 0%, 88%);--white_20: hsl(0, 0%, 100%, .2);--white_10: hsl(0, 0%, 100%, .1);--black_10: hsl(0, 0%, 0%, .1);--white: hsl(0, 0%, 100%);--ff-catamaran: "Catamaran", sans-serif;--ff-rubik: "Rubik", sans-serif;--fs-1: 3.8rem;--fs-2: 3rem;--fs-3: 2.5rem;--fs-4: 2rem;--fs-5: 1.8rem;--fs-6: 1.5rem;--fw-900: 900;--fw-800: 800;--fw-700: 700;--fw-500: 500;--section-padding: 80px;--shadow-1: 0 0 20px var(--black_10);--shadow-2: 0px 10px 24px var(--coquelicot_20);--radius-10: 10px;--radius-8: 8px;--radius-5: 5px;--transition-1: .25s ease;--transition-2: .5s ease;--cubic-in: cubic-bezier(.51, .03, .64, .28);--cubic-out: cubic-bezier(.33, .85, .4, .96)}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2em}button[_ngcontent-%COMP%]{width:220px;height:50px;border:none;outline:none;color:#fff;cursor:pointer;position:relative;z-index:0;border-radius:10px}button[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(45deg,#ff0000,#ff7300,#fffb00,#48ff00,#00ffd5,#002bff,#7a00ff,#ff00c8,#ff0000);position:absolute;top:-2px;left:-2px;background-size:400%;z-index:-1;filter:blur(5px);width:calc(100% + 4px);height:calc(100% + 4px);animation:glowing 20s linear infinite;opacity:0;transition:opacity .3s ease-in-out;border-radius:10px}button[_ngcontent-%COMP%]:active{color:#fff}button[_ngcontent-%COMP%]:active:after{background:transparent}button[_ngcontent-%COMP%]:hover:before{opacity:1}button[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;width:100%;height:100%;opacity:.3;left:0;top:0;border-radius:10px}button[_ngcontent-%COMP%]{margin-left:8px}']})}return t})();function ZX(t,e){if(1&t){const n=Yo();S(0,"div",16),Ft("click",function(){br(n);const i=et(2);return si(i.closeNewComment(i.newCommentId))}),U(1,"X"),O()}}function KX(t,e){if(1&t&&(S(0,"div",7)(1,"div",8)(2,"div",9),Ce(3,"img",10),O(),S(4,"div",11)(5,"div",12),U(6),O(),S(7,"div",13),U(8),O()()(),S(9,"div",14),U(10),O(),xe(11,ZX,2,0,"div",15),O()),2&t){const n=e.$implicit,r=e.index,i=et();X(3),af("src",n.img,Hh),X(3),yn(n.name),X(2),ai("",n.posted," "),X(2),yn(n.comment),X(1),me("ngIf",i.newCommentPosted&&r===i.comments.length-1)}}function QX(t,e){1&t&&(S(0,"p"),U(1," Comment is required. "),O())}function YX(t,e){if(1&t){const n=Yo();S(0,"div",17)(1,"div",8)(2,"div",18),Ce(3,"img",19),O(),S(4,"div",12)(5,"p"),U(6),O()()(),S(7,"div")(8,"form",20),Ft("submit",function(i){return br(n),si(et().addComment(i))}),Ce(9,"textarea",21),xe(10,QX,2,0,"p",22),S(11,"button",23),U(12,"Comment"),O()()()()}if(2&t){const n=et();X(6),yn(n.username),X(2),me("formGroup",n.commentForm),X(2),me("ngIf",n.commentForm.controls.comment.invalid&&(n.commentForm.controls.comment.dirty||n.commentForm.controls.comment.touched)),X(1),me("disabled",n.commentForm.invalid)}}let JX=(()=>{class t{constructor(n,r,i,o){this.formBuilder=n,this.userService=r,this.apiService=i,this.datePipe=o,this.comments=[],this.newCommentPosted=!1,this.commentForm=this.formBuilder.group({comment:["",Wt.required]})}get isLogged(){return this.userService.isLogged}get username(){return this.userService.user?.username||""}ngOnInit(){this.loadComments()}loadComments(){this.apiService.getComments().pipe(Gi(n=>(console.error("Error loading comments:",n),[])),he(n=>n)).subscribe(n=>{console.log(n),this.comments=n})}addComment(n){n.preventDefault();const r=this.commentForm.value.comment,i=this.datePipe.transform(new Date,"yyyy-MM-dd HH:mm:ss"),o={name:this.username,img:"https://media.istockphoto.com/id/1495088043/vector/user-profile-icon-avatar-or-person-icon-profile-picture-portrait-symbol-default-portrait.jpg?s=612x612&w=0&k=20&c=dhV2p1JwmloBTOaGAtaA3AW1KSnjsdMt7-U_3EZElZ0=",comment:r,posted:i||""};this.apiService.postComment(o).pipe(Gi(s=>{throw console.error("Error posting comment:",s),s})).subscribe(s=>{o.id=s,this.comments.push(o),this.commentForm.reset(),this.newCommentPosted=!0,this.newCommentId=s})}closeNewComment(n){n&&this.apiService.deleteComment(n).pipe(Gi(r=>{throw console.error("Error deleting comment:",r),r})).subscribe(()=>{this.comments=this.comments.filter(r=>r.id!==n)}),this.newCommentPosted=!1}static#e=this.\u0275fac=function(r){return new(r||t)(Q(ug),Q(wo),Q(Xp),Q(Aw))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-comments"]],features:[Qt([Aw])],decls:12,vars:2,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"comment-sesion"],[1,"post-comment"],["class","list",4,"ngFor","ngForOf"],["class","comment-box",4,"ngIf"],[1,"list"],[1,"user"],[1,"user-image"],["alt","image",3,"src"],[1,"user-meta"],[1,"name"],[1,"days"],[1,"comment-post"],["class","close-icon",3,"click",4,"ngIf"],[1,"close-icon",3,"click"],[1,"comment-box"],[1,"image"],["src","https://media.istockphoto.com/id/1495088043/vector/user-profile-icon-avatar-or-person-icon-profile-picture-portrait-symbol-default-portrait.jpg?s=612x612&w=0&k=20&c=dhV2p1JwmloBTOaGAtaA3AW1KSnjsdMt7-U_3EZElZ0=","alt","",1,"profile-pic"],["method","post",3,"formGroup","submit"],["formControlName","comment","placeholder","Your comment here."],[4,"ngIf"],["type","submit",1,"comment-submit",3,"disabled"]],template:function(r,i){1&r&&(S(0,"html",0)(1,"head"),Ce(2,"meta",1)(3,"meta",2),S(4,"title"),U(5,"Document"),O()(),S(6,"body")(7,"section")(8,"div",3)(9,"div",4),xe(10,KX,12,5,"div",5),O(),xe(11,YX,13,4,"div",6),O()()()()),2&r&&(X(10),me("ngForOf",i.comments),X(1),me("ngIf",i.isLogged))},dependencies:[bw,qi,Za,Ks,yc,Wa,Ka,Ic],styles:["[_ngcontent-%COMP%]:root{--primary-color: #c6c3c3;--second-color: #ffffff;--black-color: #000000}body[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);box-sizing:border-box;font-size:14px;font-family:system-ui}section[_ngcontent-%COMP%]{padding:1em 0 10em 35em}.comment-box[_ngcontent-%COMP%], .post-comment[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{box-shadow:0 2px 2px #0002;background:white;border-radius:16px;box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(0px);-webkit-backdrop-filter:blur(0px)}.post-comment[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{width:51.1%;margin-bottom:25px}.post-comment[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;padding:8px;overflow:hidden}.post-comment[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:38px;width:38px;margin-right:10px;border-radius:50%}.comment-session[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500}.post-comment[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:12px}.post-comment[_ngcontent-%COMP%]   .comment-post[_ngcontent-%COMP%]{padding:0 0 15px 58px}.comment-box[_ngcontent-%COMP%]{padding:10px;overflow:hidden;width:50%}.comment-box[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;width:min-content}.comment-box[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px;border-radius:50%}.comment-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#eee;width:-webkit-fill-available;height:50px;margin:10px 60px 10px 10px;padding:10px;resize:inherit;border-radius:10px;box-shadow:0 0 0 1px #0003}.comment-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:inset 0 0 0 1px #009cff;outline:none}.comment-box[_ngcontent-%COMP%]   .comment-submit[_ngcontent-%COMP%]{float:right;padding:6px 10px;border:none;background:#009cff;color:#eee;cursor:pointer;border-radius:3px}.comment-box[_ngcontent-%COMP%]   .comment-submit[_ngcontent-%COMP%]:hover{background:#0076bf}.list[_ngcontent-%COMP%]{background-color:#0076bf}.comment-session[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:px;height:auto;margin:0 auto}.comment-sesion[_ngcontent-%COMP%]{position:relative}.close-icon[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:5px;cursor:pointer}.comment-box[_ngcontent-%COMP%]{margin-top:20px}@media screen and(max-width:660px){.comment-session[_ngcontent-%COMP%]{width:100%}}"]})}return t})(),AU=(()=>{class t{constructor(n,r){this.userService=n,this.router=r}canActivate(){return this.userService.user$.pipe(he(n=>{const r=!!n;return r&&this.router.navigate(["/"]),!r}))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(wo),ce(vn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XX=(()=>{class t{constructor(n,r){this.userService=n,this.router=r}canActivate(){return this.userService.user$.pipe(he(n=>{const r=!!n;return r||this.router.navigate(["/"]),r}))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(wo),ce(vn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eee(t,e){if(1&t&&(S(0,"p",14),U(1),O()),2&t){const n=et(2);X(1),yn(n.product.description)}}function tee(t,e){1&t&&(S(0,"div",15),Ce(1,"app-like-btn"),O())}const nee=function(t){return["/edit",t]};function ree(t,e){if(1&t){const n=Yo();S(0,"div",16)(1,"button",17),U(2,"Edit"),O(),S(3,"button",18),Ft("click",function(){return br(n),si(et(2).deleteProduct())}),U(4,"Delete"),O()()}if(2&t){const n=et(2);X(1),me("routerLink",NE(1,nee,n.product.name))}}function iee(t,e){if(1&t&&(S(0,"div",2)(1,"div",3),Ce(2,"img",4),O(),S(3,"div",5)(4,"h1"),U(5),O(),S(6,"h2"),U(7),O(),S(8,"div",6),Ce(9,"i",7)(10,"i",7)(11,"i",7)(12,"i",7)(13,"i",8),S(14,"span"),U(15),O()(),S(16,"div",9)(17,"span",10),U(18),O(),S(19,"span",10),U(20),O(),S(21,"span",10),U(22),O()(),S(23,"h2"),U(24,"Description:"),O(),xe(25,eee,2,1,"p",11),S(26,"h2"),U(27),O(),xe(28,tee,2,0,"div",12),xe(29,ree,5,3,"div",13),O()()),2&t){const n=et();X(2),af("src",n.product.img,Hh),X(3),yn(n.product.name),X(2),yn(n.product.posted),X(8),yn(n.product.rating),X(3),yn(n.product.tag1),X(2),yn(n.product.tag2),X(2),yn(n.product.tag3),X(3),me("ngIf",n.product.description),X(2),ai("Price: ",n.product.price," lv"),X(1),me("ngIf",n.isLogged&&!n.isAdmin),X(1),me("ngIf",n.isLogged&&n.isAdmin)}}let oee=(()=>{class t{constructor(n,r,i,o){this.route=n,this.apiService=r,this.userService=i,this.router=o,this.isLoading=!0}get isLogged(){return this.userService.isLogged}get isAdmin(){return this.userService.isAdmin()}ngOnInit(){this.route.params.subscribe(n=>{const r=n.name;r&&this.apiService.getProductByName(r).subscribe(i=>{this.product=i,this.isLoading=!1,console.log(r)})})}deleteProduct(){this.product&&this.product.name&&confirm("Are you sure you want to delete this product?")&&this.apiService.deleteProduct(this.product.name).subscribe(()=>{console.log("Product deleted successfully"),this.router.navigate(["/products"])},r=>{console.error("Error deleting product:",r)})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(Ea),Q(Xp),Q(wo),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-single-product"]],decls:3,vars:1,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"],["class","card",4,"ngIf"],[1,"card"],[1,"poster"],["alt","Location Unknown",3,"src"],[1,"details"],[1,"rating"],[1,"fas","fa-star"],[1,"far","fa-star"],[1,"tags"],[1,"tag"],["class","desc",4,"ngIf"],["class","like-btn",4,"ngIf"],["class","edit-delete",4,"ngIf"],[1,"desc"],[1,"like-btn"],[1,"edit-delete"],[1,"edit-btn",3,"routerLink"],[1,"delete-btn",3,"click"]],template:function(r,i){1&r&&(S(0,"main"),Ce(1,"link",0),xe(2,iee,30,11,"div",1),O()),2&r&&(X(2),me("ngIf",i.product))},dependencies:[qi,No,yL],styles:['@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif}main[_ngcontent-%COMP%]{padding-top:130px;padding-bottom:120px;display:flex;justify-content:center;align-items:center;background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%)}body[_ngcontent-%COMP%]{background:rgb(243,243,243);background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);display:flex;align-items:center;justify-content:center;min-height:100vh}h1[_ngcontent-%COMP%]{font-family:Georgia,Times New Roman,Times,serif;text-align:center;font-size:50px;margin-top:30px}.wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding:20px;display:flex;align-content:center;justify-content:center;gap:24px;flex-wrap:wrap}.card[_ngcontent-%COMP%]{position:relative;width:325px;height:450px;background:#000;border-radius:18px;overflow:hidden;box-shadow:0 5px 10px #0003}.poster[_ngcontent-%COMP%]{position:relative;top:0;left:0;width:100%;height:100%;overflow:hidden}.poster[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-45%;left:0;width:100%;height:100%;z-index:1;transition:.3s}.card[_ngcontent-%COMP%]:hover   .poster[_ngcontent-%COMP%]:before{bottom:0}.poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;transition:.3s}.card[_ngcontent-%COMP%]:hover   .poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.1)}.details[_ngcontent-%COMP%]{position:absolute;bottom:-100%;left:0;width:100%;height:auto;padding:1.5em 1.5em 2em;background:#000a;-webkit-backdrop-filter:blur(16px) saturate(120%);backdrop-filter:blur(16px) saturate(120%);transition:.3s;color:#fff;z-index:2}.card[_ngcontent-%COMP%]:hover   .details[_ngcontent-%COMP%]{bottom:0}.details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:5px}.details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400;font-size:1em;margin-bottom:10px;opacity:.6}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{position:relative;margin-bottom:15px;display:flex;gap:.25em}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#e3c414}.details[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.25em}.details[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;gap:.375em;margin-bottom:.875em;font-size:.85em}.details[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.35rem .65rem;color:#fff;border:1.5px solid rgba(255 255 255 / .4);border-radius:50px}.details[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{color:#fff;opacity:.8;line-height:1.5;margin-bottom:1em}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5em}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;gap:.625rem;width:100%}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;width:55px;height:55px;border-radius:50%;overflow:hidden;border:1.5px solid #fff}.details[_ngcontent-%COMP%]   .cast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{border:2px solid #8a8a8a;background-color:transparent;text-decoration:none;padding:.7em;position:relative;vertical-align:middle;text-align:center;display:inline-block;border-radius:3rem;color:#8a8a8a;transition:all ease .4s}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{border-color:#cc4b37}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:all ease .4s}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#8a8a8a}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#8a8a8a;margin:1em}.edit-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%], .fa[_ngcontent-%COMP%], .edit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#cc4b37}']})}return t})();function see(t,e){1&t&&(S(0,"p",15),U(1," Product name is required! "),O())}function aee(t,e){1&t&&(S(0,"p",15),U(1," Name's length should not be less than 3! "),O())}function uee(t,e){if(1&t&&(ir(0),xe(1,see,2,0,"p",14),xe(2,aee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("name"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("name"))||null==i.errors?null:i.errors.minlength)}}function cee(t,e){1&t&&(S(0,"p",15),U(1," Price is required! "),O())}function lee(t,e){1&t&&(S(0,"p",15),U(1," Price must be a positive number! "),O())}function dee(t,e){if(1&t&&(ir(0),xe(1,cee,2,0,"p",14),xe(2,lee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("price"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("price"))||null==i.errors?null:i.errors.min)}}function hee(t,e){1&t&&(S(0,"p",15),U(1," Rating is required! "),O())}function fee(t,e){1&t&&(S(0,"p",15),U(1," Rating must be between 0 and 5! "),O())}function pee(t,e){if(1&t&&(ir(0),xe(1,hee,2,0,"p",14),xe(2,fee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("rating"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("rating"))||null==i.errors?null:i.errors.min)}}let gee=(()=>{class t{constructor(n,r,i){this.fb=n,this.firestore=r,this.router=i,this.form=this.fb.group({name:["",[Wt.required,Wt.minLength(3)]],img:["",Wt.required],price:[null,[Wt.required,Wt.min(0)]],tag1:[""],tag2:[""],tag3:[""],description:["",[Wt.required,Wt.minLength(10)]],rating:[null,[Wt.required,Wt.min(0),Wt.max(5)]]})}createProduct(){if(this.form.invalid)return;const r=(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),i={...this.form.value,posted:r};this.firestore.collection("products ").add(i).then(()=>{alert("Product created successfully!"),this.router.navigate(["/products"])}).catch(o=>{console.error("Error adding product:",o)})}static#e=this.\u0275fac=function(r){return new(r||t)(Q(ug),Q(PD),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-create-product"]],decls:41,vars:5,consts:[[1,"container"],[1,"product-box"],[1,"create-product",3,"formGroup","ngSubmit"],[1,"input-box"],["type","text","name","name","id","name","formControlName","name"],[4,"ngIf"],["type","text","name","img","id","img","formControlName","img"],["type","number","name","price","id","price","formControlName","price"],["type","text","name","tag1","id","tag1","formControlName","tag1"],["type","text","name","tag2","id","tag2","formControlName","tag2"],["type","text","name","tag3","id","tag3","formControlName","tag3"],["name","description","id","description","formControlName","description"],["type","number","name","rating","id","rating","formControlName","rating","min","0","max","5"],[1,"btn",3,"disabled"],["class","error",4,"ngIf"],[1,"error"]],template:function(r,i){if(1&r&&(S(0,"body")(1,"div",0)(2,"div",1)(3,"form",2),Ft("ngSubmit",function(){return i.createProduct()}),S(4,"div",3),Ce(5,"input",4),xe(6,uee,3,2,"ng-container",5),S(7,"label"),U(8,"Product Name"),O()(),S(9,"div",3),Ce(10,"input",6),S(11,"label"),U(12,"Image URL"),O()(),S(13,"div",3),Ce(14,"input",7),xe(15,dee,3,2,"ng-container",5),S(16,"label"),U(17,"Price"),O()(),S(18,"div",3),Ce(19,"input",8),S(20,"label"),U(21,"Tag 1"),O()(),S(22,"div",3),Ce(23,"input",9),S(24,"label"),U(25,"Tag 2"),O()(),S(26,"div",3),Ce(27,"input",10),S(28,"label"),U(29,"Tag 3"),O()(),S(30,"div",3),Ce(31,"input",11),S(32,"label"),U(33,"Description"),O()(),S(34,"div",3),Ce(35,"input",12),xe(36,pee,3,2,"ng-container",5),S(37,"label"),U(38,"Rating"),O()(),S(39,"button",13),U(40,"Create Product"),O()()()()()),2&r){let o,s,a;X(3),me("formGroup",i.form),X(3),me("ngIf",null==(o=i.form.get("name"))?null:o.touched),X(9),me("ngIf",null==(s=i.form.get("price"))?null:s.touched),X(21),me("ngIf",null==(a=i.form.get("rating"))?null:a.touched),X(3),me("disabled",i.form.invalid)}},dependencies:[qi,Za,Ks,Kv,yc,Wa,Jv,Yv,Ka,Ic],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f1f1f1}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background:url(https://ananditnutrition.com/cdn/shop/files/banner6_copy_1500x.webp?v=1686536963) no-repeat;background-position:center;background-size:cover;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px)}.login-box[_ngcontent-%COMP%]{position:relative;width:450px;height:650px;background:transparent;border:2px solid rgba(255,255,255,.5);border-radius:20px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]   div.input-box[_ngcontent-%COMP%]{position:relative;margin:30px 0;width:310px;border-bottom:2px solid #413a3a}.input-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);color:#fff;font-size:1em;pointer-events:none;transition:.5s}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:50px;background:transparent;border:none;outline:none;font-size:1em;padding:0 35px 0 5px;color:#fff}input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{top:-5px}input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-5px}.error[_ngcontent-%COMP%]{color:red;font-size:14px}.btn[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:40px;background:#fff;border:none;outline:none;cursor:pointer;font-size:10px;font-weight:600}.signup-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0 15px;font-size:.9em;color:#fff}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;color:#fff;font-size:1.2em;top:20px}"]})}return t})();function mee(t,e){1&t&&(S(0,"p",15),U(1," Product name is required! "),O())}function _ee(t,e){1&t&&(S(0,"p",15),U(1," Name's length should not be less than 3! "),O())}function yee(t,e){if(1&t&&(ir(0),xe(1,mee,2,0,"p",14),xe(2,_ee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("name"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("name"))||null==i.errors?null:i.errors.minlength)}}function vee(t,e){1&t&&(S(0,"p",15),U(1," Price is required! "),O())}function Iee(t,e){1&t&&(S(0,"p",15),U(1," Price must be a positive number! "),O())}function Eee(t,e){if(1&t&&(ir(0),xe(1,vee,2,0,"p",14),xe(2,Iee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("price"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("price"))||null==i.errors?null:i.errors.min)}}function wee(t,e){1&t&&(S(0,"p",15),U(1," Rating is required! "),O())}function Cee(t,e){1&t&&(S(0,"p",15),U(1," Rating must be between 0 and 5! "),O())}function bee(t,e){if(1&t&&(ir(0),xe(1,wee,2,0,"p",14),xe(2,Cee,2,0,"p",14),or()),2&t){const n=et();let r,i;X(1),me("ngIf",null==(r=n.form.get("rating"))||null==r.errors?null:r.errors.required),X(1),me("ngIf",null==(i=n.form.get("rating"))||null==i.errors?null:i.errors.min)}}let Tee=(()=>{class t{constructor(n,r,i,o){this.fb=n,this.route=r,this.apiService=i,this.router=o}ngOnInit(){this.form=this.fb.group({name:["",[Wt.required,Wt.minLength(3)]],img:[""],price:["",[Wt.required,Wt.min(0)]],tag1:[""],tag2:[""],tag3:[""],description:[""],rating:["",[Wt.required,Wt.min(0),Wt.max(5)]]});const n=this.route.snapshot.paramMap.get("name");n&&this.apiService.getProductByName(n).subscribe(r=>{this.product=r,this.form.patchValue(r)},r=>{console.error("Error fetching product: ",r)})}editProduct(){if(this.form.valid){const n={...this.form.value};this.product&&this.product.name?(console.log("Updating product with name:",this.product.name),console.log("Updated product data:",n),this.apiService.updateProduct(this.product.name,n).subscribe(()=>{this.router.navigate(["/products"])},r=>{console.error("Error updating product: ",r)})):console.error("Product name is undefined. Cannot update.")}}static#e=this.\u0275fac=function(r){return new(r||t)(Q(ug),Q(Ea),Q(Xp),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-edit-product"]],decls:41,vars:5,consts:[[1,"container"],[1,"product-box"],[1,"create-product",3,"formGroup","ngSubmit"],[1,"input-box"],["type","text","name","name","id","name","formControlName","name"],[4,"ngIf"],["type","text","name","img","id","img","formControlName","img"],["type","number","name","price","id","price","formControlName","price"],["type","text","name","tag1","id","tag1","formControlName","tag1"],["type","text","name","tag2","id","tag2","formControlName","tag2"],["type","text","name","tag3","id","tag3","formControlName","tag3"],["name","description","id","description","formControlName","description"],["type","number","name","rating","id","rating","formControlName","rating","min","0","max","5"],[1,"btn",3,"disabled"],["class","error",4,"ngIf"],[1,"error"]],template:function(r,i){if(1&r&&(S(0,"body")(1,"div",0)(2,"div",1)(3,"form",2),Ft("ngSubmit",function(){return i.editProduct()}),S(4,"div",3),Ce(5,"input",4),xe(6,yee,3,2,"ng-container",5),S(7,"label"),U(8,"Product Name"),O()(),S(9,"div",3),Ce(10,"input",6),S(11,"label"),U(12,"Image URL"),O()(),S(13,"div",3),Ce(14,"input",7),xe(15,Eee,3,2,"ng-container",5),S(16,"label"),U(17,"Price"),O()(),S(18,"div",3),Ce(19,"input",8),S(20,"label"),U(21,"Tag 1"),O()(),S(22,"div",3),Ce(23,"input",9),S(24,"label"),U(25,"Tag 2"),O()(),S(26,"div",3),Ce(27,"input",10),S(28,"label"),U(29,"Tag 3"),O()(),S(30,"div",3),Ce(31,"input",11),S(32,"label"),U(33,"Description"),O()(),S(34,"div",3),Ce(35,"input",12),xe(36,bee,3,2,"ng-container",5),S(37,"label"),U(38,"Rating"),O()(),S(39,"button",13),U(40,"Edit Product"),O()()()()()),2&r){let o,s,a;X(3),me("formGroup",i.form),X(3),me("ngIf",null==(o=i.form.get("name"))?null:o.touched),X(9),me("ngIf",null==(s=i.form.get("price"))?null:s.touched),X(21),me("ngIf",null==(a=i.form.get("rating"))?null:a.touched),X(3),me("disabled",i.form.invalid)}},dependencies:[qi,Za,Ks,Kv,yc,Wa,Jv,Yv,Ka,Ic],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Poppins,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f1f1f1}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background:url(https://ananditnutrition.com/cdn/shop/files/banner6_copy_1500x.webp?v=1686536963) no-repeat;background-position:center;background-size:cover;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px)}.login-box[_ngcontent-%COMP%]{position:relative;width:450px;height:650px;background:transparent;border:2px solid rgba(255,255,255,.5);border-radius:20px;-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);display:flex;justify-content:center;align-items:center}form[_ngcontent-%COMP%]   div.input-box[_ngcontent-%COMP%]{position:relative;margin:30px 0;width:310px;border-bottom:2px solid #413a3a}.input-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);color:#fff;font-size:1em;pointer-events:none;transition:.5s}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:50px;background:transparent;border:none;outline:none;font-size:1em;padding:0 35px 0 5px;color:#fff}input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{top:-5px}input[_ngcontent-%COMP%]:valid ~ label[_ngcontent-%COMP%]{top:-5px}.error[_ngcontent-%COMP%]{color:red;font-size:14px}.btn[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:40px;background:#fff;border:none;outline:none;cursor:pointer;font-size:10px;font-weight:600}.signup-link[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0 15px;font-size:.9em;color:#fff}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:8px;color:#fff;font-size:1.2em;top:20px}"]})}return t})(),SU=(()=>{class t{constructor(n,r){this.userService=n,this.router=r}canActivate(){return this.userService.user$.pipe(he(n=>{const r=!!n&&this.userService.isAdmin();return r||this.router.navigate(["/"]),r}))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(wo),ce(vn))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Dee=[{path:"",pathMatch:"full",redirectTo:"/"},{path:"",component:hJ},{path:"products",component:vJ},{path:"about",component:bJ},{path:"contact",component:HX},{path:"discount",component:WX},{path:"login",component:CU,canActivate:[AU]},{path:"register",component:bU,canActivate:[AU]},{path:"404",component:TJ},{path:"profile",component:TU,canActivate:[XX]},{path:"comments",component:JX},{path:"product/:name",component:oee},{path:"create",component:gee,canActivate:[SU]},{path:"edit/:name",component:Tee,canActivate:[SU]},{path:"**",redirectTo:"/404"}];let Aee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[Bf.forRoot(Dee),Bf]})}return t})();function See(t,e){if(1&t){const n=Yo();S(0,"button",15),Ft("click",function(){return br(n),si(et().toggleMenu())}),U(1," \u2630 "),O()}}function Pee(t,e){1&t&&(S(0,"li")(1,"a",16),U(2,"Create product"),O()())}function xee(t,e){1&t&&(S(0,"ul")(1,"li")(2,"a",17),U(3,"Login"),O()(),S(4,"li")(5,"a",18),U(6,"Register"),O()()())}function Mee(t,e){if(1&t){const n=Yo();S(0,"ul")(1,"li")(2,"a",19),U(3),O()(),S(4,"li")(5,"a",20),Ft("click",function(){return br(n),si(et().logout())}),U(6,"Logout"),O()()()}if(2&t){const n=et();X(3),ai("",n.username,"'s profile")}}let Ree=(()=>{class t{constructor(n,r){this.userService=n,this.router=r,this.menuOpen=!1,this.isMenuVisible=!0}get isLoggedIn(){return this.userService.isLogged}get username(){return this.userService.user?.username||""}get isAdmin(){return this.userService.isAdmin()}toggleMenu(){this.menuOpen=!this.menuOpen}logout(){this.userService.logout().subscribe(()=>{this.router.navigate(["/"])})}ngOnInit(){this.updateMenuVisibility(),window.addEventListener("resize",this.updateMenuVisibility.bind(this))}updateMenuVisibility(){this.isMenuVisible=window.innerWidth<1024}handleClick(n){const r=n.target,i=document.querySelector(".menu"),o=document.querySelector(".menu-toggle");this.menuOpen&&i&&o&&!i.contains(r)&&!o.contains(r)&&(this.menuOpen=!1)}static#e=this.\u0275fac=function(r){return new(r||t)(Q(wo),Q(vn))};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-header"]],hostBindings:function(r,i){1&r&&Ft("click",function(s){return i.handleClick(s)},0,XS)},decls:31,vars:6,consts:[[1,"wrapper","p3"],[1,"icon-nav"],[1,"logo"],["routerLink","/"],["src","/assets/logo.jpg","alt","Logo"],["class","menu-toggle",3,"click",4,"ngIf"],[1,"menu"],["routerLink","/",1,"button"],["routerLink","/products",1,"button"],[4,"ngIf"],["routerLink","/discount",1,"button"],["routerLink","/about",1,"button"],["routerLink","/comments",1,"button"],["routerLink","/contact",1,"button"],[1,"log-reg-nav"],[1,"menu-toggle",3,"click"],["routerLink","/create",1,"button"],["routerLink","/login",1,"button"],["routerLink","/register",1,"button"],["routerLink","/profile",1,"button"],[1,"button",3,"click"]],template:function(r,i){1&r&&(S(0,"header")(1,"div",0)(2,"div",1)(3,"div",2)(4,"a",3),Ce(5,"img",4),O()(),xe(6,See,2,0,"button",5),O(),S(7,"div",6)(8,"ul")(9,"li")(10,"a",7),U(11,"Home"),O()(),S(12,"li")(13,"a",8),U(14,"Products"),O()(),xe(15,Pee,3,0,"li",9),S(16,"li")(17,"a",10),U(18,"Discount"),O()(),S(19,"li")(20,"a",11),U(21,"About"),O()(),S(22,"li")(23,"a",12),U(24,"Comments"),O()(),S(25,"li")(26,"a",13),U(27,"Contact"),O()()()(),S(28,"div",14),xe(29,xee,7,0,"ul",9),xe(30,Mee,7,1,"ul",9),O()()()),2&r&&(X(6),me("ngIf",i.isMenuVisible),X(1),uf("active",i.menuOpen),X(8),me("ngIf",i.isLoggedIn&&i.isAdmin),X(14),me("ngIf",!i.isLoggedIn),X(1),me("ngIf",i.isLoggedIn))},dependencies:[qi,No],styles:['header[_ngcontent-%COMP%]{z-index:9999;background:rgb(243,243,243);background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);width:100%}.wrapper[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%], .log-reg-nav[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:140px}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:.4em;margin-left:1em;width:50px;height:50px;border-radius:50%;align-items:center}.button[_ngcontent-%COMP%]{border:none;outline:none;color:gray;font-size:16px;cursor:pointer;position:relative;z-index:0;border-radius:10px}.button[_ngcontent-%COMP%]:before{content:"";transform:scaleX(1);position:absolute;top:2px;left:-2px;background-size:400%;z-index:-1;filter:blur(5px);width:calc(100% + 4px);height:calc(100% + 4px);animation:glowing 20s linear infinite;opacity:0;transition:opacity .3s ease-in-out;border-radius:10px}.button[_ngcontent-%COMP%]:active{color:#87cefa}.button[_ngcontent-%COMP%]:active:after{background:transparent}.button[_ngcontent-%COMP%]:hover:before{opacity:1}.button[_ngcontent-%COMP%]:after{z-index:-1;content:"";position:absolute;width:100%;height:100%;opacity:.3;left:0;top:0;border-radius:10px}.menu-toggle[_ngcontent-%COMP%]{display:none;background:transparent;border:none;font-size:24px;cursor:pointer}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}@media (max-width: 1024px){.wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.icon-nav[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media (max-width: 767px){.button[_ngcontent-%COMP%]{font-size:14px}.wrapper[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.icon-nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.logo[_ngcontent-%COMP%]{order:1}.menu[_ngcontent-%COMP%]{display:none}.menu-toggle[_ngcontent-%COMP%]{display:block;order:2;margin-top:10px;width:100%;text-align:right}.menu.active[_ngcontent-%COMP%]{display:flex}.menu.active[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{flex-direction:column}}']})}return t})(),Oee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"inner"],[1,"footer-bg"]],template:function(r,i){1&r&&(S(0,"footer")(1,"div",0)(2,"div",1),U(3," Dimensional nutrition \xa9 2023 "),S(4,"span"),U(5,"The best website for nutritional supplements"),O()()()())},styles:["footer[_ngcontent-%COMP%]{background:rgb(243,243,243);background:linear-gradient(90deg,rgba(206,206,215,1) 0%,rgb(255,255,255) 47%,rgb(210,212,213) 100%);width:100%;text-align:center;background-color:#000;position:relative}footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}footer[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{padding:0 10px}.footer-bg[_ngcontent-%COMP%]{width:100%;padding:10px 0}.list-services[_ngcontent-%COMP%]{padding:0}.list-services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;padding:0 0 0 10px}"]})}return t})(),Nee=(()=>{class t{constructor(){this.title="myproject"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=mn({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&Ce(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[nC,Ree,Oee]})}return t})(),kee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[B_,Bf]})}return t})(),PU=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[B_]})}return t})();class e0{}class t0{}class fs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof fs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new fs;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof fs?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class Vee{encodeKey(e){return xU(e)}encodeValue(e){return xU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Lee=/%(\d[a-f0-9])/gi,Uee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xU(t){return encodeURIComponent(t).replace(Lee,(e,n)=>Uee[n]??e)}function n0(t){return`${t}`}class Qa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vee,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Fee(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(n0):[n0(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Qa({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(n0(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(n0(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Bee{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function MU(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function RU(t){return typeof Blob<"u"&&t instanceof Blob}function OU(t){return typeof FormData<"u"&&t instanceof FormData}class cg{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function jee(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new fs),this.context||(this.context=new Bee),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Qa,this.urlWithParams=n}serializeBody(){return null===this.body?null:MU(this.body)||RU(this.body)||OU(this.body)||function $ee(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||OU(this.body)?null:RU(this.body)?this.body.type||null:MU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),l)),new cg(n,r,o,{params:l,headers:u,context:h,reportProgress:a,responseType:i,withCredentials:s})}}var qd=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(qd||{});class ZD{constructor(e,n=200,r="OK"){this.headers=e.headers||new fs,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class KD extends ZD{constructor(e={}){super(e),this.type=qd.ResponseHeader}clone(e={}){return new KD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gd extends ZD{constructor(e={}){super(e),this.type=qd.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class NU extends ZD{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function QD(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let zee=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof cg)o=n;else{let u,l;u=i.headers instanceof fs?i.headers:new fs(i.headers),i.params&&(l=i.params instanceof Qa?i.params:new Qa({fromObject:i.params})),o=new cg(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=A(o).pipe($l(u=>this.handler.handle(u)));if(n instanceof cg||"events"===i.observe)return s;const a=s.pipe(yo(u=>u instanceof Gd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(he(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(he(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(he(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(he(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Qa).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,QD(i,r))}post(n,r,i={}){return this.request("POST",n,QD(i,r))}put(n,r,i={}){return this.request("PUT",n,QD(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(e0))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function FU(t,e){return e(t)}function qee(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const Wee=new de(""),lg=new de(""),LU=new de("");function Zee(){let t=null;return(e,n)=>{null===t&&(t=(we(Wee,{optional:!0})??[]).reduceRight(qee,FU));const r=we(E_),i=r.add();return t(e,n).pipe(bf(()=>r.remove(i)))}}let UU=(()=>{class t extends e0{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=we(E_)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(lg),...this.injector.get(LU,[])]));this.chain=i.reduceRight((o,s)=>function Gee(t,e,n){return(r,i)=>n.runInContext(()=>e(r,o=>t(o,i)))}(o,s,this.injector),FU)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(bf(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(t0),ce(Bi))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const Jee=/^\)\]\}',?\n/;let jU=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new G(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?I(r.\u0275loadImpl()):A(null)).pipe(Te(()=>new We(o=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((D,x)=>s.setRequestHeader(D,x.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const D=n.detectContentTypeHeader();null!==D&&s.setRequestHeader("Content-Type",D)}if(n.responseType){const D=n.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const a=n.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const D=s.statusText||"OK",x=new fs(s.getAllResponseHeaders()),L=function Xee(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||n.url;return u=new KD({headers:x,status:s.status,statusText:D,url:L}),u},h=()=>{let{headers:D,status:x,statusText:L,url:k}=l(),B=null;204!==x&&(B=typeof s.response>"u"?s.responseText:s.response),0===x&&(x=B?200:0);let oe=x>=200&&x<300;if("json"===n.responseType&&"string"==typeof B){const pe=B;B=B.replace(Jee,"");try{B=""!==B?JSON.parse(B):null}catch(ze){B=pe,oe&&(oe=!1,B={error:ze,text:B})}}oe?(o.next(new Gd({body:B,headers:D,status:x,statusText:L,url:k||void 0})),o.complete()):o.error(new NU({error:B,headers:D,status:x,statusText:L,url:k||void 0}))},g=D=>{const{url:x}=l(),L=new NU({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(L)};let m=!1;const y=D=>{m||(o.next(l()),m=!0);let x={type:qd.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(x.total=D.total),"text"===n.responseType&&s.responseText&&(x.partialText=s.responseText),o.next(x)},b=D=>{let x={type:qd.UploadProgress,loaded:D.loaded};D.lengthComputable&&(x.total=D.total),o.next(x)};return s.addEventListener("load",h),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),n.reportProgress&&(s.addEventListener("progress",y),null!==a&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:qd.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",h),s.removeEventListener("timeout",g),n.reportProgress&&(s.removeEventListener("progress",y),null!==a&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(ce(ER))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();const YD=new de("XSRF_ENABLED"),$U=new de("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),zU=new de("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class HU{}let nte=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=fR(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(ce(zi),ce(Ao),ce($U))};static#t=this.\u0275prov=Pe({token:t,factory:t.\u0275fac})}return t})();function rte(t,e){const n=t.url.toLowerCase();if(!we(YD)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=we(HU).getToken(),i=we(zU);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Ya=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Ya||{});function ite(...t){const e=[zee,jU,UU,{provide:e0,useExisting:UU},{provide:t0,useExisting:jU},{provide:lg,useValue:rte,multi:!0},{provide:YD,useValue:!0},{provide:HU,useClass:nte}];for(const n of t)e.push(...n.\u0275providers);return function PI(t){return{\u0275providers:t}}(e)}const qU=new de("LEGACY_INTERCEPTOR_FN");function ote(){return function wc(t,e){return{\u0275kind:t,\u0275providers:e}}(Ya.LegacyInterceptors,[{provide:qU,useFactory:Zee},{provide:lg,useExisting:qU,multi:!0}])}let ste=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({providers:[ite(ote())]})}return t})();const hte=[{path:"login",component:CU},{path:"register",component:bU},{path:"profile",component:TU}];let fte=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[Bf.forChild(hte),Bf]})}return t})(),pte=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t});static#n=this.\u0275inj=Dn({imports:[B_,fte,IU,PU,EU]})}return t})();class dg{constructor(e){return e}}class JD{constructor(){return(0,Br.getApps)()}}const XD=new de("angularfire2._apps"),mte={provide:dg,useFactory:function gte(t){return t&&1===t.length?t[0]:new dg((0,Br.getApp)())},deps:[[new Ii,XD]]},_te={provide:JD,deps:[[new Ii,XD]]};function yte(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new dg(r)}}let GU=(()=>{class t{constructor(n){(0,Br.registerVersion)("angularfire",Yl.full,"core"),(0,Br.registerVersion)("angularfire",Yl.full,"app"),(0,Br.registerVersion)("angular",GI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ce(Ao))};static \u0275mod=_n({type:t});static \u0275inj=Dn({providers:[mte,_te]})}return t})();function vte(t,...e){return{ngModule:GU,providers:[{provide:XD,useFactory:yte(t),multi:!0,deps:[Dt,Lr,$f,...e]}]}}const Ite=fC(Br.initializeApp,!0);var Ete=Le(206);class eA{constructor(e){return e}}class ZU{constructor(){return hC("auth")}}const tA=new de("angularfire2.auth-instances");function Cte(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new eA(r)}}const bte={provide:ZU,deps:[[new Ii,tA]]},Tte={provide:eA,useFactory:function wte(t,e){const n=tN("auth",t,e);return n&&new eA(n)},deps:[[new Ii,tA],dg]};let Dte=(()=>{class t{constructor(){(0,Br.registerVersion)("angularfire",Yl.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=_n({type:t});static \u0275inj=Dn({providers:[Tte,bte]})}return t})();function Ate(t,...e){return{ngModule:Dte,providers:[{provide:tA,useFactory:Cte(t),multi:!0,deps:[Dt,Lr,$f,JD,[new Ii,hy],...e]}]}}const Ste=fC(Ete.o,!0);class nA{constructor(e){return e}}const KU="firestore",rA=new de("angularfire2.firestore-instances");function Mte(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new nA(r)}}const Rte={provide:class Pte{constructor(){return hC(KU)}},deps:[[new Ii,rA]]},Ote={provide:nA,useFactory:function xte(t,e){const n=tN(KU,t,e);return n&&new nA(n)},deps:[[new Ii,rA],dg]};let Nte=(()=>{class t{constructor(){(0,Br.registerVersion)("angularfire",Yl.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=_n({type:t});static \u0275inj=Dn({providers:[Ote,Rte]})}return t})();function kte(t,...e){return{ngModule:Nte,providers:[{provide:rA,useFactory:Mte(t),multi:!0,deps:[Dt,Lr,$f,JD,[new Ii,ZU],[new Ii,hy],...e]}]}}const Vte=fC(KQ,!0),Fte_firebaseConfig={apiKey:"AIzaSyBiWN5CnkBy3OqC_grB7nAyU59FJ6iNRb8",authDomain:"dimensional-f4ccd.firebaseapp.com",projectId:"dimensional-f4ccd",storageBucket:"dimensional-f4ccd.appspot.com",messagingSenderId:"49173302788",appId:"1:49173302788:web:8c898b6ae87165f7906f51"};let Lte=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=_n({type:t,bootstrap:[Nee]});static#n=this.\u0275inj=Dn({imports:[UR,Aee,kee,PU,ste,pte,GU,UR,IU,EU,AW.initializeApp(Fte_firebaseConfig),vte(()=>Ite({projectId:"dimensional-f4ccd",appId:"1:49173302788:web:8c898b6ae87165f7906f51",storageBucket:"dimensional-f4ccd.appspot.com",apiKey:"AIzaSyBiWN5CnkBy3OqC_grB7nAyU59FJ6iNRb8",authDomain:"dimensional-f4ccd.firebaseapp.com",messagingSenderId:"49173302788"})),Ate(()=>Ste()),kte(()=>Vte())]})}return t})();T8().bootstrapModule(Lte).catch(t=>console.error(t))},106:(Yi,Vn,Le)=>{Le.d(Vn,{Z:()=>Fn});var C=Le(58),Z=Le(537),N=Le(534),Re=Le(879);class wt{constructor(qe,Ge){this._delegate=qe,this.firebase=Ge,(0,N._addComponent)(qe,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(qe,Ge=N._DEFAULT_ENTRY_NAME){var Ln;this._delegate.checkDestroyed();const tn=this._delegate.container.getProvider(qe);return!tn.isInitialized()&&"EXPLICIT"===(null===(Ln=tn.getComponent())||void 0===Ln?void 0:Ln.instantiationMode)&&tn.initialize(),tn.getImmediate({identifier:Ge})}_removeServiceInstance(qe,Ge=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(Ge)}_addComponent(qe){(0,N._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,N._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const wn=new C.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function gt(){const dt=function jt(dt){const qe={},Ge={__esModule:!0,initializeApp:function at(Xe,ae={}){const ft=N.initializeApp(Xe,ae);if((0,C.r3)(qe,ft.name))return qe[ft.name];const qt=new dt(ft,Ge);return qe[ft.name]=qt,qt},app:tn,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Gr(Xe){const ae=Xe.name,ft=ae.replace("-compat","");if(N._registerComponent(Xe)&&"PUBLIC"===Xe.type){const qt=(gn=tn())=>{if("function"!=typeof gn[ft])throw wn.create("invalid-app-argument",{appName:ae});return gn[ft]()};void 0!==Xe.serviceProps&&(0,C.ZB)(qt,Xe.serviceProps),Ge[ft]=qt,dt.prototype[ft]=function(...gn){return this._getService.bind(this,ae).apply(this,Xe.multipleInstances?gn:[])}}return"PUBLIC"===Xe.type?Ge[ft]:null},removeApp:function Ln(Xe){delete qe[Xe]},useAsService:function Sn(Xe,ae){return"serverAuth"===ae?null:ae},modularAPIs:N}};function tn(Xe){if(!(0,C.r3)(qe,Xe=Xe||N._DEFAULT_ENTRY_NAME))throw wn.create("no-app",{appName:Xe});return qe[Xe]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function Pt(){return Object.keys(qe).map(Xe=>qe[Xe])}}),tn.App=dt,Ge}(wt);return dt.INTERNAL=Object.assign(Object.assign({},dt.INTERNAL),{createFirebaseNamespace:gt,extendNamespace:function qe(Ge){(0,C.ZB)(dt,Ge)},createSubscribe:C.ne,ErrorFactory:C.LL,deepExtend:C.ZB}),dt}(),le=new Re.Yd("@firebase/app-compat");if((0,C.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const dt=self.firebase.SDK_VERSION;dt&&dt.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fn=J;!function Ct(dt){(0,N.registerVersion)("@firebase/app-compat","0.2.29",dt)}()},534:(Yi,Vn,Le)=>{Le.r(Vn),Le.d(Vn,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>no,_DEFAULT_ENTRY_NAME:()=>xi,_addComponent:()=>Kr,_addOrOverwriteComponent:()=>Qr,_apps:()=>cr,_clearComponents:()=>bn,_components:()=>Zr,_getProvider:()=>xt,_registerComponent:()=>Jn,_removeServiceInstance:()=>Yr,deleteApp:()=>Pn,getApp:()=>Ri,getApps:()=>jn,initializeApp:()=>ro,onLog:()=>Qs,registerVersion:()=>Jr,setLogLevel:()=>Fo});var C=Le(861),Z=Le(537),N=Le(879),Re=Le(58);const wt=(F,M)=>M.some(re=>F instanceof re);let en,wn;const J=new WeakMap,le=new WeakMap,Me=new WeakMap,Ke=new WeakMap,Ct=new WeakMap;let qe={get(F,M,re){if(F instanceof IDBTransaction){if("done"===M)return le.get(F);if("objectStoreNames"===M)return F.objectStoreNames||Me.get(F);if("store"===M)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return at(F[M])},set:(F,M,re)=>(F[M]=re,!0),has:(F,M)=>F instanceof IDBTransaction&&("done"===M||"store"===M)||M in F};function tn(F){return"function"==typeof F?function Ln(F){return F!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function gt(){return wn||(wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(F)?function(...M){return F.apply(Pt(this),M),at(J.get(this))}:function(...M){return at(F.apply(Pt(this),M))}:function(M,...re){const Ee=F.call(Pt(this),M,...re);return Me.set(Ee,M.sort?M.sort():[M]),at(Ee)}}(F):(F instanceof IDBTransaction&&function dt(F){if(le.has(F))return;const M=new Promise((re,Ee)=>{const rt=()=>{F.removeEventListener("complete",ut),F.removeEventListener("error",G),F.removeEventListener("abort",G)},ut=()=>{re(),rt()},G=()=>{Ee(F.error||new DOMException("AbortError","AbortError")),rt()};F.addEventListener("complete",ut),F.addEventListener("error",G),F.addEventListener("abort",G)});le.set(F,M)}(F),wt(F,function jt(){return en||(en=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(F,qe):F)}function at(F){if(F instanceof IDBRequest)return function Fn(F){const M=new Promise((re,Ee)=>{const rt=()=>{F.removeEventListener("success",ut),F.removeEventListener("error",G)},ut=()=>{re(at(F.result)),rt()},G=()=>{Ee(F.error),rt()};F.addEventListener("success",ut),F.addEventListener("error",G)});return M.then(re=>{re instanceof IDBCursor&&J.set(re,F)}).catch(()=>{}),Ct.set(M,F),M}(F);if(Ke.has(F))return Ke.get(F);const M=tn(F);return M!==F&&(Ke.set(F,M),Ct.set(M,F)),M}const Pt=F=>Ct.get(F),Xe=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],ft=new Map;function qt(F,M){if(!(F instanceof IDBDatabase)||M in F||"string"!=typeof M)return;if(ft.get(M))return ft.get(M);const re=M.replace(/FromIndex$/,""),Ee=M!==re,rt=ae.includes(re);if(!(re in(Ee?IDBIndex:IDBObjectStore).prototype)||!rt&&!Xe.includes(re))return;const ut=function(){var G=(0,C.Z)(function*(on,...Se){const it=this.transaction(on,rt?"readwrite":"readonly");let Xa=it.store;return Ee&&(Xa=Xa.index(Se.shift())),(yield Promise.all([Xa[re](...Se),rt&&it.done]))[0]});return function(Se){return G.apply(this,arguments)}}();return ft.set(M,ut),ut}!function Ge(F){qe=F(qe)}(F=>({...F,get:(M,re,Ee)=>qt(M,re)||F.get(M,re,Ee),has:(M,re)=>!!qt(M,re)||F.has(M,re)}));class gn{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map(re=>{if(function Cn(F){const M=F.getComponent();return"VERSION"===M?.type}(re)){const Ee=re.getImmediate();return`${Ee.library}/${Ee.version}`}return null}).filter(re=>re).join(" ")}}const Ai="@firebase/app",We=new N.Yd("@firebase/app"),xi="[DEFAULT]",Mi={[Ai]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cr=new Map,Zr=new Map;function Kr(F,M){try{F.container.addComponent(M)}catch(re){We.debug(`Component ${M.name} failed to register with FirebaseApp ${F.name}`,re)}}function Qr(F,M){F.container.addOrOverwriteComponent(M)}function Jn(F){const M=F.name;if(Zr.has(M))return We.debug(`There were multiple attempts to register component ${M}.`),!1;Zr.set(M,F);for(const re of cr.values())Kr(re,F);return!0}function xt(F,M){const re=F.container.getProvider("heartbeat").getImmediate({optional:!0});return re&&re.triggerHeartbeat(),F.container.getProvider(M)}function Yr(F,M,re=xi){xt(F,M).clearInstance(re)}function bn(){Zr.clear()}const rn=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(M,re,Ee){this._isDeleted=!1,this._options=Object.assign({},M),this._config=Object.assign({},re),this._name=re.name,this._automaticDataCollectionEnabled=re.automaticDataCollectionEnabled,this._container=Ee,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(M){this.checkDestroyed(),this._automaticDataCollectionEnabled=M}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(M){this._isDeleted=M}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}const no="10.9.0";function ro(F,M={}){let re=F;"object"!=typeof M&&(M={name:M});const Ee=Object.assign({name:xi,automaticDataCollectionEnabled:!1},M),rt=Ee.name;if("string"!=typeof rt||!rt)throw rn.create("bad-app-name",{appName:String(rt)});if(re||(re=(0,Re.aH)()),!re)throw rn.create("no-options");const ut=cr.get(rt);if(ut){if((0,Re.vZ)(re,ut.options)&&(0,Re.vZ)(Ee,ut.config))return ut;throw rn.create("duplicate-app",{appName:rt})}const G=new Z.H0(rt);for(const Se of Zr.values())G.addComponent(Se);const on=new Tn(re,Ee,G);return cr.set(rt,on),on}function Ri(F=xi){const M=cr.get(F);if(!M&&F===xi&&(0,Re.aH)())return ro();if(!M)throw rn.create("no-app",{appName:F});return M}function jn(){return Array.from(cr.values())}function Pn(F){return lr.apply(this,arguments)}function lr(){return(lr=(0,C.Z)(function*(F){const M=F.name;cr.has(M)&&(cr.delete(M),yield Promise.all(F.container.getProviders().map(re=>re.delete())),F.isDeleted=!0)})).apply(this,arguments)}function Jr(F,M,re){var Ee;let rt=null!==(Ee=Mi[F])&&void 0!==Ee?Ee:F;re&&(rt+=`-${re}`);const ut=rt.match(/\s|\//),G=M.match(/\s|\//);if(ut||G){const on=[`Unable to register library "${rt}" with version "${M}":`];return ut&&on.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),ut&&G&&on.push("and"),G&&on.push(`version name "${M}" contains illegal characters (whitespace or "/")`),void We.warn(on.join(" "))}Jn(new Z.wA(`${rt}-version`,()=>({library:rt,version:M}),"VERSION"))}function Qs(F,M){if(null!==F&&"function"!=typeof F)throw rn.create("invalid-log-argument");(0,N.Am)(F,M)}function Fo(F){(0,N.Ub)(F)}const ps="firebase-heartbeat-database",io=1,P="firebase-heartbeat-store";let T=null;function I(){return T||(T=function Gr(F,M,{blocked:re,upgrade:Ee,blocking:rt,terminated:ut}={}){const G=indexedDB.open(F,M),on=at(G);return Ee&&G.addEventListener("upgradeneeded",Se=>{Ee(at(G.result),Se.oldVersion,Se.newVersion,at(G.transaction),Se)}),re&&G.addEventListener("blocked",Se=>re(Se.oldVersion,Se.newVersion,Se)),on.then(Se=>{ut&&Se.addEventListener("close",()=>ut()),rt&&Se.addEventListener("versionchange",it=>rt(it.oldVersion,it.newVersion,it))}).catch(()=>{}),on}(ps,io,{upgrade:(F,M)=>{if(0===M)try{F.createObjectStore(P)}catch(re){console.warn(re)}}}).catch(F=>{throw rn.create("idb-open",{originalErrorMessage:F.message})})),T}function v(){return(v=(0,C.Z)(function*(F){try{const re=(yield I()).transaction(P),Ee=yield re.objectStore(P).get(be(F));return yield re.done,Ee}catch(M){if(M instanceof Re.ZR)We.warn(M.message);else{const re=rn.create("idb-get",{originalErrorMessage:M?.message});We.warn(re.message)}}})).apply(this,arguments)}function A(F,M){return K.apply(this,arguments)}function K(){return(K=(0,C.Z)(function*(F,M){try{const Ee=(yield I()).transaction(P,"readwrite");yield Ee.objectStore(P).put(M,be(F)),yield Ee.done}catch(re){if(re instanceof Re.ZR)We.warn(re.message);else{const Ee=rn.create("idb-set",{originalErrorMessage:re?.message});We.warn(Ee.message)}}})).apply(this,arguments)}function be(F){return`${F.name}!${F.options.appId}`}class yt{constructor(M){this.container=M,this._heartbeatsCache=null;const re=this.container.getProvider("app").getImmediate();this._storage=new Oe(re),this._heartbeatsCachePromise=this._storage.read().then(Ee=>(this._heartbeatsCache=Ee,Ee))}triggerHeartbeat(){var M=this;return(0,C.Z)(function*(){var re,Ee;const ut=M.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),G=ve();if((null!=(null===(re=M._heartbeatsCache)||void 0===re?void 0:re.heartbeats)||(M._heartbeatsCache=yield M._heartbeatsCachePromise,null!=(null===(Ee=M._heartbeatsCache)||void 0===Ee?void 0:Ee.heartbeats)))&&M._heartbeatsCache.lastSentHeartbeatDate!==G&&!M._heartbeatsCache.heartbeats.some(on=>on.date===G))return M._heartbeatsCache.heartbeats.push({date:G,agent:ut}),M._heartbeatsCache.heartbeats=M._heartbeatsCache.heartbeats.filter(on=>{const Se=new Date(on.date).valueOf();return Date.now()-Se<=2592e6}),M._storage.overwrite(M._heartbeatsCache)})()}getHeartbeatsHeader(){var M=this;return(0,C.Z)(function*(){var re;if(null===M._heartbeatsCache&&(yield M._heartbeatsCachePromise),null==(null===(re=M._heartbeatsCache)||void 0===re?void 0:re.heartbeats)||0===M._heartbeatsCache.heartbeats.length)return"";const Ee=ve(),{heartbeatsToSend:rt,unsentEntries:ut}=function Nt(F,M=1024){const re=[];let Ee=F.slice();for(const rt of F){const ut=re.find(G=>G.agent===rt.agent);if(ut){if(ut.dates.push(rt.date),Wn(re)>M){ut.dates.pop();break}}else if(re.push({agent:rt.agent,dates:[rt.date]}),Wn(re)>M){re.pop();break}Ee=Ee.slice(1)}return{heartbeatsToSend:re,unsentEntries:Ee}}(M._heartbeatsCache.heartbeats),G=(0,Re.L)(JSON.stringify({version:2,heartbeats:rt}));return M._heartbeatsCache.lastSentHeartbeatDate=Ee,ut.length>0?(M._heartbeatsCache.heartbeats=ut,yield M._storage.overwrite(M._heartbeatsCache)):(M._heartbeatsCache.heartbeats=[],M._storage.overwrite(M._heartbeatsCache)),G})()}}function ve(){return(new Date).toISOString().substring(0,10)}class Oe{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.Z)(function*(){return!!(0,Re.hl)()&&(0,Re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var M=this;return(0,C.Z)(function*(){if(yield M._canUseIndexedDBPromise){const Ee=yield function w(F){return v.apply(this,arguments)}(M.app);return Ee?.heartbeats?Ee:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(M){var re=this;return(0,C.Z)(function*(){var Ee;if(yield re._canUseIndexedDBPromise){const ut=yield re.read();return A(re.app,{lastSentHeartbeatDate:null!==(Ee=M.lastSentHeartbeatDate)&&void 0!==Ee?Ee:ut.lastSentHeartbeatDate,heartbeats:M.heartbeats})}})()}add(M){var re=this;return(0,C.Z)(function*(){var Ee;if(yield re._canUseIndexedDBPromise){const ut=yield re.read();return A(re.app,{lastSentHeartbeatDate:null!==(Ee=M.lastSentHeartbeatDate)&&void 0!==Ee?Ee:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...M.heartbeats]})}})()}}function Wn(F){return(0,Re.L)(JSON.stringify({version:2,heartbeats:F})).length}!function gs(F){Jn(new Z.wA("platform-logger",M=>new gn(M),"PRIVATE")),Jn(new Z.wA("heartbeat",M=>new yt(M),"PRIVATE")),Jr(Ai,"0.9.29",F),Jr(Ai,"0.9.29","esm2017"),Jr("fire-js","")}("")},537:(Yi,Vn,Le)=>{Le.d(Vn,{H0:()=>jt,wA:()=>N});var C=Le(861),Z=Le(58);class N{constructor(J,le,Me){this.name=J,this.instanceFactory=le,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const Re="[DEFAULT]";class wt{constructor(J,le){this.name=J,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const le=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(le)){const Me=new Z.BH;if(this.instancesDeferred.set(le,Me),this.isInitialized(le)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:le});Ke&&Me.resolve(Ke)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(J){var le;const Me=this.normalizeInstanceIdentifier(J?.identifier),Ke=null!==(le=J?.optional)&&void 0!==le&&le;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(Ct){if(Ke)return null;throw Ct}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function wn(gt){return"EAGER"===gt.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:Re})}catch{}for(const[le,Me]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(le);try{const Ct=this.getOrInitializeService({instanceIdentifier:Ke});Me.resolve(Ct)}catch{}}}}clearInstance(J=Re){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,C.Z)(function*(){const le=Array.from(J.instances.values());yield Promise.all([...le.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...le.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=Re){return this.instances.has(J)}getOptions(J=Re){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:le={}}=J,Me=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Me,options:le});for(const[Ct,Fn]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(Ct)&&Fn.resolve(Ke);return Ke}onInit(J,le){var Me;const Ke=this.normalizeInstanceIdentifier(le),Ct=null!==(Me=this.onInitCallbacks.get(Ke))&&void 0!==Me?Me:new Set;Ct.add(J),this.onInitCallbacks.set(Ke,Ct);const Fn=this.instances.get(Ke);return Fn&&J(Fn,Ke),()=>{Ct.delete(J)}}invokeOnInitCallbacks(J,le){const Me=this.onInitCallbacks.get(le);if(Me)for(const Ke of Me)try{Ke(J,le)}catch{}}getOrInitializeService({instanceIdentifier:J,options:le={}}){let Me=this.instances.get(J);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(gt=J,gt===Re?void 0:gt),options:le}),this.instances.set(J,Me),this.instancesOptions.set(J,le),this.invokeOnInitCallbacks(Me,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,Me)}catch{}var gt;return Me||null}normalizeInstanceIdentifier(J=Re){return this.component?this.component.multipleInstances?J:Re:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jt{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const le=this.getProvider(J.name);if(le.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);le.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const le=new wt(J,this);return this.providers.set(J,le),le}getProviders(){return Array.from(this.providers.values())}}},879:(Yi,Vn,Le)=>{Le.d(Vn,{Am:()=>gt,Ub:()=>jt,Yd:()=>wn,in:()=>Z});const C=[];var Z=function(J){return J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J}(Z||{});const N={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Re=Z.INFO,wt={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},en=(J,le,...Me)=>{if(le<J.logLevel)return;const Ke=(new Date).toISOString(),Ct=wt[le];if(!Ct)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Ct](`[${Ke}]  ${J.name}:`,...Me)};class wn{constructor(le){this.name=le,this._logLevel=Re,this._logHandler=en,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in Z))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?N[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...le),this._logHandler(this,Z.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...le),this._logHandler(this,Z.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...le),this._logHandler(this,Z.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...le),this._logHandler(this,Z.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...le),this._logHandler(this,Z.ERROR,...le)}}function jt(J){C.forEach(le=>{le.setLogLevel(J)})}function gt(J,le){for(const Me of C){let Ke=null;le&&le.level&&(Ke=N[le.level]),Me.userLogHandler=null===J?null:(Ct,Fn,...dt)=>{const qe=dt.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");Fn>=(Ke??Ct.logLevel)&&J({level:Z[Fn].toLowerCase(),message:qe,args:dt,type:Ct.name})}}}},365:(Yi,Vn,Le)=>{Le.r(Vn);var C=Le(861),Z=Le(106),N=Le(206),Re=Le(58),wn=(Le(534),Le(879),Le(537));function jt(){return window}function le(){return le=(0,C.Z)(function*(I,w,v){var A;const{BuildInfo:K}=jt();(0,N.au)(w.sessionId,"AuthEvent did not contain a session ID");const be=yield function Ge(I){return Ln.apply(this,arguments)}(w.sessionId),Te={};return(0,N.av)()?Te.ibi=K.packageName:(0,N.aw)()?Te.apn=K.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),K.displayName&&(Te.appDisplayName=K.displayName),Te.sessionId=be,(0,N.ay)(I,v,w.type,void 0,null!==(A=w.eventId)&&void 0!==A?A:void 0,Te)}),le.apply(this,arguments)}function Ke(){return(Ke=(0,C.Z)(function*(I){const{BuildInfo:w}=jt(),v={};(0,N.av)()?v.iosBundleId=w.packageName:(0,N.aw)()?v.androidPackageName=w.packageName:(0,N.ax)(I,"operation-not-supported-in-this-environment"),yield(0,N.az)(I,v)})).apply(this,arguments)}function dt(){return(dt=(0,C.Z)(function*(I,w,v){const{cordova:A}=jt();let K=()=>{};try{yield new Promise((be,Te)=>{let je=null;function yt(){var Oe;be();const Wn=null===(Oe=A.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Wn&&Wn(),"function"==typeof v?.close&&v.close()}function ve(){je||(je=window.setTimeout(()=>{Te((0,N.aB)(I,"redirect-cancelled-by-user"))},2e3))}function Nt(){"visible"===document?.visibilityState&&ve()}w.addPassiveListener(yt),document.addEventListener("resume",ve,!1),(0,N.aw)()&&document.addEventListener("visibilitychange",Nt,!1),K=()=>{w.removePassiveListener(yt),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",Nt,!1),je&&window.clearTimeout(je)}})}finally{K()}})).apply(this,arguments)}function Ln(){return(Ln=(0,C.Z)(function*(I){const w=function tn(I){if((0,N.au)(/[0-9a-zA-Z]+/.test(I),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(I);const w=new ArrayBuffer(I.length),v=new Uint8Array(w);for(let A=0;A<I.length;A++)v[A]=I.charCodeAt(A);return v}(I),v=yield crypto.subtle.digest("SHA-256",w);return Array.from(new Uint8Array(v)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Pt extends N.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(w=>{this.resolveInialized=w})}addPassiveListener(w){this.passiveListeners.add(w)}removePassiveListener(w){this.passiveListeners.delete(w)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(w){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(w)),super.onEvent(w)}initialized(){var w=this;return(0,C.Z)(function*(){yield w.initPromise})()}}function Xe(I){return ae.apply(this,arguments)}function ae(){return(ae=(0,C.Z)(function*(I){const w=yield gn()._get(Cn(I));return w&&(yield gn()._remove(Cn(I))),w})).apply(this,arguments)}function qt(){const I=[];for(let v=0;v<20;v++){const A=Math.floor(62*Math.random());I.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(A))}return I.join("")}function gn(){return(0,N.aE)(N.b)}function Cn(I){return(0,N.aF)("authEvent",I.config.apiKey,I.name)}function We(I){if(!I?.includes("?"))return{};const[w,...v]=I.split("?");return(0,Re.zd)(v.join("?"))}const $=class Ji{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,C.Z)(function*(){const A=w._key();let K=v.eventManagers.get(A);return K||(K=new Pt(w),v.eventManagers.set(A,K),v.attachCallbackListeners(w,K)),K})()}_openPopup(w){(0,N.ax)(w,"operation-not-supported-in-this-environment")}_openRedirect(w,v,A,K){var be=this;return(0,C.Z)(function*(){!function qe(I){var w,v,A,K,be,Te,je,yt,ve,Nt;const Oe=jt();(0,N.aC)("function"==typeof(null===(w=Oe?.universalLinks)||void 0===w?void 0:w.subscribe),I,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aC)(typeof(null===(v=Oe?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aC)("function"==typeof(null===(be=null===(K=null===(A=Oe?.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===be?void 0:be.openUrl),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(yt=null===(je=null===(Te=Oe?.cordova)||void 0===Te?void 0:Te.plugins)||void 0===je?void 0:je.browsertab)||void 0===yt?void 0:yt.isAvailable),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aC)("function"==typeof(null===(Nt=null===(ve=Oe?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===Nt?void 0:Nt.open),I,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(w);const Te=yield be._initialize(w);yield Te.initialized(),Te.resetRedirect(),(0,N.aI)(),yield be._originValidation(w);const je=function Gr(I,w,v=null){return{type:w,eventId:v,urlResponse:null,sessionId:qt(),postBody:null,tenantId:I.tenantId,error:(0,N.aB)(I,"no-auth-event")}}(w,A,K);yield function Sn(I,w){return gn()._set(Cn(I),w)}(w,je);const yt=yield function J(I,w,v){return le.apply(this,arguments)}(w,je,v),ve=yield function Ct(I){const{cordova:w}=jt();return new Promise(v=>{w.plugins.browsertab.isAvailable(A=>{let K=null;A?w.plugins.browsertab.openUrl(I):K=w.InAppBrowser.open(I,(0,N.aA)()?"_blank":"_system","location=yes"),v(K)})})}(yt);return function Fn(I,w,v){return dt.apply(this,arguments)}(w,Te,ve)})()}_isIframeWebStorageSupported(w,v){throw new Error("Method not implemented.")}_originValidation(w){const v=w._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Me(I){return Ke.apply(this,arguments)}(w)),this.originValidationPromises[v]}attachCallbackListeners(w,v){const{universalLinks:A,handleOpenURL:K,BuildInfo:be}=jt(),Te=setTimeout((0,C.Z)(function*(){yield Xe(w),v.onEvent(q())}),500),je=function(){var Nt=(0,C.Z)(function*(Oe){clearTimeout(Te);const Wn=yield Xe(w);let gs=null;Wn&&Oe?.url&&(gs=function ft(I,w){var v,A;const K=function Si(I){const w=We(I),v=w.link?decodeURIComponent(w.link):void 0,A=We(v).link,K=w.deep_link_id?decodeURIComponent(w.deep_link_id):void 0;return We(K).link||K||A||v||I}(w);if(K.includes("/__/auth/callback")){const be=We(K),Te=be.firebaseError?function Ai(I){try{return JSON.parse(I)}catch{return null}}(decodeURIComponent(be.firebaseError)):null,je=null===(A=null===(v=Te?.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],yt=je?(0,N.aB)(je):null;return yt?{type:I.type,eventId:I.eventId,tenantId:I.tenantId,error:yt,urlResponse:null,sessionId:null,postBody:null}:{type:I.type,eventId:I.eventId,tenantId:I.tenantId,sessionId:I.sessionId,urlResponse:K,postBody:null}}return null}(Wn,Oe.url)),v.onEvent(gs||q())});return function(Wn){return Nt.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,je);const yt=K,ve=`${be.packageName.toLowerCase()}://`;jt().handleOpenURL=function(){var Nt=(0,C.Z)(function*(Oe){if(Oe.toLowerCase().startsWith(ve)&&je({url:Oe}),"function"==typeof yt)try{yt(Oe)}catch(Wn){console.error(Wn)}});return function(Oe){return Nt.apply(this,arguments)}}()}};function q(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aB)("no-auth-event")}}function ge(){var I;return(null===(I=self?.location)||void 0===I?void 0:I.protocol)||null}function he(I=(0,Re.z$)()){return!("file:"!==ge()&&"ionic:"!==ge()&&"capacitor:"!==ge()||!I.toLowerCase().match(/iphone|ipad|ipod|android/))}function nn(){try{const I=self.localStorage,w=N.aN();if(I)return I.setItem(w,"1"),I.removeItem(w),!function kt(I=(0,Re.z$)()){return function mt(){return(0,Re.w1)()&&11===document?.documentMode}()||function Zt(I=(0,Re.z$)()){return/Edge\/\d+/.test(I)}(I)}()||(0,Re.hl)()}catch{return Un()&&(0,Re.hl)()}return!1}function Un(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function ot(){return"http:"===ge()||"https:"===ge()}()||(0,Re.ru)()||he())&&!function Fe(){return(0,Re.b$)()||(0,Re.UG)()}()&&nn()&&!Un()}function Yn(){return he()&&typeof document<"u"}function Pi(){return(Pi=(0,C.Z)(function*(){return!!Yn()&&new Promise(I=>{const w=setTimeout(()=>{I(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(w),I(!0)})})})).apply(this,arguments)}const _t={LOCAL:"local",NONE:"none",SESSION:"session"},eo=N.aC,to="persistence";function Mi(I){return cr.apply(this,arguments)}function cr(){return(cr=(0,C.Z)(function*(I){yield I._initializationPromise;const w=Kr(),v=N.aF(to,I.config.apiKey,I.name);w&&w.setItem(v,I._getPersistence())})).apply(this,arguments)}function Kr(){var I;try{return(null===(I=function Xi(){return typeof window<"u"?window:null}())||void 0===I?void 0:I.sessionStorage)||null}catch{return null}}const Qr=N.aC;class Jn{constructor(){this.browserResolver=N.aE(N.k),this.cordovaResolver=N.aE($),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aG,this._overrideRedirectResult=N.aH}_initialize(w){var v=this;return(0,C.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(w)})()}_openPopup(w,v,A,K){var be=this;return(0,C.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openPopup(w,v,A,K)})()}_openRedirect(w,v,A,K){var be=this;return(0,C.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openRedirect(w,v,A,K)})()}_isIframeWebStorageSupported(w,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(w,v)}_originValidation(w){return this.assertedUnderlyingResolver._originValidation(w)}get _shouldInitProactively(){return Yn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var w=this;return(0,C.Z)(function*(){if(w.underlyingResolver)return;const v=yield function Rr(){return Pi.apply(this,arguments)}();w.underlyingResolver=v?w.cordovaResolver:w.browserResolver})()}}function xt(I){return I.unwrap()}function bn(I){return rn(I)}function rn(I){const{_tokenResponse:w}=I instanceof Re.ZR?I.customData:I;if(!w)return null;if(!(I instanceof Re.ZR)&&"temporaryProof"in w&&"phoneNumber"in w)return N.P.credentialFromResult(I);const v=w.providerId;if(!v||v===N.p.PASSWORD)return null;let A;switch(v){case N.p.GOOGLE:A=N.X;break;case N.p.FACEBOOK:A=N.W;break;case N.p.GITHUB:A=N.Y;break;case N.p.TWITTER:A=N.$;break;default:const{oauthIdToken:K,oauthAccessToken:be,oauthTokenSecret:Te,pendingToken:je,nonce:yt}=w;return be||Te||K||je?je?v.startsWith("saml.")?N.aQ._create(v,je):N.N._fromParams({providerId:v,signInMethod:v,pendingToken:je,idToken:K,accessToken:be}):new N.Z(v).credential({idToken:K,accessToken:be,rawNonce:yt}):null}return I instanceof Re.ZR?A.credentialFromError(I):A.credentialFromResult(I)}function Tn(I,w){return w.catch(v=>{throw v instanceof Re.ZR&&function Ja(I,w){var v;const A=null===(v=w.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===w?.code)w.resolver=new Ri(I,N.as(I,w));else if(A){const K=rn(w),be=w;K&&(be.credential=K,be.tenantId=A.tenantId||void 0,be.email=A.email||void 0,be.phoneNumber=A.phoneNumber||void 0)}}(I,v),v}).then(v=>{const K=v.user;return{operationType:v.operationType,credential:bn(v),additionalUserInfo:N.aq(v),user:jn.getOrCreate(K)}})}function no(I,w){return ro.apply(this,arguments)}function ro(){return(ro=(0,C.Z)(function*(I,w){const v=yield w;return{verificationId:v.verificationId,confirm:A=>Tn(I,v.confirm(A))}})).apply(this,arguments)}class Ri{constructor(w,v){this.resolver=v,this.auth=function Yr(I){return I.wrapped()}(w)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(w){return Tn(xt(this.auth),this.resolver.resolveSignIn(w))}}class jn{constructor(w){this._delegate=w,this.multiFactor=N.at(w)}static getOrCreate(w){return jn.USER_MAP.has(w)||jn.USER_MAP.set(w,new jn(w)),jn.USER_MAP.get(w)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(w){return this._delegate.getIdTokenResult(w)}getIdToken(w){return this._delegate.getIdToken(w)}linkAndRetrieveDataWithCredential(w){return this.linkWithCredential(w)}linkWithCredential(w){var v=this;return(0,C.Z)(function*(){return Tn(v.auth,N.a2(v._delegate,w))})()}linkWithPhoneNumber(w,v){var A=this;return(0,C.Z)(function*(){return no(A.auth,N.l(A._delegate,w,v))})()}linkWithPopup(w){var v=this;return(0,C.Z)(function*(){return Tn(v.auth,N.d(v._delegate,w,Jn))})()}linkWithRedirect(w){var v=this;return(0,C.Z)(function*(){return yield Mi(N.aJ(v.auth)),N.g(v._delegate,w,Jn)})()}reauthenticateAndRetrieveDataWithCredential(w){return this.reauthenticateWithCredential(w)}reauthenticateWithCredential(w){var v=this;return(0,C.Z)(function*(){return Tn(v.auth,N.a3(v._delegate,w))})()}reauthenticateWithPhoneNumber(w,v){return no(this.auth,N.r(this._delegate,w,v))}reauthenticateWithPopup(w){return Tn(this.auth,N.e(this._delegate,w,Jn))}reauthenticateWithRedirect(w){var v=this;return(0,C.Z)(function*(){return yield Mi(N.aJ(v.auth)),N.h(v._delegate,w,Jn)})()}sendEmailVerification(w){return N.ag(this._delegate,w)}unlink(w){var v=this;return(0,C.Z)(function*(){return yield N.ap(v._delegate,w),v})()}updateEmail(w){return N.al(this._delegate,w)}updatePassword(w){return N.am(this._delegate,w)}updatePhoneNumber(w){return N.u(this._delegate,w)}updateProfile(w){return N.ak(this._delegate,w)}verifyBeforeUpdateEmail(w,v){return N.ah(this._delegate,w,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jn.USER_MAP=new WeakMap;const Pn=N.aC;let lr=(()=>{class I{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=v.options;Pn(K,"invalid-api-key",{appName:v.name}),Pn(K,"invalid-api-key",{appName:v.name});const be=typeof window<"u"?Jn:void 0;this._delegate=A.initialize({options:{persistence:Qs(K,v.name),popupRedirectResolver:be}}),this._delegate._updateErrorMap(N.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){N.K(this._delegate,v,A)}applyActionCode(v){return N.a7(this._delegate,v)}checkActionCode(v){return N.a8(this._delegate,v)}confirmPasswordReset(v,A){return N.a6(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var K=this;return(0,C.Z)(function*(){return Tn(K._delegate,N.aa(K._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return N.af(this._delegate,v)}isSignInWithEmailLink(v){return N.ad(this._delegate,v)}getRedirectResult(){var v=this;return(0,C.Z)(function*(){Pn(Bn(),v._delegate,"operation-not-supported-in-this-environment");const A=yield N.j(v._delegate,Jn);return A?Tn(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function W(I,w){(0,N.aJ)(I)._logFramework(w)}(this._delegate,v)}onAuthStateChanged(v,A,K){const{next:be,error:Te,complete:je}=Jr(v,A,K);return this._delegate.onAuthStateChanged(be,Te,je)}onIdTokenChanged(v,A,K){const{next:be,error:Te,complete:je}=Jr(v,A,K);return this._delegate.onIdTokenChanged(be,Te,je)}sendSignInLinkToEmail(v,A){return N.ac(this._delegate,v,A)}sendPasswordResetEmail(v,A){return N.a5(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,C.Z)(function*(){let K;switch(function xi(I,w){eo(Object.values(_t).includes(w),I,"invalid-persistence-type"),(0,Re.b$)()?eo(w!==_t.SESSION,I,"unsupported-persistence-type"):(0,Re.UG)()?eo(w===_t.NONE,I,"unsupported-persistence-type"):Un()?eo(w===_t.NONE||w===_t.LOCAL&&(0,Re.hl)(),I,"unsupported-persistence-type"):eo(w===_t.NONE||nn(),I,"unsupported-persistence-type")}(A._delegate,v),v){case _t.SESSION:K=N.a;break;case _t.LOCAL:K=(yield N.aE(N.i)._isAvailable())?N.i:N.b;break;case _t.NONE:K=N.U;break;default:return N.ax("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return Tn(this._delegate,N.a0(this._delegate))}signInWithCredential(v){return Tn(this._delegate,N.a1(this._delegate,v))}signInWithCustomToken(v){return Tn(this._delegate,N.a4(this._delegate,v))}signInWithEmailAndPassword(v,A){return Tn(this._delegate,N.ab(this._delegate,v,A))}signInWithEmailLink(v,A){return Tn(this._delegate,N.ae(this._delegate,v,A))}signInWithPhoneNumber(v,A){return no(this._delegate,N.s(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,C.Z)(function*(){return Pn(Bn(),A._delegate,"operation-not-supported-in-this-environment"),Tn(A._delegate,N.c(A._delegate,v,Jn))})()}signInWithRedirect(v){var A=this;return(0,C.Z)(function*(){return Pn(Bn(),A._delegate,"operation-not-supported-in-this-environment"),yield Mi(A._delegate),N.f(A._delegate,v,Jn)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return N.a9(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return I.Persistence=_t,I})();function Jr(I,w,v){let A=I;"function"!=typeof I&&({next:A,error:w,complete:v}=I);const K=A;return{next:Te=>K(Te&&jn.getOrCreate(Te)),error:w,complete:v}}function Qs(I,w){const v=function Zr(I,w){const v=Kr();if(!v)return[];const A=N.aF(to,I,w);switch(v.getItem(A)){case _t.NONE:return[N.U];case _t.LOCAL:return[N.i,N.a];case _t.SESSION:return[N.a];default:return[]}}(I,w);if(typeof self<"u"&&!v.includes(N.i)&&v.push(N.i),typeof window<"u")for(const A of[N.b,N.a])v.includes(A)||v.push(A);return v.includes(N.U)||v.push(N.U),v}class Fo{constructor(){this.providerId="phone",this._delegate=new N.P(xt(Z.Z.auth()))}static credential(w,v){return N.P.credential(w,v)}verifyPhoneNumber(w,v){return this._delegate.verifyPhoneNumber(w,v)}unwrap(){return this._delegate}}Fo.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Fo.PROVIDER_ID=N.P.PROVIDER_ID;const ps=N.aC;class io{constructor(w,v,A=Z.Z.app()){var K;ps(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new N.R(A.auth(),w,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function T(I){I.INTERNAL.registerComponent(new wn.wA("auth-compat",w=>{const v=w.getProvider("app-compat").getImmediate(),A=w.getProvider("auth");return new lr(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.V,FacebookAuthProvider:N.W,GithubAuthProvider:N.Y,GoogleAuthProvider:N.X,OAuthProvider:N.Z,SAMLAuthProvider:N._,PhoneAuthProvider:Fo,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:io,TwitterAuthProvider:N.$,Auth:lr,AuthCredential:N.L,Error:Re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),I.registerVersion("@firebase/auth-compat","0.5.4")}(Z.Z)},861:(Yi,Vn,Le)=>{function C(N,Re,wt,en,wn,jt,gt){try{var J=N[jt](gt),le=J.value}catch(Me){return void wt(Me)}J.done?Re(le):Promise.resolve(le).then(en,wn)}function Z(N){return function(){var Re=this,wt=arguments;return new Promise(function(en,wn){var jt=N.apply(Re,wt);function gt(le){C(jt,en,wn,gt,J,"next",le)}function J(le){C(jt,en,wn,gt,J,"throw",le)}gt(void 0)})}}Le.d(Vn,{Z:()=>Z})},582:(Yi,Vn,Le)=>{function Re($,q){var W={};for(var j in $)Object.prototype.hasOwnProperty.call($,j)&&q.indexOf(j)<0&&(W[j]=$[j]);if(null!=$&&"function"==typeof Object.getOwnPropertySymbols){var te=0;for(j=Object.getOwnPropertySymbols($);te<j.length;te++)q.indexOf(j[te])<0&&Object.prototype.propertyIsEnumerable.call($,j[te])&&(W[j[te]]=$[j[te]])}return W}function Me($,q,W,j){return new(W||(W=Promise))(function(ee,ge){function ot(mt){try{Fe(j.next(mt))}catch(Zt){ge(Zt)}}function he(mt){try{Fe(j.throw(mt))}catch(Zt){ge(Zt)}}function Fe(mt){mt.done?ee(mt.value):function te(ee){return ee instanceof W?ee:new W(function(ge){ge(ee)})}(mt.value).then(ot,he)}Fe((j=j.apply($,q||[])).next())})}function at($){return this instanceof at?(this.v=$,this):new at($)}function Pt($,q,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,j=W.apply($,q||[]),ee=[];return te={},ge("next"),ge("throw"),ge("return"),te[Symbol.asyncIterator]=function(){return this},te;function ge(kt){j[kt]&&(te[kt]=function(nn){return new Promise(function(Un,Bn){ee.push([kt,nn,Un,Bn])>1||ot(kt,nn)})})}function ot(kt,nn){try{!function he(kt){kt.value instanceof at?Promise.resolve(kt.value.v).then(Fe,mt):Zt(ee[0][2],kt)}(j[kt](nn))}catch(Un){Zt(ee[0][3],Un)}}function Fe(kt){ot("next",kt)}function mt(kt){ot("throw",kt)}function Zt(kt,nn){kt(nn),ee.shift(),ee.length&&ot(ee[0][0],ee[0][1])}}function Sn($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,q=$[Symbol.asyncIterator];return q?q.call($):($=function dt($){var q="function"==typeof Symbol&&Symbol.iterator,W=q&&$[q],j=0;if(W)return W.call($);if($&&"number"==typeof $.length)return{next:function(){return $&&j>=$.length&&($=void 0),{value:$&&$[j++],done:!$}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}($),W={},j("next"),j("throw"),j("return"),W[Symbol.asyncIterator]=function(){return this},W);function j(ee){W[ee]=$[ee]&&function(ge){return new Promise(function(ot,he){!function te(ee,ge,ot,he){Promise.resolve(he).then(function(Fe){ee({value:Fe,done:ot})},ge)}(ot,he,(ge=$[ee](ge)).done,ge.value)})}}}Le.d(Vn,{FC:()=>Pt,KL:()=>Sn,_T:()=>Re,mG:()=>Me,qq:()=>at}),"function"==typeof SuppressedError&&SuppressedError}},Yi=>{Yi(Yi.s=615)}]);